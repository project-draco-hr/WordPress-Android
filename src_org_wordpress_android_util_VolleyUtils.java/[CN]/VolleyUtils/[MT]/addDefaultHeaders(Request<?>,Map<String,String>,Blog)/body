{
  if (request.getUrl() != null && !StringUtils.getHost(request.getUrl()).endsWith("wordpress.com") && blog.hasValidHTTPAuthCredentials()) {
    HashMap<String,String> authParams=new HashMap<String,String>();
    String creds=String.format("%s:%s",blog.getHttpuser(),blog.getHttppassword());
    String auth="Basic " + Base64.encodeToString(creds.getBytes(),Base64.DEFAULT);
    authParams.put("Authorization",auth);
    headers.putAll(authParams);
  }
  HashMap<String,String> defaultHeaders=new HashMap<String,String>();
  defaultHeaders.put("User-Agent",Constants.USER_AGENT + "/" + WordPress.versionName);
  headers.putAll(defaultHeaders);
}
