{
  String username=args[0];
  String password=args[1];
  String url=args[2];
  String storedBlogID=args[3];
  String wwwURL="";
  Vector<String> apiInfo=null;
  String homePageLink=ApiHelper.getXMLRPCUrl(url + "?rsd",true);
  if (homePageLink != null) {
    url=homePageLink;
  }
 else {
    url=url.replace("xmlrpc.php","");
  }
  url=url.replace("https://","http://");
  if (url.indexOf("http://www.") >= 0) {
    wwwURL=url;
    url=url.replace("http://www.","http://");
  }
 else {
    wwwURL=url.replace("http://","http://www.");
  }
  if (!url.endsWith("/")) {
    url+="/";
    wwwURL+="/";
  }
  URI uri=URI.create("https://public-api.wordpress.com/get-user-blogs/1.0");
  configureClient(uri,username,password);
  HttpResponse response;
  try {
    response=client.execute(postMethod);
    this.statusCode=response.getStatusLine().getStatusCode();
    if (statusCode != HttpStatus.SC_OK) {
      throw new IOException("HTTP status code: " + statusCode + " was returned. "+ response.getStatusLine().getReasonPhrase());
    }
    try {
      XmlPullParser pullParser=XmlPullParserFactory.newInstance().newPullParser();
      HttpEntity entity=response.getEntity();
      PushbackInputStream is=new PushbackInputStream(entity.getContent());
      int bomCheck=is.read();
      int stopper=0;
      while (bomCheck != 60 && stopper < 20) {
        bomCheck=is.read();
        stopper++;
      }
      is.unread(bomCheck);
      pullParser.setInput(is,"UTF-8");
      int eventType=pullParser.getEventType();
      String apiKey="";
      boolean foundKey=false;
      boolean foundID=false;
      boolean foundURL=false;
      String curBlogID="";
      String curBlogURL="";
      while (eventType != XmlPullParser.END_DOCUMENT) {
        if (eventType == XmlPullParser.START_DOCUMENT) {
        }
 else         if (eventType == XmlPullParser.END_DOCUMENT) {
        }
 else         if (eventType == XmlPullParser.START_TAG) {
          if (pullParser.getName().equals("apikey")) {
            foundKey=true;
          }
 else           if (pullParser.getName().equals("id")) {
            foundID=true;
          }
 else           if (pullParser.getName().equals("url")) {
            foundURL=true;
          }
        }
 else         if (eventType == XmlPullParser.END_TAG) {
        }
 else         if (eventType == XmlPullParser.TEXT) {
          if (foundKey) {
            apiKey=pullParser.getText();
            foundKey=false;
          }
 else           if (foundID) {
            curBlogID=pullParser.getText();
            foundID=false;
          }
 else           if (foundURL) {
            curBlogURL=pullParser.getText();
            foundURL=false;
            if (!curBlogURL.endsWith("/"))             curBlogURL+="/";
            if (((curBlogURL.equals(url) || (curBlogURL.equals(wwwURL))) || storedBlogID.equals(curBlogID)) && !curBlogID.equals("1")) {
              apiInfo=new Vector<String>();
              apiInfo.add(apiKey);
              apiInfo.add(curBlogID);
            }
          }
        }
        eventType=pullParser.next();
      }
    }
 catch (    XmlPullParserException e) {
      e.printStackTrace();
      errorMsg=e.getMessage();
    }
  }
 catch (  ClientProtocolException e) {
    e.printStackTrace();
    errorMsg=e.getMessage();
  }
catch (  IOException e) {
    e.printStackTrace();
    errorMsg=e.getMessage();
  }
  return apiInfo;
}
