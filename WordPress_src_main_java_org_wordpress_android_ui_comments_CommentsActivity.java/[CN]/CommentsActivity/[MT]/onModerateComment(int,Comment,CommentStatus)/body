{
  FragmentManager fm=getFragmentManager();
  if (fm.getBackStackEntryCount() > 0) {
    fm.popBackStack();
  }
  if (newStatus == CommentStatus.APPROVED || newStatus == CommentStatus.UNAPPROVED) {
    getListFragment().setCommentIsModerating(comment.commentID,true);
    CommentActions.moderateComment(accountId,comment,newStatus,new CommentActions.CommentActionListener(){
      @Override public void onActionResult(      boolean succeeded){
        if (isFinishing() || !hasListFragment()) {
          return;
        }
        getListFragment().setCommentIsModerating(comment.commentID,false);
        if (succeeded) {
          getListFragment().updateComments(false);
        }
 else {
          ToastUtils.showToast(CommentsActivity.this,R.string.error_moderate_comment,ToastUtils.Duration.LONG);
        }
      }
    }
);
  }
 else   if (newStatus == CommentStatus.SPAM || newStatus == CommentStatus.TRASH) {
    getListFragment().removeComment(comment);
    getListFragment().setCommentIsModerating(comment.commentID,true);
    String message=(newStatus == CommentStatus.TRASH ? getString(R.string.comment_trashed) : getString(R.string.comment_spammed));
    View.OnClickListener undoListener=new View.OnClickListener(){
      @Override public void onClick(      View v){
        mSnackbarDidUndo=true;
        getListFragment().setCommentIsModerating(comment.commentID,false);
        getListFragment().loadComments();
      }
    }
;
    mSnackbarDidUndo=false;
    Snackbar.make(getListFragment().getView(),message,Snackbar.LENGTH_LONG).setAction(R.string.undo,undoListener).show();
    new Handler().postDelayed(new Runnable(){
      @Override public void run(){
        if (mSnackbarDidUndo) {
          return;
        }
        CommentActions.moderateComment(accountId,comment,newStatus,new CommentActions.CommentActionListener(){
          @Override public void onActionResult(          boolean succeeded){
            if (isFinishing() || !hasListFragment()) {
              return;
            }
            getListFragment().setCommentIsModerating(comment.commentID,false);
            if (!succeeded) {
              getListFragment().loadComments();
              ToastUtils.showToast(CommentsActivity.this,R.string.error_moderate_comment,ToastUtils.Duration.LONG);
            }
          }
        }
);
      }
    }
,Constants.SNACKBAR_LONG_DURATION_MS);
  }
}
