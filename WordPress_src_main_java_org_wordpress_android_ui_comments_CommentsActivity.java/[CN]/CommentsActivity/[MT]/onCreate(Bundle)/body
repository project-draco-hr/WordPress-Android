{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.comment_activity);
  Toolbar toolbar=(Toolbar)findViewById(R.id.toolbar);
  setSupportActionBar(toolbar);
  getSupportActionBar().setDisplayShowTitleEnabled(true);
  getSupportActionBar().setDisplayHomeAsUpEnabled(true);
  getSupportActionBar().setTitle(getString(R.string.tab_comments));
  if (savedInstanceState == null) {
    Fragment commentsListFragment=new CommentsListFragment();
    getFragmentManager().beginTransaction().add(R.id.layout_fragment_container,commentsListFragment,getString(R.string.fragment_tag_comment_list)).commitAllowingStateLoss();
  }
 else {
    getIntent().putExtra(KEY_AUTO_REFRESHED,savedInstanceState.getBoolean(KEY_AUTO_REFRESHED));
    getIntent().putExtra(KEY_EMPTY_VIEW_MESSAGE,savedInstanceState.getString(KEY_EMPTY_VIEW_MESSAGE));
    mSelectedCommentId=savedInstanceState.getLong(KEY_SELECTED_COMMENT_ID);
  }
  if (mSpinner == null && toolbar != null) {
    View view=View.inflate(this,R.layout.toolbar_spinner,toolbar);
    mSpinner=(Spinner)view.findViewById(R.id.action_bar_spinner);
    mCommentsStatusSpinnerAdapter=new CommentsStatusSpinnerAdapter(this,commentStatuses);
    mSpinner.setAdapter(mCommentsStatusSpinnerAdapter);
    mSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
      @Override public void onItemSelected(      AdapterView<?> parent,      View view,      int position,      long id){
        if (isFinishing()) {
          return;
        }
        final CommentStatus selectedCommentStatus=(CommentStatus)mCommentsStatusSpinnerAdapter.getItem(position);
        if (mCurrentCommentStatusType == selectedCommentStatus) {
          AppLog.d(AppLog.T.COMMENTS,"The selected STATUS is already active: " + selectedCommentStatus.getLabel());
          return;
        }
        AppLog.d(AppLog.T.STATS,"NEW STATUS : " + selectedCommentStatus.getLabel());
        mCurrentCommentStatusType=selectedCommentStatus;
      }
      @Override public void onNothingSelected(      AdapterView<?> parent){
      }
    }
);
  }
  selectCurrentCommentStatusTypeInActionBar();
}
