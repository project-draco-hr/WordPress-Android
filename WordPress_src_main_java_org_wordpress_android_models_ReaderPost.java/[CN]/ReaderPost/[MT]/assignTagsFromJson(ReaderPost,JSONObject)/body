{
  if (jsonTags == null) {
    return;
  }
  Iterator<String> it=jsonTags.keys();
  if (!it.hasNext()) {
    return;
  }
  String mostPopularTag=null;
  String nextMostPopularTag=null;
  int popularCount=0;
  StringBuilder sbAllTags=new StringBuilder();
  boolean isFirst=true;
  while (it.hasNext()) {
    JSONObject jsonThisTag=jsonTags.optJSONObject(it.next());
    String tagName=JSONUtil.getString(jsonThisTag,"name");
    int postCount=jsonThisTag.optInt("post_count");
    if (postCount > popularCount) {
      nextMostPopularTag=mostPopularTag;
      mostPopularTag=tagName;
      popularCount=postCount;
    }
    if (isFirst) {
      isFirst=false;
    }
 else {
      sbAllTags.append(",");
    }
    sbAllTags.append(tagName);
  }
  if (!post.hasPrimaryTag()) {
    post.setPrimaryTag(mostPopularTag);
  }
  post.setSecondaryTag(nextMostPopularTag);
  post.setTags(sbAllTags.toString());
}
