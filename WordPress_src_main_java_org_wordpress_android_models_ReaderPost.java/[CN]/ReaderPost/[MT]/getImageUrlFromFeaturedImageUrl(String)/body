{
  if (TextUtils.isEmpty(imageUrl))   return null;
  if (PhotonUtils.isMshotsUrl(imageUrl))   return UrlUtils.removeQuery(imageUrl).replaceFirst("https","http");
  if (imageUrl.contains("imgpress")) {
    String actualImageUrl=Uri.parse(imageUrl).getQueryParameter("url");
    if (actualImageUrl == null)     return imageUrl;
    if (actualImageUrl.contains("url=")) {
      return Uri.parse(actualImageUrl).getQueryParameter("url");
    }
 else {
      return actualImageUrl;
    }
  }
  int pos=imageUrl.lastIndexOf("?");
  if (pos == -1)   return imageUrl;
  return imageUrl.substring(0,pos);
}
