{
  if (mAdapter == null) {
    if (mPost == null)     ReaderLog.w("comment adapter created before post loaded");
    ReaderActions.DataLoadedListener dataLoadedListener=new ReaderActions.DataLoadedListener(){
      @Override public void onDataLoaded(      boolean isEmpty){
        mCommentFooter.setVisibility(isEmpty ? View.GONE : View.VISIBLE);
        if (mListState != null) {
          if (!isEmpty)           getListView().onRestoreInstanceState(mListState);
          mListState=null;
        }
      }
    }
;
    ReaderCommentAdapter.RequestReplyListener replyListener=new ReaderCommentAdapter.RequestReplyListener(){
      @Override public void onRequestReply(      long commentId){
        if (!mIsAddCommentBoxShowing) {
          showAddCommentBox(commentId);
        }
 else {
          hideAddCommentBox();
        }
      }
    }
;
    ReaderActions.DataRequestedListener dataRequestedListener=new ReaderActions.DataRequestedListener(){
      @Override public void onRequestData(      ReaderActions.RequestDataAction action){
        if (mIsUpdatingComments)         return;
        ReaderLog.i("requesting newer comments");
        updateComments();
      }
    }
;
    mAdapter=new ReaderCommentAdapter(this,mPost,replyListener,dataLoadedListener,dataRequestedListener);
  }
  return mAdapter;
}
