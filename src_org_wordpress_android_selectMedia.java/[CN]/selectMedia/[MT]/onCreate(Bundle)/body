{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.select_media);
  setTitle(getResources().getText(R.string.add_media));
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    accountName=extras.getString("accountName");
    commentID=extras.getInt("commentID");
    postID=extras.getString("postID");
  }
  final customButton selectPhoto=(customButton)findViewById(R.id.selectPhoto);
  final customButton takePhoto=(customButton)findViewById(R.id.takePhoto);
  takePhoto.setOnClickListener(new customButton.OnClickListener(){
    public void onClick(    View v){
      String state=android.os.Environment.getExternalStorageState();
      if (!state.equals(android.os.Environment.MEDIA_MOUNTED)) {
        try {
          throw new IOException("SD Card is not mounted.  It is " + state + ".");
        }
 catch (        IOException e) {
          e.printStackTrace();
        }
      }
      SD_CARD_TEMP_DIR=Environment.getExternalStorageDirectory() + File.separator + "wordpress"+ File.separator+ "wp-"+ System.currentTimeMillis()+ ".jpg";
      Intent takePictureFromCameraIntent=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
      takePictureFromCameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,Uri.fromFile(new File(SD_CARD_TEMP_DIR)));
      File directory=new File(SD_CARD_TEMP_DIR).getParentFile();
      if (!directory.exists() && !directory.mkdirs()) {
        try {
          throw new IOException("Path to file could not be created.");
        }
 catch (        IOException e) {
          e.printStackTrace();
        }
      }
      startActivityForResult(takePictureFromCameraIntent,0);
    }
  }
);
  selectPhoto.setOnClickListener(new customButton.OnClickListener(){
    public void onClick(    View v){
      Intent photoPickerIntent=new Intent(Intent.ACTION_PICK);
      photoPickerIntent.setType("image/*");
      startActivityForResult(photoPickerIntent,1);
    }
  }
);
}
