{
  if (!AppPrefs.isVisualEditorAvailable()) {
    PreferenceScreen preferenceScreen=(PreferenceScreen)findPreference(getActivity().getString(R.string.pref_key_account_settings_root));
    PreferenceCategory editor=(PreferenceCategory)findPreference(getActivity().getString(R.string.pref_key_editor));
    if (preferenceScreen != null && editor != null) {
      preferenceScreen.removePreference(editor);
    }
  }
 else {
    final CheckBoxPreference visualEditorCheckBox=(CheckBoxPreference)findPreference(getActivity().getString(R.string.pref_key_visual_editor_enabled));
    visualEditorCheckBox.setChecked(AppPrefs.isVisualEditorEnabled());
    visualEditorCheckBox.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener(){
      @Override public boolean onPreferenceChange(      final Preference preference,      final Object newValue){
        visualEditorCheckBox.setChecked(!visualEditorCheckBox.isChecked());
        AppPrefs.setVisualEditorEnabled(visualEditorCheckBox.isChecked());
        return false;
      }
    }
);
  }
}
