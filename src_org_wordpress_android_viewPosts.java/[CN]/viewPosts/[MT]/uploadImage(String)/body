{
  settingsDB settingsDB=new settingsDB(viewPosts.this);
  Vector categoriesVector=settingsDB.loadSettings(viewPosts.this,id);
  String sURL="";
  if (categoriesVector.get(0).toString().contains("xmlrpc.php")) {
    sURL=categoriesVector.get(0).toString();
  }
 else {
    sURL=categoriesVector.get(0).toString() + "xmlrpc.php";
  }
  String sUsername=categoriesVector.get(2).toString();
  String sPassword=categoriesVector.get(3).toString();
  sImagePlacement=categoriesVector.get(4).toString();
  String sCenterThumbnailString=categoriesVector.get(5).toString();
  if (sCenterThumbnailString.equals("1")) {
    centerThumbnail=true;
  }
  sMaxImageWidth=categoriesVector.get(7).toString();
  int sBlogId=Integer.parseInt(categoriesVector.get(10).toString());
  client=new XMLRPCClient(sURL);
  String curImagePath="";
  curImagePath=imageURL;
  Uri imageUri=Uri.parse(curImagePath);
  String imgID=imageUri.getLastPathSegment();
  long imgID2=Long.parseLong(imgID);
  String[] projection;
  projection=new String[]{Images.Media._ID,Images.Media.DATA};
  Uri imgPath;
  imgPath=ContentUris.withAppendedId(Images.Media.EXTERNAL_CONTENT_URI,imgID2);
  Cursor cur=managedQuery(imgPath,projection,null,null,null);
  String thumbData="";
  if (cur.moveToFirst()) {
    int nameColumn, dataColumn, heightColumn, widthColumn;
    nameColumn=cur.getColumnIndex(Images.Media._ID);
    dataColumn=cur.getColumnIndex(Images.Media.DATA);
    thumbData=cur.getString(dataColumn);
  }
  File jpeg=new File(thumbData);
  imageTitle=jpeg.getName();
  byte[] bytes=new byte[(int)jpeg.length()];
  DataInputStream in=null;
  try {
    in=new DataInputStream(new FileInputStream(jpeg));
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
  }
  try {
    in.readFully(bytes);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  try {
    in.close();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  byte[] finalBytes=imageHelper.createThumbnail(bytes,sMaxImageWidth);
  String contentType="image/jpg";
  Map<String,Object> m=new HashMap<String,Object>();
  HashMap hPost=new HashMap();
  m.put("name",imageTitle);
  m.put("type",contentType);
  m.put("bits",finalBytes);
  m.put("overwrite",true);
  client=new XMLRPCClient(sURL);
  XMLRPCMethodImages method=new XMLRPCMethodImages("wp.uploadFile",new XMLRPCMethodCallbackImages(){
    public void callFinished(    Object result){
      imgHTML="";
      HashMap contentHash=new HashMap();
      contentHash=(HashMap)result;
      String resultURL=contentHash.get("url").toString();
      String finalImageUrl="";
      finalImageUrl=resultURL;
      String centerCSS=" ";
      if (centerThumbnail) {
        centerCSS="style=\"display:block;margin-right:auto;margin-left:auto;\" ";
      }
      if (resultURL != null) {
        if (sImagePlacement.equals("Above Text")) {
          imgHTML+="<img " + centerCSS + "alt=\"image\" src=\""+ finalImageUrl+ "\" /><br /><br />";
        }
 else {
          imgHTML+="<br /><img " + centerCSS + "alt=\"image\" src=\""+ finalImageUrl+ "\" />";
        }
      }
    }
  }
);
  Object[] params={sBlogId,sUsername,sPassword,m};
  try {
    method.call(params);
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
  return imgHTML;
}
