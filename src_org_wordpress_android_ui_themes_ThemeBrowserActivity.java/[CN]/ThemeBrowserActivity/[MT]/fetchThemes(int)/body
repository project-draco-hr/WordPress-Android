{
  if (mFetchingThemes) {
    return;
  }
  String siteId=getBlogId();
  mFetchingThemes=true;
  WordPress.getRestClientUtils().getThemes(siteId,0,0,new Listener(){
    @Override public void onResponse(    JSONObject response){
      new FetchThemesTask(page).execute(response);
    }
  }
,new ErrorListener(){
    @Override public void onErrorResponse(    VolleyError response){
      if (response.toString().equals(AuthFailureError.class.getName())) {
        String errorTitle=getString(R.string.theme_auth_error_title);
        String errorMsg=getString(R.string.theme_auth_error_message);
        if (mIsRunning) {
          FragmentTransaction ft=getSupportFragmentManager().beginTransaction();
          WPAlertDialogFragment fragment=WPAlertDialogFragment.newAlertDialog(errorMsg,errorTitle);
          ft.add(fragment,"alert");
          ft.commitAllowingStateLoss();
        }
        AppLog.d(T.THEMES,"Failed to fetch themes: failed authenticate user");
      }
 else {
        Toast.makeText(ThemeBrowserActivity.this,R.string.theme_fetch_failed,Toast.LENGTH_LONG).show();
        AppLog.d(T.THEMES,"Failed to fetch themes: " + response.toString());
      }
      mFetchingThemes=false;
      setRefreshing(false,page);
    }
  }
);
}
