{
  final CommentHolder holder;
  if (convertView == null) {
    convertView=mInflater.inflate(R.layout.reader_listitem_comment,parent,false);
    holder=new CommentHolder(convertView);
    convertView.setTag(holder);
  }
 else {
    holder=(CommentHolder)convertView.getTag();
  }
  holder.txtAuthor.setText(comment.getAuthorName());
  holder.imgAvatar.setImageUrl(PhotonUtils.fixAvatar(comment.getAuthorAvatar(),mAvatarSz),WPNetworkImageView.ImageType.AVATAR);
  int textWrapMarginOffset=mAvatarSz + DisplayUtils.dpToPx(convertView.getContext(),12);
  int textWrapHeightOffset=Math.round(mAvatarSz - holder.txtAuthor.getPaint().getTextSize());
  CharSequence formattedCommentText=CommentUtils.displayHtmlComment(holder.txtText,comment.getText(),mMaxImageSz);
  CommentUtils.wrapTextAroundAvatar(holder.txtText,formattedCommentText,textWrapMarginOffset,textWrapHeightOffset);
  java.util.Date dtPublished=DateTimeUtils.iso8601ToJavaDate(comment.getPublished());
  holder.txtDate.setText(DateTimeUtils.javaDateToTimeSpan(dtPublished));
  if (comment.hasAuthorBlogId()) {
    View.OnClickListener authorListener=new View.OnClickListener(){
      @Override public void onClick(      View view){
        ReaderActivityLauncher.showReaderBlogPreview(view.getContext(),comment.authorBlogId,comment.getAuthorUrl());
      }
    }
;
    holder.imgAvatar.setOnClickListener(authorListener);
    holder.txtAuthor.setOnClickListener(authorListener);
    holder.txtAuthor.setTextColor(comment.isUnapproved() ? mTextColorUnapproved : mTextColorNormal);
  }
 else {
    holder.txtAuthor.setTextColor(comment.isUnapproved() ? mTextColorUnapproved : mTextColorNoLink);
  }
  if (comment.parentId != 0 && comment.level > 0) {
    int indent=Math.min(MAX_INDENT_LEVEL,comment.level) * mIndentPerLevel;
    RelativeLayout.LayoutParams params=(RelativeLayout.LayoutParams)holder.spacerIndent.getLayoutParams();
    params.width=indent;
    holder.spacerIndent.setVisibility(View.VISIBLE);
  }
 else {
    holder.spacerIndent.setVisibility(View.GONE);
  }
  if (mHighlightCommentId == comment.commentId) {
    convertView.setBackgroundDrawable(mBgColorHighlight);
    holder.progress.setVisibility(mShowProgressForHighlightedComment ? View.VISIBLE : View.GONE);
  }
 else   if (mPost != null && comment.authorId == mPost.authorId) {
    convertView.setBackgroundDrawable(mBgColorHighlight);
    holder.progress.setVisibility(View.GONE);
  }
 else   if (comment.isUnapproved()) {
    int paddingLeft=convertView.getPaddingLeft();
    int paddingTop=convertView.getPaddingTop();
    int paddingRight=convertView.getPaddingRight();
    int paddingBottom=convertView.getPaddingBottom();
    convertView.setBackgroundDrawable(mBgDrawableUnapproved);
    convertView.setPadding(paddingLeft,paddingTop,paddingRight,paddingBottom);
    holder.progress.setVisibility(View.GONE);
  }
 else {
    convertView.setBackgroundDrawable(mBgColorNormal);
    holder.progress.setVisibility(View.GONE);
  }
  if (comment.isUnapproved()) {
    holder.commentActions.setVisibility(View.GONE);
    holder.commentModerationActions.setVisibility(View.VISIBLE);
    holder.txtText.setTextColor(mTextColorUnapproved);
    holder.txtDate.setTextColor(mTextColorUnapproved);
    holder.txtDateIcon.setTextColor(mTextColorUnapproved);
  }
 else {
    holder.commentModerationActions.setVisibility(View.GONE);
    holder.commentActions.setVisibility(View.VISIBLE);
    holder.txtText.setTextColor(mTextColorNormal);
    holder.txtDate.setTextColor(mTextColorNormal);
    holder.txtDateIcon.setTextColor(mTextColorNormal);
  }
  if (mReplyListener != null) {
    View.OnClickListener replyClickListener=new View.OnClickListener(){
      @Override public void onClick(      View v){
        mReplyListener.onRequestReply(comment.commentId);
      }
    }
;
    holder.txtReply.setOnClickListener(replyClickListener);
    holder.imgReply.setOnClickListener(replyClickListener);
  }
  return convertView;
}
