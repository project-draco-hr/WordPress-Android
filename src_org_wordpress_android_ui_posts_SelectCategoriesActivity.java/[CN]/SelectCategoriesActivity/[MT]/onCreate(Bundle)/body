{
  super.onCreate(icicle);
  setContentView(R.layout.select_categories);
  setTitle(getResources().getString(R.string.select_categories));
  ActionBar actionBar=getSupportActionBar();
  actionBar.setHomeButtonEnabled(true);
  actionBar.setDisplayHomeAsUpEnabled(true);
  mListView=getListView();
  mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
  mListView.setItemsCanFocus(false);
  mListView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> arg0,    View arg1,    int position,    long arg3){
      if (mListView.getCheckedItemCount() > 1) {
        boolean uncategorizedNeedToBeSelected=false;
        for (int i=0; i < mCategoryLevels.size(); i++) {
          if (mCategoryLevels.get(i).getName().equalsIgnoreCase("uncategorized")) {
            mListView.setItemChecked(i,uncategorizedNeedToBeSelected);
          }
        }
      }
    }
  }
);
  mSelectedCategories=new HashSet<String>();
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    int blogId=extras.getInt("id");
    try {
      blog=new Blog(blogId);
    }
 catch (    Exception e) {
      Toast.makeText(this,getResources().getText(R.string.blog_not_found),Toast.LENGTH_SHORT).show();
      finish();
    }
    if (extras.containsKey("categories"))     mSelectedCategories=(HashSet<String>)extras.getSerializable("categories");
  }
  populateOrFetchCategories();
}
