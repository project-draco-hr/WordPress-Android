{
  String selectedCategories="";
  SparseBooleanArray selectedItems=lv.getCheckedItemPositions();
  for (int i=0; i < selectedItems.size(); i++) {
    if (selectedItems.get(selectedItems.keyAt(i)) == true) {
      String categoryName=mCategoryLevels.get(selectedItems.keyAt(i)).getCategory().getName();
      selectedCategories+=categoryName + ",";
    }
  }
  Bundle bundle=new Bundle();
  selectedCategories=selectedCategories.trim();
  if (selectedCategories.endsWith(",")) {
    selectedCategories=selectedCategories.substring(0,selectedCategories.length() - 1);
  }
  bundle.putString("selectedCategories",selectedCategories);
  Intent mIntent=new Intent();
  mIntent.putExtras(bundle);
  setResult(RESULT_OK,mIntent);
  finish();
}
