{
  if (cursor.isClosed())   return;
  view.setActivated(mShouldHighlightRows && cursor.getPosition() == mSelectedPosition);
  Bucket.ObjectCursor<Note> bucketCursor=(Bucket.ObjectCursor<Note>)cursor;
  Note note=bucketCursor.getObject();
  NoteViewHolder noteViewHolder=(NoteViewHolder)view.getTag();
  Note previousNote=null;
  if (bucketCursor.moveToPrevious()) {
    previousNote=bucketCursor.getObject();
    bucketCursor.moveToNext();
  }
  if (previousNote != null && previousNote.getTimeGroup() == note.getTimeGroup()) {
    noteViewHolder.headerView.setVisibility(View.GONE);
  }
 else {
    if (note.getTimeGroup() == Note.NoteTimeGroup.GROUP_TODAY) {
      noteViewHolder.headerText.setText(context.getString(R.string.stats_timeframe_today).toUpperCase());
    }
 else     if (note.getTimeGroup() == Note.NoteTimeGroup.GROUP_YESTERDAY) {
      noteViewHolder.headerText.setText(context.getString(R.string.stats_timeframe_yesterday).toUpperCase());
    }
 else     if (note.getTimeGroup() == Note.NoteTimeGroup.GROUP_LAST_WEEK) {
      noteViewHolder.headerText.setText(context.getString(R.string.last_week).toUpperCase());
    }
 else {
      noteViewHolder.headerText.setText(context.getString(R.string.older).toUpperCase());
    }
    noteViewHolder.headerView.setVisibility(View.VISIBLE);
  }
  noteViewHolder.txtLabel.setText(note.getFormattedSubject());
  if (note.isCommentType()) {
    noteViewHolder.txtLabel.setMaxLines(2);
    noteViewHolder.txtDetail.setText(note.getCommentPreview());
    noteViewHolder.txtDetail.setVisibility(View.VISIBLE);
  }
 else {
    noteViewHolder.txtLabel.setMaxLines(3);
    noteViewHolder.txtDetail.setVisibility(View.GONE);
  }
  String avatarUrl=PhotonUtils.fixAvatar(note.getIconURL(),mAvatarSz);
  noteViewHolder.imgAvatar.setImageUrl(avatarUrl,WPNetworkImageView.ImageType.AVATAR);
  if (!TextUtils.isEmpty(note.getNoticonCharacter())) {
    noteViewHolder.noteIcon.setText(note.getNoticonCharacter());
    if (note.isUnread()) {
      noteViewHolder.noteIcon.setBackgroundResource(R.drawable.shape_oval_blue);
    }
 else {
      noteViewHolder.noteIcon.setBackgroundResource(R.drawable.shape_oval_grey);
    }
    noteViewHolder.noteIcon.setVisibility(View.VISIBLE);
  }
 else {
    noteViewHolder.noteIcon.setVisibility(View.GONE);
  }
  if (note.isUnread()) {
    view.setBackgroundResource(mUnreadBackgroundResId);
  }
 else {
    view.setBackgroundResource(mReadBackgroundResId);
  }
}
