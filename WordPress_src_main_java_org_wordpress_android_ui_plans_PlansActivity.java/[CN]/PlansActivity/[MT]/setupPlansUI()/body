{
  if (mAvailablePlans == null || mAvailablePlans.size() == 0) {
    Toast.makeText(PlansActivity.this,R.string.plans_loading_error,Toast.LENGTH_LONG).show();
    finish();
    return;
  }
  hideProgress();
  mViewPager.setVisibility(View.VISIBLE);
  mViewPager.setOffscreenPageLimit(mAvailablePlans.size() - 1);
  mViewPager.setAdapter(getPageAdapter());
  mTabLayout.setVisibility(View.VISIBLE);
  mTabLayout.setTabMode(TabLayout.MODE_FIXED);
  int normalColor=getResources().getColor(R.color.blue_light);
  int selectedColor=getResources().getColor(R.color.white);
  mTabLayout.setTabTextColors(normalColor,selectedColor);
  mTabLayout.setupWithViewPager(mViewPager);
  if (mViewpagerPosSelected == NO_PREV_POS_SELECTED_VIEWPAGER) {
    for (    SitePlan sitePlan : mAvailablePlans) {
      if (sitePlan.isCurrentPlan()) {
        mViewpagerPosSelected=getPageAdapter().getPositionOfPlan(sitePlan.getProductID());
      }
    }
  }
  if (getPageAdapter().isValidPosition(mViewpagerPosSelected)) {
    mViewPager.setCurrentItem(mViewpagerPosSelected);
  }
}
