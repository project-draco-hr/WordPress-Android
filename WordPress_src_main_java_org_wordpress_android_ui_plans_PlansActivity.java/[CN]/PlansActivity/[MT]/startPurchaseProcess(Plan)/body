{
  boolean isBusinessPlan=(mViewPager.getCurrentItem() == mViewPager.getAdapter().getCount() - 1);
  String sku=isBusinessPlan ? "sub_test_plan_business_001" : "sub_test_plan_premium_001";
  Blog currentBlog=WordPress.getBlog(mLocalBlogID);
  JSONObject extraData=new JSONObject();
  try {
    extraData.put("blog_id",currentBlog.getDotComBlogId());
    extraData.put("user_id",AccountHelper.getDefaultAccount().getUserId());
  }
 catch (  JSONException e) {
    AppLog.e(AppLog.T.PLANS,"Can't add extra info to purchase data!",e);
    return;
  }
  mIabHelper.launchSubscriptionPurchaseFlow(this,sku,PURCHASE_PLAN_REQUEST,new IabHelper.OnIabPurchaseFinishedListener(){
    public void onIabPurchaseFinished(    IabResult result,    Purchase info){
      if (result != null) {
        AppLog.d(AppLog.T.PLANS,"IabResult: " + result.toString());
        if (result.isSuccess()) {
          if (info != null) {
            WordPress.sUpdateIAPsWordPressCom.forceRun();
            AppLog.d(AppLog.T.PLANS,"Purchase: " + info.toString());
            AppLog.d(AppLog.T.PLANS,"You have bought the " + info.getSku() + ". Excellent choice, adventurer!");
            boolean isBusinessPlan=(mViewPager.getCurrentItem() == mViewPager.getAdapter().getCount() - 1);
            Intent intent=new Intent(PlansActivity.this,PlanPostPurchaseActivity.class);
            intent.putExtra(PlanPostPurchaseActivity.ARG_IS_BUSINESS_PLAN,isBusinessPlan);
            startActivity(intent);
          }
        }
 else {
          AppLog.e(AppLog.T.PLANS,"Purchase failure " + result.getMessage());
        }
      }
    }
  }
,extraData.toString());
}
