{
  super.onCreate(icicle);
  setContentView(R.layout.viewposts);
  Bundle extras=getIntent().getExtras();
  String action=null;
  if (extras != null) {
    id=extras.getString("id");
    blog=new Blog(id,this);
    isPage=extras.getBoolean("viewPages");
    action=extras.getString("action");
  }
  TextView blogname=(TextView)findViewById(R.id.blogname);
  blogname.setText(blog.getBlogName());
  ImageButton home=(ImageButton)findViewById(R.id.home_small);
  ImageButton add=(ImageButton)findViewById(R.id.add_small);
  home.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,wpAndroid.class);
      startActivity(i);
    }
  }
);
  final ActionItem newpost=new ActionItem();
  newpost.setTitle("Add New Post");
  newpost.setIcon(getResources().getDrawable(R.drawable.posts_tab));
  newpost.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,EditPost.class);
      i.putExtra("accountName",accountName);
      i.putExtra("id",id);
      i.putExtra("isNew",true);
      startActivityForResult(i,0);
    }
  }
);
  final ActionItem newpage=new ActionItem();
  newpage.setTitle("Add New Page");
  newpage.setIcon(getResources().getDrawable(R.drawable.pages_tab));
  newpage.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,EditPost.class);
      i.putExtra("accountName",accountName);
      i.putExtra("id",id);
      i.putExtra("isNew",true);
      i.putExtra("isPage",true);
      startActivityForResult(i,0);
    }
  }
);
  final ActionItem addOldPhoto=new ActionItem();
  addOldPhoto.setTitle("Add Image From Gallery");
  addOldPhoto.setIcon(getResources().getDrawable(R.drawable.media));
  addOldPhoto.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,EditPost.class);
      i.putExtra("accountName",accountName);
      i.putExtra("id",id);
      i.putExtra("isNew",true);
      i.putExtra("viewPages",true);
      i.putExtra("option","photoPicker");
      startActivityForResult(i,0);
    }
  }
);
  final ActionItem takeNewPhoto=new ActionItem();
  takeNewPhoto.setTitle("Take Photo");
  takeNewPhoto.setIcon(getResources().getDrawable(R.drawable.media));
  takeNewPhoto.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,EditPost.class);
      i.putExtra("accountName",accountName);
      i.putExtra("id",id);
      i.putExtra("isNew",true);
      i.putExtra("viewPages",true);
      i.putExtra("option","takePhotoFromCamera");
      startActivityForResult(i,0);
    }
  }
);
  final ActionItem addOldVideo=new ActionItem();
  addOldVideo.setTitle("Add Video from Gallery");
  addOldVideo.setIcon(getResources().getDrawable(R.drawable.media));
  addOldVideo.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,EditPost.class);
      i.putExtra("accountName",accountName);
      i.putExtra("id",id);
      i.putExtra("isNew",true);
      i.putExtra("viewPages",true);
      i.putExtra("option","videoPicker");
      startActivityForResult(i,0);
    }
  }
);
  final ActionItem takeNewVideo=new ActionItem();
  takeNewVideo.setTitle("Take Video");
  takeNewVideo.setIcon(getResources().getDrawable(R.drawable.media));
  takeNewVideo.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,EditPost.class);
      i.putExtra("accountName",accountName);
      i.putExtra("id",id);
      i.putExtra("isNew",true);
      i.putExtra("viewPages",true);
      i.putExtra("option","takeVideo");
      startActivityForResult(i,0);
    }
  }
);
  add.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      QuickAction qa=new QuickAction(v);
      qa.addActionItem(newpost);
      qa.addActionItem(newpage);
      qa.addActionItem(addOldPhoto);
      qa.addActionItem(takeNewPhoto);
      qa.addActionItem(addOldVideo);
      qa.addActionItem(takeNewVideo);
      qa.setAnimStyle(QuickAction.ANIM_AUTO);
      qa.show();
    }
  }
);
  createSwitcher();
  if (action != null && !isPage) {
    if (action.equals("upload")) {
      selectedID=extras.getInt("uploadID");
      showDialog(ID_DIALOG_POSTING);
      try {
        submitResult=submitPost();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
 else {
      loadPosts(false);
    }
  }
 else {
    loadPosts(false);
  }
  Display display=getWindowManager().getDefaultDisplay();
  int width=display.getWidth();
  int height=display.getHeight();
  if (width > 480 || height > 480) {
    largeScreen=true;
  }
  final ImageButton addNewPost=(ImageButton)findViewById(R.id.newPost);
  addNewPost.setOnClickListener(new ImageButton.OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(ViewDrafts.this,EditPost.class);
      i.putExtra("accountName",accountName);
      i.putExtra("id",id);
      i.putExtra("isNew",true);
      if (isPage) {
        i.putExtra("isPage",true);
      }
      startActivityForResult(i,0);
    }
  }
);
  final ImageButton refresh=(ImageButton)findViewById(R.id.refresh);
  refresh.setOnClickListener(new ImageButton.OnClickListener(){
    public void onClick(    View v){
      refreshPosts(false);
    }
  }
);
}
