{
  List<String> queries=new ArrayList<>();
  Cursor cursor;
  if (TextUtils.isEmpty(filter)) {
    cursor=ReaderDatabase.getReadableDb().rawQuery("SELECT query_string FROM tbl_search_history ORDER BY date_used DESC",null);
  }
 else {
    String likeFilter=filter + "%";
    cursor=ReaderDatabase.getReadableDb().rawQuery("SELECT query_string FROM tbl_search_history WHERE query_string LIKE ? ORDER BY date_used DESC",new String[]{likeFilter});
  }
  try {
    while (cursor.moveToNext()) {
      queries.add(cursor.getString(0));
    }
    return queries;
  }
  finally {
    SqlUtils.closeCursor(cursor);
  }
}
