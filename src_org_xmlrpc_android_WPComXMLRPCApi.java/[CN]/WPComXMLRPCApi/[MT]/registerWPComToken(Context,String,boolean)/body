{
  SharedPreferences settings=PreferenceManager.getDefaultSharedPreferences(ctx);
  String uuid=settings.getString("wp_pref_notifications_uuid",null);
  if (uuid == null)   return;
  String deviceName=DeviceUtils.getInstance().getDeviceName(ctx);
  Map<String,Object> contentStruct=new HashMap<String,Object>();
  contentStruct.put("device_family","android");
  contentStruct.put("device_name",deviceName);
  contentStruct.put("device_model",Build.MANUFACTURER + " " + Build.MODEL);
  contentStruct.put("app_version",WordPress.versionName);
  contentStruct.put("os_version",android.os.Build.VERSION.RELEASE);
  contentStruct.put("device_uuid",uuid);
  contentStruct.put("production",true);
  contentStruct.put("app_secret_key",NotificationUtils.getAppPushNotificationsName());
  Object[] params={settings.getString(WordPress.WPCOM_USERNAME_PREFERENCE,""),WordPressDB.decryptPassword(settings.getString(WordPress.WPCOM_PASSWORD_PREFERENCE,"")),token,contentStruct};
  XMLRPCClient client=new XMLRPCClient(URI.create(Constants.wpcomXMLRPCURL),"","");
  client.callAsync(new XMLRPCCallback(){
    public void onSuccess(    long id,    Object result){
      Log.v("WORDPRESS","Successfully registered device on WP.com");
      if (loadSettings)       getNotificationSettings(null,ctx);
    }
    public void onFailure(    long id,    XMLRPCException error){
      Log.e("WORDPRESS",error.getMessage());
    }
  }
,"wpcom.mobile_push_register_token",params);
}
