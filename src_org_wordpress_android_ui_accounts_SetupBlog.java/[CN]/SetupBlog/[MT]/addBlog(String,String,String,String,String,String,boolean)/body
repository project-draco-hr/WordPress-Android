{
  Blog blog=null;
  if (!WordPress.wpDB.isBlogInDatabase(Integer.parseInt(blogId),xmlRpcUrl)) {
    blog=new Blog(xmlRpcUrl,username,password);
    blog.setHomeURL(homeUrl);
    blog.setHttpuser(mHttpUsername);
    blog.setHttppassword(mHttpPassword);
    blog.setBlogName(blogName);
    blog.setImagePlacement("");
    blog.setFullSizeImage(false);
    blog.setMaxImageWidth(DEFAULT_IMAGE_SIZE);
    blog.setMaxImageWidthId(0);
    blog.setRunService(false);
    blog.setRemoteBlogId(Integer.parseInt(blogId));
    blog.setDotcomFlag(xmlRpcUrl.contains("wordpress.com"));
    blog.setWpVersion("");
    blog.setAdmin(isAdmin);
    WordPress.wpDB.saveBlog(blog);
  }
 else {
    int localTableBlogId=WordPress.wpDB.getLocalTableBlogIdForRemoteBlogIdAndXmlRpcUrl(Integer.parseInt(blogId),xmlRpcUrl);
    try {
      blog=WordPress.wpDB.getBlogById(localTableBlogId);
      if (!blogName.equals(blog.getBlogName())) {
        blog.setBlogName(blogName);
        WordPress.wpDB.saveBlog(blog);
      }
    }
 catch (    Exception e) {
      AppLog.e(T.NUX,"localTableBlogId: " + localTableBlogId + " not found");
    }
  }
  return blog;
}
