{
  setStyle(STYLE_NORMAL,R.style.Calypso_SiteSettingsTheme);
  getDialog().setTitle(R.string.site_settings_related_posts_title);
  View v=inflater.inflate(R.layout.related_posts_dialog,root,false);
  mShowRelatedPosts=(WPSwitch)v.findViewById(R.id.toggle_related_posts_switch);
  mShowHeader=(CheckBox)v.findViewById(R.id.show_header_checkbox);
  mShowImages=(CheckBox)v.findViewById(R.id.show_images_checkbox);
  mPreviewHeader=(TextView)v.findViewById(R.id.preview_header);
  mRelatedPostsListHeader=(TextView)v.findViewById(R.id.related_posts_list_header);
  mRelatedPostsList=(ListView)v.findViewById(R.id.related_posts_list);
  Bundle args=getArguments();
  if (args != null) {
    mShowRelatedPosts.setChecked(args.getBoolean(SHOW_RELATED_POSTS_KEY));
    mShowHeader.setChecked(args.getBoolean(SHOW_HEADER_KEY));
    mShowImages.setChecked(args.getBoolean(SHOW_IMAGES_KEY));
  }
  RelatedPostsAdapter adapter=new RelatedPostsAdapter(getActivity(),R.layout.related_post);
  adapter.add(new RelatedPostItem("Big iPhone/iPad Update Now Available","in \"Mobile\"",R.drawable.rppreview1));
  adapter.add(new RelatedPostItem("The WordPress for Android App Gets a Big Facelift","in \"Apps\"",R.drawable.rppreview2));
  adapter.add(new RelatedPostItem("Upgrade Focus: VideoPress For Weddings","in \"Upgrade\"",R.drawable.rppreview3));
  mRelatedPostsList.setAdapter(adapter);
  mShowRelatedPosts.setOnCheckedChangeListener(this);
  mShowHeader.setOnCheckedChangeListener(this);
  mShowImages.setOnCheckedChangeListener(this);
  toggleViews(mShowRelatedPosts.isChecked());
  return v;
}
