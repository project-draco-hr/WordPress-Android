{
  if (content == null)   return null;
  SpannableStringBuilder html=(SpannableStringBuilder)Html.fromHtml(content);
  if (content.contains("icon_"))   Emoticons.replaceEmoticonsWithEmoji(html);
  CharSequence source=html;
  int start=0;
  int end=source.length();
  while (start < end && Character.isWhitespace(source.charAt(start))) {
    start++;
  }
  while (end > start && Character.isWhitespace(source.charAt(end - 1))) {
    end--;
  }
  return source.subSequence(start,end);
}
