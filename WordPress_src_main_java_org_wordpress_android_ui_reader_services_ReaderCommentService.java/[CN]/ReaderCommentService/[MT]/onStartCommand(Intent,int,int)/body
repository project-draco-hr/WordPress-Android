{
  if (intent == null) {
    return START_NOT_STICKY;
  }
  EventBus.getDefault().post(new ReaderEvents.UpdateCommentsStarted());
  final long blogId=intent.getLongExtra(ARG_BLOG_ID,0);
  final long postId=intent.getLongExtra(ARG_POST_ID,0);
  final long commentId=intent.getLongExtra(ARG_COMMENT_ID,0);
  boolean requestNextPage=intent.getBooleanExtra(ARG_NEXT_PAGE,false);
  int pageNumber;
  if (requestNextPage) {
    int prevPage=ReaderCommentTable.getLastPageNumberForPost(blogId,postId);
    pageNumber=prevPage + 1;
  }
 else {
    pageNumber=1;
  }
  updateCommentsForPost(blogId,postId,pageNumber,new UpdateResultListener(){
    @Override public void onUpdateResult(    UpdateResult result){
      if (commentId > 0) {
        if (ReaderCommentTable.commentExists(blogId,postId,commentId) || !result.isNewOrChanged()) {
          EventBus.getDefault().post(new ReaderEvents.UpdateCommentsEnded(result));
          stopSelf();
        }
 else {
          int prevPage=ReaderCommentTable.getLastPageNumberForPost(blogId,postId);
          int nextPage=prevPage + 1;
          updateCommentsForPost(blogId,postId,nextPage,this);
        }
      }
 else {
        EventBus.getDefault().post(new ReaderEvents.UpdateCommentsEnded(result));
        stopSelf();
      }
    }
  }
);
  return START_NOT_STICKY;
}
