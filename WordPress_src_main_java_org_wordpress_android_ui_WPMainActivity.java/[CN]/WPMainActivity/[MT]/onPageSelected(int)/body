{
  AppPrefs.setMainTabIndex(position);
  mTabs.setBadge(mPreviousPosition,false);
  mTabs.setBadge(position,true);
  Fragment previousFragment=mTabAdapter.getFragment(mPreviousPosition);
  if (previousFragment instanceof FragmentVisibilityListener) {
    ((FragmentVisibilityListener)previousFragment).onVisibilityChanged(false);
  }
  Fragment thisFragment=mTabAdapter.getFragment(position);
  if (thisFragment instanceof FragmentVisibilityListener) {
    ((FragmentVisibilityListener)thisFragment).onVisibilityChanged(true);
  }
  mPreviousPosition=position;
}
