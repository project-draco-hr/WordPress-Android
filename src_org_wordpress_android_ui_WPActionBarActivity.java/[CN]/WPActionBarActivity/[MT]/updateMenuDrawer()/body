{
  mIsDotComBlog=WordPress.currentBlog != null && WordPress.currentBlog.isDotcomFlag();
  List<Object> items=new ArrayList<Object>();
  Resources resources=getResources();
  items.add(new MenuDrawerItem(resources.getString(R.string.posts),R.drawable.dashboard_icon_posts));
  items.add(new MenuDrawerItem(resources.getString(R.string.pages),R.drawable.dashboard_icon_pages));
  items.add(new MenuDrawerItem(resources.getString(R.string.tab_comments),R.drawable.dashboard_icon_comments));
  items.add(new MenuDrawerItem(resources.getString(R.string.tab_stats),R.drawable.dashboard_icon_stats));
  if (mIsDotComBlog)   items.add(new MenuDrawerItem(resources.getString(R.string.reader),R.drawable.dashboard_icon_subs));
  items.add(new MenuDrawerItem(resources.getString(R.string.quick_photo),R.drawable.dashboard_icon_photo));
  items.add(new MenuDrawerItem(resources.getString(R.string.quick_video),R.drawable.dashboard_icon_video));
  items.add(new MenuDrawerItem(resources.getString(R.string.wp_admin),R.drawable.dashboard_icon_wp));
  items.add(new MenuDrawerItem(resources.getString(R.string.settings),R.drawable.dashboard_icon_settings));
  if ((WPActionBarActivity.this instanceof PostsActivity))   mActivePosition=0;
  if ((WPActionBarActivity.this instanceof PagesActivity))   mActivePosition=1;
 else   if ((WPActionBarActivity.this instanceof CommentsActivity))   mActivePosition=2;
 else   if ((WPActionBarActivity.this instanceof ViewWebStatsActivity))   mActivePosition=3;
 else   if ((WPActionBarActivity.this instanceof ReaderPagerActivity))   mActivePosition=4;
  mListView=new ListView(this);
  mListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
  mListView.setDivider(null);
  mListView.setDividerHeight(0);
  mAdapter=new MenuAdapter(items);
  mListView.setAdapter(mAdapter);
  mListView.setOnItemClickListener(mItemClickListener);
  mListView.setOnScrollListener(new AbsListView.OnScrollListener(){
    @Override public void onScrollStateChanged(    AbsListView view,    int scrollState){
    }
    @Override public void onScroll(    AbsListView view,    int firstVisibleItem,    int visibleItemCount,    int totalItemCount){
      mMenuDrawer.invalidate();
    }
  }
);
  mMenuDrawer.setMenuView(mListView);
}
