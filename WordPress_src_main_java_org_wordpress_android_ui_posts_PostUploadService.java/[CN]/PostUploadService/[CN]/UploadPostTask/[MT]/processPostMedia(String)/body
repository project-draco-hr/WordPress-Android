{
  String imageTagsPattern="<img[^>]+android-uri\\s*=\\s*['\"]([^'\"]+)['\"][^>]*>";
  Pattern pattern=Pattern.compile(imageTagsPattern);
  Matcher matcher=pattern.matcher(postContent);
  List<String> imageTags=new ArrayList<String>();
  while (matcher.find()) {
    imageTags.add(matcher.group());
  }
  for (  String tag : imageTags) {
    Pattern p=Pattern.compile("android-uri=\"([^\"]+)\"");
    Matcher m=p.matcher(tag);
    if (m.find()) {
      String imgPath=m.group(1);
      if (!imgPath.equals("")) {
        MediaFile mediaFile=WordPress.wpDB.getMediaFile(imgPath,mPost);
        if (mediaFile != null) {
          mPostUploadNotifier.updateNotificationMessage(null,mediaFile.isVideo() ? getString(R.string.sending_video) : getString(R.string.sending_image),null);
          String mediaUploadOutput;
          if (mediaFile.isVideo()) {
            mediaUploadOutput=uploadVideo(mediaFile);
          }
 else {
            mediaUploadOutput=uploadImage(mediaFile);
          }
          if (mediaUploadOutput != null) {
            postContent=postContent.replace(tag,mediaUploadOutput);
          }
 else {
            postContent=postContent.replace(tag,"");
            mIsMediaError=true;
          }
        }
      }
    }
  }
  return postContent;
}
