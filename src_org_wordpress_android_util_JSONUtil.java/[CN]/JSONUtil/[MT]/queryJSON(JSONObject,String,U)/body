{
  int nextSeperator=query.indexOf(QUERY_SEPERATOR);
  int nextIndexStart=query.indexOf(QUERY_ARRAY_INDEX_START);
  if (nextSeperator == -1 && nextIndexStart == -1) {
    try {
      if (!source.has(query))       return defaultObject;
      Object result=source.get(query);
      if (result.getClass().isAssignableFrom(defaultObject.getClass())) {
        return (U)result;
      }
 else {
        return defaultObject;
      }
    }
 catch (    JSONException e) {
      Log.e(TAG,String.format("Could not complete query %s",query),e);
      return defaultObject;
    }
catch (    ClassCastException e) {
      Log.e(TAG,String.format("Could not cast object %s",query),e);
      return defaultObject;
    }
  }
  int endQuery;
  if (nextSeperator == -1 || nextIndexStart == -1) {
    endQuery=Math.max(nextSeperator,nextIndexStart);
  }
 else {
    endQuery=Math.min(nextSeperator,nextIndexStart);
  }
  String nextQuery=query.substring(endQuery);
  String key=query.substring(0,endQuery);
  try {
    if (source == null) {
      return defaultObject;
    }
    if (nextQuery.indexOf(QUERY_SEPERATOR) == 0) {
      return queryJSON(source.getJSONObject(key),nextQuery.substring(1),defaultObject);
    }
 else     if (nextQuery.indexOf(QUERY_ARRAY_INDEX_START) == 0) {
      return queryJSON(source.getJSONArray(key),nextQuery,defaultObject);
    }
 else     if (!nextQuery.equals("")) {
      return defaultObject;
    }
    Object result=source.get(key);
    if (result.getClass().isAssignableFrom(defaultObject.getClass())) {
      return (U)result;
    }
 else {
      return defaultObject;
    }
  }
 catch (  java.lang.ClassCastException e) {
    Log.e(TAG,String.format("Could not cast object at %s",query),e);
    return defaultObject;
  }
catch (  JSONException e) {
    Log.e(TAG,String.format("Could not complete query %s",query),e);
    return defaultObject;
  }
}
