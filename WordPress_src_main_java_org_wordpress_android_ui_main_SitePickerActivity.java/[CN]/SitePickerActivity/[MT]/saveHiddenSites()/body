{
  WordPress.wpDB.getDatabase().beginTransaction();
  try {
    WordPress.wpDB.setAllDotComBlogsVisibility(true);
    SiteList hiddenSites=getAdapter().getHiddenSites();
    for (    SiteRecord site : hiddenSites) {
      if (site.localId != mCurrentLocalId) {
        WordPress.wpDB.setDotComBlogsVisibility(site.localId,false);
      }
    }
    WordPress.wpDB.getDatabase().setTransactionSuccessful();
  }
  finally {
    WordPress.wpDB.getDatabase().endTransaction();
  }
}
