{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.add_account);
  mSettingsButton=(Button)findViewById(R.id.settingsButton);
  mSaveButton=(Button)findViewById(R.id.save);
  mSignUpButton=(Button)findViewById(R.id.wordpressdotcom);
  mUrlEdit=(EditText)findViewById(R.id.url);
  mUsernameEdit=(EditText)findViewById(R.id.username);
  mPasswordEdit=(EditText)findViewById(R.id.password);
  ((TextView)findViewById(R.id.l_section1)).setText(getResources().getString(R.string.account_details).toUpperCase());
  mSystemService=(ConnectivityManager)getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    mIsWpcom=extras.getBoolean("wpcom",false);
    mAuthOnly=extras.getBoolean("auth-only",false);
    String username=extras.getString("username");
    if (username != null) {
      mUsernameEdit.setText(username);
    }
  }
  if (mIsWpcom) {
    ((EditText)findViewById(R.id.url)).setVisibility(View.GONE);
  }
 else {
    ImageView logo=(ImageView)findViewById(R.id.wpcomLogo);
    logo.setImageDrawable(getResources().getDrawable(R.drawable.wplogo));
  }
  if (mIsWpcom) {
    mSettingsButton.setVisibility(View.GONE);
    if (!mAuthOnly && WordPress.hasValidWPComCredentials(this)) {
      setupBlogs();
    }
  }
 else {
    if (mAuthOnly) {
      Blog currentBlog=WordPress.getCurrentBlog();
      if (currentBlog != null) {
        mUrlEdit.setText(currentBlog.getHomeURL());
        mUsernameEdit.requestFocus();
      }
    }
    mSettingsButton.setOnClickListener(this);
  }
  mSaveButton.setOnClickListener(this);
  mSignUpButton.setOnClickListener(this);
}
