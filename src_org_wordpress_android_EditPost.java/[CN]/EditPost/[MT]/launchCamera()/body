{
  String state=android.os.Environment.getExternalStorageState();
  if (!state.equals(android.os.Environment.MEDIA_MOUNTED)) {
    AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(EditPost.this);
    dialogBuilder.setTitle(getResources().getText(R.string.sdcard_title));
    dialogBuilder.setMessage(getResources().getText(R.string.sdcard_message));
    dialogBuilder.setPositiveButton("OK",new DialogInterface.OnClickListener(){
      public void onClick(      DialogInterface dialog,      int whichButton){
      }
    }
);
    dialogBuilder.setCancelable(true);
    dialogBuilder.create().show();
  }
 else {
    SD_CARD_TEMP_DIR=Environment.getExternalStorageDirectory() + File.separator + "wordpress"+ File.separator+ "wp-"+ System.currentTimeMillis()+ ".jpg";
    Intent takePictureFromCameraIntent=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    takePictureFromCameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT,Uri.fromFile(new File(SD_CARD_TEMP_DIR)));
    File directory=new File(SD_CARD_TEMP_DIR).getParentFile();
    if (!directory.exists() && !directory.mkdirs()) {
      try {
        throw new IOException("Path to file could not be created.");
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
    startActivityForResult(takePictureFromCameraIntent,4);
  }
}
