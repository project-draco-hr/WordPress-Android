{
  SharedPreferences preferences=PreferenceManager.getDefaultSharedPreferences(WordPress.getContext());
  int sessionCount=preferences.getInt(SESSION_COUNT,0);
  boolean connected=WordPress.hasDotComToken(WordPress.getContext());
  boolean jetpackUser=WordPress.wpDB.hasAnyJetpackBlogs();
  int numBlogs=WordPress.wpDB.getVisibleAccounts().size();
  try {
    JSONObject properties=new JSONObject();
    properties.put(MIXPANEL_PLATFORM,"Android");
    properties.put(MIXPANEL_SESSION_COUNT,sessionCount);
    properties.put(DOTCOM_USER,connected);
    properties.put(JETPACK_USER,jetpackUser);
    properties.put(MIXPANEL_NUMBER_OF_BLOGS,numBlogs);
    properties.put(VERSION_CODE,PackageUtils.getVersionCode(WordPress.getContext()));
    mMixpanel.registerSuperProperties(properties);
  }
 catch (  JSONException e) {
    AppLog.e(AppLog.T.UTILS,e);
  }
  if (connected) {
    String username=preferences.getString(WordPress.WPCOM_USERNAME_PREFERENCE,null);
    mMixpanel.identify(username);
    try {
      mMixpanel.getPeople().identify(username);
      JSONObject jsonObj=new JSONObject();
      jsonObj.put("$username",username);
      jsonObj.put("$first_name",username);
      mMixpanel.getPeople().set(jsonObj);
    }
 catch (    JSONException e) {
      AppLog.e(AppLog.T.UTILS,e);
    }
catch (    OutOfMemoryError outOfMemoryError) {
    }
    retrieveAndRegisterEmailAddressIfApplicable();
  }
}
