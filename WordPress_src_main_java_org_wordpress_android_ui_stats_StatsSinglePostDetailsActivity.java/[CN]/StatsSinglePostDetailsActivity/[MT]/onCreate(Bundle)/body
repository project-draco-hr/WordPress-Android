{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.stats_activity_single_post_details);
  if (savedInstanceState == null) {
    AnalyticsTracker.track(AnalyticsTracker.Stat.STATS_SINGLE_POST_ACCESSED);
  }
  ActionBar actionBar=getSupportActionBar();
  if (actionBar != null) {
    actionBar.setDisplayHomeAsUpEnabled(true);
  }
  mSwipeToRefreshHelper=new SwipeToRefreshHelper(this,(SwipeRefreshLayout)findViewById(R.id.ptr_layout),new SwipeToRefreshHelper.RefreshListener(){
    @Override public void onRefreshStarted(){
      if (!NetworkUtils.checkConnection(getBaseContext())) {
        mSwipeToRefreshHelper.setRefreshing(false);
        return;
      }
      refreshStats();
    }
  }
);
  TextView mStatsForLabel=(TextView)findViewById(R.id.stats_summary_title);
  mGraphContainer=(LinearLayout)findViewById(R.id.stats_bar_chart_fragment_container);
  mStatsViewsLabel=(TextView)findViewById(R.id.stats_views_label);
  mStatsViewsTotals=(TextView)findViewById(R.id.stats_views_totals);
  mMonthsAndYearsList=(LinearLayout)findViewById(R.id.stats_months_years_list_linearlayout);
  mAveragesList=(LinearLayout)findViewById(R.id.stats_averages_list_linearlayout);
  mRecentWeeksList=(LinearLayout)findViewById(R.id.stats_recent_weeks_list_linearlayout);
  if (savedInstanceState != null) {
    mRemotePostItem=(PostModel)savedInstanceState.getSerializable(ARG_REMOTE_POST_OBJECT);
    mRestResponseParsed=(PostViewsModel)savedInstanceState.getSerializable(ARG_REST_RESPONSE);
    mSelectedBarGraphIndex=savedInstanceState.getInt(ARG_SELECTED_GRAPH_BAR,-1);
  }
 else   if (getIntent() != null) {
    Bundle extras=getIntent().getExtras();
    mRemotePostItem=(PostModel)extras.getSerializable(ARG_REMOTE_POST_OBJECT);
    mRestResponseParsed=(PostViewsModel)extras.getSerializable(ARG_REST_RESPONSE);
    mSelectedBarGraphIndex=extras.getInt(ARG_SELECTED_GRAPH_BAR,-1);
  }
  mStatsForLabel.setText(mRemotePostItem.getTitle());
  mStatsForLabel.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      final Context ctx=v.getContext();
      StatsUtils.openPostInReaderOrInAppWebview(ctx,mRemotePostItem);
    }
  }
);
  setTitle(R.string.stats);
  mYearsIdToExpandedMap=new SparseBooleanArray();
  mAveragesIdToExpandedMap=new SparseBooleanArray();
  mRecentWeeksIdToExpandedMap=new SparseBooleanArray();
}
