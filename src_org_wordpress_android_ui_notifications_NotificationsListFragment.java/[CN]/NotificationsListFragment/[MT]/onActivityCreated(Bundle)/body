{
  super.onActivityCreated(bundle);
  mProgressFooterView=View.inflate(getActivity(),R.layout.list_footer_progress,null);
  mProgressFooterView.setVisibility(View.GONE);
  ListView listView=getListView();
  listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
  listView.setOnScrollListener(new ListScrollListener());
  listView.setDivider(getResources().getDrawable(R.drawable.list_divider));
  listView.setDividerHeight(1);
  listView.addFooterView(mProgressFooterView,null,false);
  setListAdapter(getNotesAdapter());
  TextView textview=(TextView)listView.getEmptyView();
  if (textview != null) {
    textview.setText(getText(R.string.notifications_empty_list));
  }
  mPullToRefreshHelper=new PullToRefreshHelper(getActivity(),(PullToRefreshLayout)getActivity().findViewById(R.id.ptr_layout),new RefreshListener(){
    @Override public void onRefreshStarted(    View view){
      if (getActivity() == null || !NetworkUtils.checkConnection(getActivity())) {
        mPullToRefreshHelper.setRefreshing(false);
        return;
      }
      if (getActivity() instanceof NotificationsActivity) {
        ((NotificationsActivity)getActivity()).refreshNotes();
      }
    }
  }
,TextView.class);
}
