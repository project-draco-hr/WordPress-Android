{
  List<Map<String,Object>> blogs;
  String[] extraFields={"isHidden","dotcomFlag"};
  if (mIsInSearchMode) {
    blogs=WordPress.wpDB.getBlogsBy(null,extraFields);
  }
 else {
    blogs=getBlogsForCurrentView(extraFields);
  }
  SiteList sites=new SiteList(blogs);
  final long primaryBlogId=AccountHelper.getDefaultAccount().getPrimaryBlogId();
  Collections.sort(sites,new Comparator<SiteRecord>(){
    public int compare(    SiteRecord site1,    SiteRecord site2){
      if (primaryBlogId > 0) {
        if (site1.blogId == primaryBlogId) {
          return -1;
        }
 else         if (site2.blogId == primaryBlogId) {
          return 1;
        }
      }
      return site1.getBlogNameOrHostName().compareToIgnoreCase(site2.getBlogNameOrHostName());
    }
  }
);
  if (mSites == null || !mSites.isSameList(sites)) {
    mAllSites=(SiteList)sites.clone();
    mSites=filteredSitesByTextIfInSearchMode(sites);
  }
  return null;
}
