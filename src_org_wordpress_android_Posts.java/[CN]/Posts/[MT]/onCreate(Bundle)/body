{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.posts);
  FragmentManager fm=getSupportFragmentManager();
  postList=(ViewPosts)fm.findFragmentById(R.id.postList);
  postList.setListShown(true);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    isPage=extras.getBoolean("viewPages");
    String errorMessage=extras.getString("errorMessage");
    if (errorMessage != null) {
      AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(Posts.this);
      dialogBuilder.setTitle(getResources().getText(R.string.error));
      dialogBuilder.setMessage(errorMessage);
      dialogBuilder.setPositiveButton("OK",new DialogInterface.OnClickListener(){
        public void onClick(        DialogInterface dialog,        int whichButton){
        }
      }
);
      dialogBuilder.setCancelable(true);
      if (!isFinishing()) {
        dialogBuilder.create().show();
      }
    }
  }
  WordPress.currentPost=null;
  titleBar=(WPTitleBar)findViewById(R.id.postsActionBar);
  titleBar.refreshButton.setOnClickListener(new ImageButton.OnClickListener(){
    public void onClick(    View v){
      checkForLocalChanges(true);
    }
  }
);
  titleBar.setOnBlogChangedListener(new OnBlogChangedListener(){
    @Override public void OnBlogChanged(){
      popPostDetail();
      attemptToSelectPost();
      postList.loadPosts(false);
    }
  }
);
  WordPress.setOnPostUploadedListener(new WordPress.OnPostUploadedListener(){
    @Override public void OnPostUploaded(){
      if (isFinishing())       return;
      checkForLocalChanges(false);
    }
  }
);
  attemptToSelectPost();
}
