{
  int itemId=item.getItemId();
  if (itemId == android.R.id.home) {
    Fragment fragment=getFragmentManager().findFragmentByTag(ImageSettingsDialogFragment.IMAGE_SETTINGS_DIALOG_TAG);
    if (fragment != null && fragment.isVisible()) {
      return false;
    }
    if (mViewPager.getCurrentItem() > PAGE_CONTENT) {
      mViewPager.setCurrentItem(PAGE_CONTENT);
      invalidateOptionsMenu();
    }
 else {
      saveAndFinish();
    }
    return true;
  }
  MediaUploadService mediaUploadService=MediaUploadService.getInstance();
  if (mediaUploadService != null && mediaUploadService.hasUploads()) {
    ToastUtils.showToast(this,R.string.editor_toast_uploading_please_wait,Duration.SHORT);
    return false;
  }
  if (itemId == R.id.menu_save_post) {
    updatePostObject(false);
    if (!mPost.isPublishable()) {
      ToastUtils.showToast(this,R.string.error_publish_empty_post,Duration.SHORT);
      return false;
    }
    savePostToDb();
    trackSavePostAnalytics();
    if (!NetworkUtils.isNetworkAvailable(this)) {
      ToastUtils.showToast(this,R.string.error_publish_no_network,Duration.SHORT);
      return false;
    }
    PostUploadService.addPostToUpload(mPost);
    startService(new Intent(this,PostUploadService.class));
    setResult(RESULT_OK);
    finish();
    return true;
  }
 else   if (itemId == R.id.menu_preview_post) {
    mViewPager.setCurrentItem(PAGE_PREVIEW);
  }
 else   if (itemId == R.id.menu_post_settings) {
    InputMethodManager imm=((InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE));
    imm.hideSoftInputFromWindow(getWindow().getDecorView().getWindowToken(),0);
    mViewPager.setCurrentItem(PAGE_SETTINGS);
  }
  return false;
}
