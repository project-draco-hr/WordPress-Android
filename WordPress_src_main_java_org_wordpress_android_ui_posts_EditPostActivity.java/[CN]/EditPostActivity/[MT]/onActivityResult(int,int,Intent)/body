{
  super.onActivityResult(requestCode,resultCode,data);
  if (data != null || ((requestCode == MediaUtils.RequestCode.ACTIVITY_REQUEST_CODE_TAKE_PHOTO || requestCode == MediaUtils.RequestCode.ACTIVITY_REQUEST_CODE_TAKE_VIDEO))) {
    Bundle extras;
switch (requestCode) {
case MediaGalleryActivity.REQUEST_CODE:
      if (resultCode == Activity.RESULT_OK) {
      }
    break;
case MediaGalleryPickerActivity.REQUEST_CODE:
  AnalyticsTracker.track(Stat.EDITOR_ADDED_PHOTO_VIA_WP_MEDIA_LIBRARY);
if (resultCode == Activity.RESULT_OK) {
  handleMediaGalleryPickerResult(data);
}
break;
case MediaUtils.RequestCode.ACTIVITY_REQUEST_CODE_PICTURE_LIBRARY:
Uri imageUri=data.getData();
fetchMedia(imageUri);
AnalyticsTracker.track(Stat.EDITOR_ADDED_PHOTO_VIA_LOCAL_LIBRARY);
break;
case MediaUtils.RequestCode.ACTIVITY_REQUEST_CODE_TAKE_PHOTO:
if (resultCode == Activity.RESULT_OK) {
try {
File f=new File(mMediaCapturePath);
Uri capturedImageUri=Uri.fromFile(f);
if (!addMedia(capturedImageUri)) {
ToastUtils.showToast(this,R.string.gallery_error,Duration.SHORT);
}
this.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,Uri.parse("file://" + Environment.getExternalStorageDirectory())));
AnalyticsTracker.track(Stat.EDITOR_ADDED_PHOTO_VIA_LOCAL_LIBRARY);
}
 catch (RuntimeException e) {
AppLog.e(T.POSTS,e);
}
catch (OutOfMemoryError e) {
AppLog.e(T.POSTS,e);
}
}
 else if (TextUtils.isEmpty(mEditorFragment.getContent())) {
WordPress.wpDB.deletePost(getPost());
finish();
}
break;
case MediaUtils.RequestCode.ACTIVITY_REQUEST_CODE_VIDEO_LIBRARY:
Uri videoUri=data.getData();
fetchMedia(videoUri);
break;
case MediaUtils.RequestCode.ACTIVITY_REQUEST_CODE_TAKE_VIDEO:
if (resultCode == Activity.RESULT_OK) {
Uri capturedVideoUri=MediaUtils.getLastRecordedVideoUri(this);
if (!addMedia(capturedVideoUri)) {
ToastUtils.showToast(this,R.string.gallery_error,Duration.SHORT);
}
}
 else if (TextUtils.isEmpty(mEditorFragment.getContent())) {
WordPress.wpDB.deletePost(getPost());
finish();
}
break;
case ACTIVITY_REQUEST_CODE_CREATE_LINK:
extras=data.getExtras();
if (extras == null) {
return;
}
String linkURL=extras.getString("linkURL");
String linkText=extras.getString("linkText");
mEditorFragment.createLinkFromSelection(linkURL,linkText);
break;
}
}
}
