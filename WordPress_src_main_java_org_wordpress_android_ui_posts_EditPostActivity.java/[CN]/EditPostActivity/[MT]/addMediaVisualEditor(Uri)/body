{
  String path="";
  if (imageUri.toString().contains("content:")) {
    String[] projection=new String[]{MediaStore.Images.Media.DATA};
    Cursor cur=getContentResolver().query(imageUri,projection,null,null,null);
    if (cur != null && cur.moveToFirst()) {
      int dataColumn=cur.getColumnIndex(MediaStore.Images.Media.DATA);
      path=cur.getString(dataColumn);
      cur.close();
    }
  }
 else {
    path=imageUri.toString().replace("file://","");
  }
  if (path == null) {
    ToastUtils.showToast(this,R.string.file_not_found,Duration.SHORT);
    return false;
  }
  Blog blog=WordPress.getCurrentBlog();
  if (!blog.getMaxImageWidth().equals("Original Size")) {
    path=ImageUtils.createResizedImageWithMaxWidth(this,path,Integer.parseInt(blog.getMaxImageWidth()));
  }
  MediaFile mediaFile=queueFileForUpload(path,new ArrayList<String>());
  if (mediaFile != null) {
    mEditorFragment.appendMediaFile(mediaFile,path,WordPress.imageLoader);
  }
  return true;
}
