{
  AppWidgetManager appWidgetManager=AppWidgetManager.getInstance(context);
  AppLog.d(AppLog.T.STATS,"updateWidgets called");
  Blog primaryBlog=checkLoggedAndPrimaryBlog(context,appWidgetManager);
  if (primaryBlog == null) {
    return;
  }
  if (Integer.parseInt(data.getBlogID()) != primaryBlog.getRemoteBlogId()) {
    AppLog.w(AppLog.T.STATS,"Widget received stats data that doesn't belong to the primary blog!!!");
    return;
  }
  try {
    String currentDate=StatsUtils.getCurrentDateTZ(primaryBlog.getLocalTableBlogId());
    JSONObject newData=new JSONObject();
    newData.put("blog_id",data.getBlogID());
    newData.put("date",currentDate);
    newData.put("views",data.getViews());
    newData.put("visitors",data.getVisitors());
    newData.put("comments",data.getComments());
    newData.put("likes",data.getLikes());
    AppPrefs.setStatsWidgetData(newData.toString());
    showStatsData(context,appWidgetManager,primaryBlog,newData);
  }
 catch (  JSONException e) {
    AppLog.e(AppLog.T.STATS,e);
  }
}
