{
  paint.setAntiAlias(true);
  paint.setStrokeWidth(0);
  float border=GraphViewConfig.BORDER;
  float horstart=0;
  float height=getHeight();
  float width=getWidth() - 1;
  double maxY=getMaxY();
  double minY=getMinY();
  double maxX=getMaxX(false);
  double minX=getMinX(false);
  double diffX=maxX - minX;
  if (textHeight == null || textWidth == null) {
    paint.setTextSize(getGraphViewStyle().getTextSize());
    double testX=((getMaxX(true) - getMinX(true)) * 0.783) + getMinX(true);
    String testLabel=formatLabel(testX,true);
    paint.getTextBounds(testLabel,0,testLabel.length(),textBounds);
    textHeight=(textBounds.height());
    textWidth=(textBounds.width());
  }
  border+=textHeight;
  float graphheight=height - (2 * border);
  graphwidth=width;
  if (horlabels == null) {
    horlabels=generateHorlabels(graphwidth);
  }
  if (verlabels == null) {
    verlabels=generateVerlabels(graphheight);
  }
  paint.setTextAlign(Align.LEFT);
  int vers=verlabels.length - 1;
  for (int i=0; i < verlabels.length; i++) {
    paint.setColor(graphViewStyle.getGridColor());
    float y=((graphheight / vers) * i) + border;
    canvas.drawLine(horstart,y,width,y,paint);
  }
  int hors=horlabels.length - 1;
  for (int i=0; i < horlabels.length; i++) {
    paint.setColor(graphViewStyle.getGridColor());
    float x=((graphwidth / hors) * i) + horstart;
    canvas.drawLine(x,height - border,x,border,paint);
    paint.setTextAlign(Align.CENTER);
    if (i == horlabels.length - 1)     paint.setTextAlign(Align.RIGHT);
    if (i == 0)     paint.setTextAlign(Align.LEFT);
    paint.setColor(graphViewStyle.getHorizontalLabelsColor());
    canvas.drawText(horlabels[i],x,height - 4,paint);
  }
  paint.setTextAlign(Align.CENTER);
  canvas.drawText(title,(graphwidth / 2) + horstart,border - 4,paint);
  if (maxY == minY) {
    if (maxY == 0) {
      maxY=1.0d;
      minY=0.0d;
    }
 else {
      maxY=maxY * 1.05d;
      minY=minY * 0.95d;
    }
  }
  double diffY=maxY - minY;
  paint.setStrokeCap(Paint.Cap.ROUND);
  for (int i=0; i < graphSeries.size(); i++) {
    drawSeries(canvas,_values(i),graphwidth,graphheight,border,minX,minY,diffX,diffY,horstart,graphSeries.get(i).style);
  }
  if (showLegend)   drawLegend(canvas,height,width);
}
