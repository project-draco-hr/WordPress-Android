{
  paint.setStrokeWidth(0);
  int padding=(int)dpToPx(8);
  if (labelTextHeight == null || verLabelTextWidth == null) {
    paint.setTextSize(getGraphViewStyle().getTextSize());
    double testY=((getMaxY() - getMinY()) * 0.783) + getMinY();
    String testLabel=formatLabel(testY,false);
    paint.getTextBounds(testLabel,0,testLabel.length(),textBounds);
    labelTextHeight=(textBounds.height());
    verLabelTextWidth=(textBounds.width()) + padding;
  }
  if (getGraphViewStyle().getVerticalLabelsWidth() == 0 && getLayoutParams().width != verLabelTextWidth + GraphViewConfig.BORDER) {
    setLayoutParams(new LayoutParams((int)(verLabelTextWidth + GraphViewConfig.BORDER),LayoutParams.FILL_PARENT));
  }
 else   if (getGraphViewStyle().getVerticalLabelsWidth() != 0 && getGraphViewStyle().getVerticalLabelsWidth() != getLayoutParams().width) {
    setLayoutParams(new LayoutParams(getGraphViewStyle().getVerticalLabelsWidth(),LayoutParams.FILL_PARENT));
  }
  float border=GraphViewConfig.BORDER;
  border+=labelTextHeight;
  float height=getHeight();
  float graphheight=height - (2 * border);
  if (verlabels == null) {
    verlabels=generateVerlabels(graphheight);
  }
  paint.setTextAlign(Align.RIGHT);
  int vers=verlabels.length - 1;
  for (int i=0; i < verlabels.length; i++) {
    float y=((graphheight / vers) * i) + border;
    paint.setColor(graphViewStyle.getVerticalLabelsColor());
    canvas.drawText(verlabels[i],0,y,paint);
  }
}
