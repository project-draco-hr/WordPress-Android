{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.comments);
  titleBar=(WPTitleBar)findViewById(R.id.commentsActionBar);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    boolean fromNotification=false;
    fromNotification=extras.getBoolean("fromNotification");
    if (fromNotification) {
      WordPress.currentBlog=new Blog(extras.getInt("id"),Comments.this);
      titleBar.refreshBlog();
    }
  }
  FragmentManager fm=getSupportFragmentManager();
  commentList=(ViewComments)fm.findFragmentById(R.id.commentList);
  WordPress.currentComment=null;
  titleBar.refreshButton.setOnClickListener(new ImageButton.OnClickListener(){
    public void onClick(    View v){
      attemptToSelectComment();
      commentList.refreshComments(false,false,false);
    }
  }
);
  titleBar.setOnBlogChangedListener(new OnBlogChangedListener(){
    @Override public void OnBlogChanged(){
      FragmentManager fm=getSupportFragmentManager();
      ViewPostFragment f=(ViewPostFragment)fm.findFragmentById(R.id.commentDetail);
      if (f == null) {
        fm.popBackStack();
      }
      attemptToSelectComment();
      boolean commentsLoaded=commentList.loadComments(false,false);
      if (!commentsLoaded)       commentList.refreshComments(false,false,false);
    }
  }
);
  attemptToSelectComment();
}
