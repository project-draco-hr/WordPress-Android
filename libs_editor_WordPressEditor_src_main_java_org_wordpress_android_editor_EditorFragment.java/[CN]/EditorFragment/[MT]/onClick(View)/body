{
  int id=v.getId();
  if (id == R.id.format_bar_button_html) {
    clearFormatBarButtons();
    updateFormatBarEnabledState(true);
    if (((ToggleButton)v).isChecked()) {
      mSourceViewTitle.setText(getTitle());
      SpannableString spannableContent=new SpannableString(getContent());
      HtmlStyleUtils.styleHtmlForDisplay(spannableContent);
      mSourceViewContent.setText(spannableContent);
      mWebView.setVisibility(View.GONE);
      mSourceView.setVisibility(View.VISIBLE);
      mSourceViewContent.requestFocus();
      mSourceViewContent.setSelection(0);
      InputMethodManager imm=((InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE));
      imm.showSoftInput(mSourceViewContent,InputMethodManager.SHOW_IMPLICIT);
    }
 else {
      mWebView.setVisibility(View.VISIBLE);
      mSourceView.setVisibility(View.GONE);
      mTitle=mSourceViewTitle.getText().toString();
      mContentHtml=mSourceViewContent.getText().toString();
      updateVisualEditorFields();
      mWebView.execJavaScriptFromString("ZSSEditor.getField('zss_field_content').focus();");
    }
  }
 else   if (id == R.id.format_bar_button_media) {
    ((ToggleButton)v).setChecked(false);
  }
 else   if (id == R.id.format_bar_button_link) {
    ((ToggleButton)v).setChecked(false);
  }
 else {
    if (v instanceof ToggleButton) {
      onFormattingButtonClicked((ToggleButton)v);
    }
  }
}
