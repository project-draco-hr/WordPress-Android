{
  if (target == null || duration == null) {
    return;
  }
  long durationMillis=duration.toMillis(target.getContext());
  ObjectAnimator fadeIn=ObjectAnimator.ofFloat(target,View.ALPHA,0.0f,1.0f);
  fadeIn.setDuration(durationMillis);
  fadeIn.setInterpolator(new LinearInterpolator());
  ObjectAnimator fadeOut=ObjectAnimator.ofFloat(target,View.ALPHA,1.0f,0.0f);
  fadeOut.setDuration(durationMillis);
  fadeOut.setInterpolator(new LinearInterpolator());
  fadeOut.setStartDelay(durationMillis);
  AnimatorSet set=new AnimatorSet();
  set.play(fadeOut).after(fadeIn);
  set.addListener(new AnimatorListenerAdapter(){
    @Override public void onAnimationStart(    Animator animation){
      target.setVisibility(View.VISIBLE);
    }
    @Override public void onAnimationEnd(    Animator animation){
      target.setVisibility(View.GONE);
    }
  }
);
  set.start();
}
