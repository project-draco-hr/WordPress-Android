{
  final Blog currentBlog=WordPress.getCurrentBlog();
  final ProgressDialog progressDialog=ProgressDialog.show(getActivity(),"",getString(R.string.checking_purchases),true,false);
  WordPress.getRestClientUtils().getSitePurchases(currentBlog.getDotComBlogId(),new RestRequest.Listener(){
    @Override public void onResponse(    JSONObject response){
      progressDialog.dismiss();
      showPurchasesOrDeleteSiteDialog(response,currentBlog);
    }
  }
,new RestRequest.ErrorListener(){
    @Override public void onErrorResponse(    VolleyError error){
      progressDialog.dismiss();
      ToastUtils.showToast(getActivity(),getString(R.string.purchases_request_error));
      AppLog.e(AppLog.T.API,"Error occurred while requesting purchases for deletion check: " + error.toString());
    }
  }
);
}
