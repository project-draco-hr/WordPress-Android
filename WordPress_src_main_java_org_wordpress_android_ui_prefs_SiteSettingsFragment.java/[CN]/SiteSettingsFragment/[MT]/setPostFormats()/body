{
  if (mSiteSettings.isSameFormatList(mFormatPref.getEntryValues())) {
    mFormatPref.setValue(String.valueOf(mSiteSettings.getDefaultFormat()));
    mFormatPref.setSummary(mSiteSettings.getDefaultPostFormatDisplay());
    return;
  }
  Map<String,String> formats=mSiteSettings.getFormats();
  String[] formatKeys=mSiteSettings.getFormatKeys();
  if (formats == null || formatKeys == null)   return;
  String[] entries=new String[formatKeys.length];
  String[] values=new String[formatKeys.length];
  for (int i=0; i < entries.length; ++i) {
    entries[i]=formats.get(formatKeys[i]);
    values[i]=formatKeys[i];
  }
  mFormatPref.setEntries(entries);
  mFormatPref.setEntryValues(values);
  mFormatPref.setValue(String.valueOf(mSiteSettings.getDefaultFormat()));
  mFormatPref.setSummary(mSiteSettings.getDefaultPostFormatDisplay());
}
