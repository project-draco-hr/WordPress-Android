{
  mTitlePreference=(EditTextPreference)findPreference(getString(R.string.pref_key_site_title));
  mTaglinePreference=(EditTextPreference)findPreference(getString(R.string.pref_key_site_tagline));
  mAddressPreference=(EditTextPreference)findPreference(getString(R.string.pref_key_site_address));
  mPrivacyPreference=(DetailListPreference)findPreference(getString(R.string.pref_key_site_visibility));
  mLanguagePreference=(DetailListPreference)findPreference(getString(R.string.pref_key_site_language));
  mUsernamePreference=(EditTextPreference)findPreference(getString(R.string.pref_key_site_username));
  mPasswordPreference=(EditTextPreference)findPreference(getString(R.string.pref_key_site_password));
  mLocationPreference=(SwitchPreference)findPreference(getString(R.string.pref_key_site_location));
  mCategoryPreference=(DetailListPreference)findPreference(getString(R.string.pref_key_site_category));
  mFormatPreference=(DetailListPreference)findPreference(getString(R.string.pref_key_site_format));
  changeEditTextPreferenceValue(mTitlePreference,mSiteSettings.getTitle());
  changeEditTextPreferenceValue(mTaglinePreference,mSiteSettings.getTagline());
  changeEditTextPreferenceValue(mAddressPreference,mSiteSettings.getAddress());
  mLocationPreference.setChecked(siteSettingsPreferences().getBoolean(SiteSettings.LOCATION_PREF_KEY,false));
  loadCategories();
  mTitlePreference.setOnPreferenceChangeListener(this);
  mTaglinePreference.setOnPreferenceChangeListener(this);
  mAddressPreference.setOnPreferenceChangeListener(this);
  mLocationPreference.setOnPreferenceChangeListener(this);
  mCategoryPreference.setOnPreferenceChangeListener(this);
  mFormatPreference.setOnPreferenceChangeListener(this);
  if (mBlog.isDotcomFlag()) {
    PreferenceScreen screen=(PreferenceScreen)findPreference(getString(R.string.pref_key_site_screen));
    if (screen != null) {
      screen.removePreference(findPreference(getString(R.string.pref_key_site_account)));
    }
    changeLanguageValue(mSiteSettings.getLanguageCode());
    changePrivacyValue(mSiteSettings.getPrivacy());
    mPrivacyPreference.setOnPreferenceChangeListener(this);
    mLanguagePreference.setOnPreferenceChangeListener(this);
  }
 else {
    removePreference(R.string.pref_key_site_general,mPrivacyPreference);
    removePreference(R.string.pref_key_site_general,mLanguagePreference);
    changeEditTextPreferenceValue(mUsernamePreference,mSiteSettings.getUsername());
    changeEditTextPreferenceValue(mPasswordPreference,mSiteSettings.getPassword());
    mUsernamePreference.setOnPreferenceChangeListener(this);
    mPasswordPreference.setOnPreferenceChangeListener(this);
  }
}
