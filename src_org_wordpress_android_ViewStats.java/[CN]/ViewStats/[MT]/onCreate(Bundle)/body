{
  super.onCreate(savedInstanceState);
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  setContentView(R.layout.view_stats);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    id=extras.getInt("id");
    blog=new Blog(id,this);
    accountName=extras.getString("accountName");
  }
  initStats();
  Button saveStatsLogin=(Button)findViewById(R.id.saveDotcom);
  saveStatsLogin.setOnClickListener(new Button.OnClickListener(){
    public void onClick(    View v){
      EditText dotcomUsername=(EditText)findViewById(R.id.dotcomUsername);
      EditText dotcomPassword=(EditText)findViewById(R.id.dotcomPassword);
      String dcUsername=dotcomUsername.getText().toString();
      String dcPassword=dotcomPassword.getText().toString();
      if (dcUsername.equals("") || dcPassword.equals("")) {
        AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(ViewStats.this);
        dialogBuilder.setTitle(getResources().getText(R.string.required_fields));
        dialogBuilder.setMessage(getResources().getText(R.string.username_password_required));
        dialogBuilder.setPositiveButton("OK",new DialogInterface.OnClickListener(){
          public void onClick(          DialogInterface dialog,          int whichButton){
          }
        }
);
        dialogBuilder.setCancelable(true);
        if (!isFinishing()) {
          dialogBuilder.create().show();
        }
      }
 else {
        WordPressDB settingsDB=new WordPressDB(ViewStats.this);
        settingsDB.saveStatsLogin(ViewStats.this,id,dcUsername,dcPassword);
        showOrHideLoginForm();
        initStats();
      }
    }
  }
);
  Button go=(Button)findViewById(R.id.go);
  go.setOnClickListener(new Button.OnClickListener(){
    public void onClick(    View v){
      Spinner reportType=(Spinner)findViewById(R.id.reportType);
      Spinner reportInterval=(Spinner)findViewById(R.id.reportInterval);
      final String type=parseType(reportType.getSelectedItemPosition());
      final int interval=parseInterval(reportInterval.getSelectedItemPosition());
      WordPressDB settingsDB=new WordPressDB(ViewStats.this);
      Vector<?> apiData=settingsDB.loadAPIData(ViewStats.this,id);
      final String apiKey=apiData.get(0).toString();
      final String apiBlogID=apiData.get(1).toString();
      showDialog(ID_DIALOG_GET_STATS);
      Thread action=new Thread(){
        public void run(){
          getStatsData(apiKey,apiBlogID,type,interval);
        }
      }
;
      action.start();
    }
  }
);
  TextView wpcomHelp=(TextView)findViewById(R.id.wpcomHelp);
  wpcomHelp.setOnClickListener(new TextView.OnClickListener(){
    public void onClick(    View v){
      Intent intent1=new Intent(Intent.ACTION_VIEW);
      intent1.setData(Uri.parse("http://en.support.wordpress.com/stats/"));
      startActivity(intent1);
    }
  }
);
  Spinner reportInterval=(Spinner)findViewById(R.id.reportInterval);
  reportInterval.setSelection(1);
}
