{
  client=new XMLRPCClient(WordPress.currentBlog.getUrl(),WordPress.currentBlog.getHttpuser(),WordPress.currentBlog.getHttppassword());
  Map<String,Object> replyHash=new HashMap<String,Object>();
  replyHash.put("comment_parent",commentID);
  replyHash.put("content",comment);
  replyHash.put("author","");
  replyHash.put("author_url","");
  replyHash.put("author_email","");
  Object[] params={WordPress.currentBlog.getBlogId(),WordPress.currentBlog.getUsername(),WordPress.currentBlog.getPassword(),Integer.valueOf(postID),replyHash};
  try {
    int newCommentID=(Integer)client.call("wp.newComment",params);
    if (newCommentID >= 0) {
      WordPress.wpDB.updateLatestCommentID(WordPress.currentBlog.getId(),newCommentID);
    }
    dismissDialog(ID_DIALOG_REPLYING);
    Thread action=new Thread(){
      public void run(){
        Toast.makeText(CommentsActivity.this,getResources().getText(R.string.reply_added),Toast.LENGTH_SHORT).show();
      }
    }
;
    runOnUiThread(action);
    Thread action2=new Thread(){
      public void run(){
        pd=new ProgressDialog(CommentsActivity.this);
        commentList.refreshComments(false,true,false);
      }
    }
;
    runOnUiThread(action2);
  }
 catch (  final XMLRPCException e) {
    dismissDialog(ID_DIALOG_REPLYING);
    Thread action3=new Thread(){
      public void run(){
        Toast.makeText(CommentsActivity.this,getResources().getText(R.string.connection_error),Toast.LENGTH_SHORT).show();
        Intent i=new Intent(CommentsActivity.this,ReplyToCommentActivity.class);
        i.putExtra("commentID",commentID);
        i.putExtra("postID",WordPress.currentComment.postID);
        i.putExtra("comment",comment);
        startActivityForResult(i,0);
      }
    }
;
    runOnUiThread(action3);
  }
}
