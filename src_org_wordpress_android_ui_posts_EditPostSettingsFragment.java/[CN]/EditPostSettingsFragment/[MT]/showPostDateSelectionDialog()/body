{
  final DatePicker datePicker=new DatePicker(getActivity());
  datePicker.init(mYear,mMonth,mDay,null);
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    datePicker.setCalendarViewShown(false);
  }
  new AlertDialog.Builder(getActivity()).setTitle(R.string.select_date).setPositiveButton(android.R.string.ok,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      mYear=datePicker.getYear();
      mMonth=datePicker.getMonth();
      mDay=datePicker.getDayOfMonth();
      showPostTimeSelectionDialog();
    }
  }
).setNegativeButton(getResources().getText(R.string.immediately),new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialogInterface,    int i){
      mPubDateText.setText(getResources().getText(R.string.immediately));
      Calendar c=Calendar.getInstance();
      mYear=c.get(Calendar.YEAR);
      mMonth=c.get(Calendar.MONTH);
      mDay=c.get(Calendar.DAY_OF_MONTH);
      mHour=c.get(Calendar.HOUR_OF_DAY);
      mMinute=c.get(Calendar.MINUTE);
      Date d=new Date(mYear - 1900,mMonth,mDay,mHour,mMinute);
      long timestamp=d.getTime();
      mCustomPubDate=timestamp;
      mIsCustomPubDate=true;
    }
  }
).setNeutralButton(android.R.string.cancel,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
    }
  }
).setView(datePicker).show();
}
