{
  List<PostsListPost> posts=new ArrayList<PostsListPost>();
  Cursor c;
  c=db.query(POSTS_TABLE,new String[]{"id","blogID","title","date_created_gmt","post_status","localDraft","isLocalChange"},"blogID=? AND isPage=? AND NOT (localDraft=1 AND uploaded=1)",new String[]{String.valueOf(blogId),(loadPages) ? "1" : "0"},null,null,"localDraft DESC, date_created_gmt DESC");
  int numRows=c.getCount();
  c.moveToFirst();
  Date d=new Date();
  for (int i=0; i < numRows; ++i) {
    long postDate=c.getLong(c.getColumnIndex("date_created_gmt"));
    String postStatus=StringUtils.notNullStr(c.getString(c.getColumnIndex("post_status")));
    if (postDate > d.getTime() && postStatus.equals("publish")) {
      postStatus="scheduled";
    }
    String postTitle=StringUtils.unescapeHTML(c.getString(c.getColumnIndex("title")));
    PostsListPost post=new PostsListPost(c.getInt(c.getColumnIndex("id")),c.getInt(c.getColumnIndex("blogID")),postTitle,postDate,postStatus,SqlUtils.sqlToBool(c.getInt(c.getColumnIndex("localDraft"))),SqlUtils.sqlToBool(c.getInt(c.getColumnIndex("isLocalChange"))));
    posts.add(i,post);
    c.moveToNext();
  }
  c.close();
  return posts;
}
