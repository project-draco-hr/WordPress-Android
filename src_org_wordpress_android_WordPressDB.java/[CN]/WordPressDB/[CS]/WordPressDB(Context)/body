{
  db=ctx.openOrCreateDatabase(DATABASE_NAME,0,null);
  db.execSQL(CREATE_TABLE_SETTINGS);
  db.execSQL(CREATE_TABLE_EULA);
  db.execSQL(CREATE_TABLE_POSTS);
  db.execSQL(CREATE_TABLE_COMMENTS);
  db.execSQL(CREATE_TABLE_CATEGORIES);
  db.execSQL(CREATE_TABLE_QUICKPRESS_SHORTCUTS);
  try {
    if (db.getVersion() < 1) {
      db.execSQL(ADD_BLOGID);
      db.execSQL(UPDATE_BLOGID);
      db.execSQL(ADD_SOUND_OPTION);
      db.execSQL(ADD_VIBRATE_OPTION);
      db.execSQL(ADD_LIGHT_OPTION);
      db.execSQL(ADD_LOCATION_FLAG);
      db.execSQL(ADD_TAGLINE);
      db.execSQL(ADD_TAGLINE_FLAG);
      db.execSQL(ADD_DOTCOM_USERNAME);
      db.execSQL(ADD_DOTCOM_PASSWORD);
      db.execSQL(ADD_API_KEY);
      db.execSQL(ADD_API_BLOGID);
      db.execSQL(ADD_DOTCOM_FLAG);
      db.execSQL(ADD_WP_VERSION);
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 1) {
      db.execSQL(ADD_BLOGID);
      db.execSQL(UPDATE_BLOGID);
      db.execSQL(ADD_SOUND_OPTION);
      db.execSQL(ADD_VIBRATE_OPTION);
      db.execSQL(ADD_LIGHT_OPTION);
      db.execSQL(ADD_LOCATION_FLAG);
      db.execSQL(ADD_TAGLINE);
      db.execSQL(ADD_TAGLINE_FLAG);
      db.execSQL(ADD_NEW_COMMENT_ID);
      db.execSQL(COPY_COMMENT_IDS);
      db.execSQL(ADD_DOTCOM_USERNAME);
      db.execSQL(ADD_DOTCOM_PASSWORD);
      db.execSQL(ADD_API_KEY);
      db.execSQL(ADD_API_BLOGID);
      db.execSQL(ADD_DOTCOM_FLAG);
      db.execSQL(ADD_WP_VERSION);
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 2) {
      db.execSQL(ADD_SOUND_OPTION);
      db.execSQL(ADD_VIBRATE_OPTION);
      db.execSQL(ADD_LIGHT_OPTION);
      db.execSQL(ADD_LOCATION_FLAG);
      db.execSQL(ADD_TAGLINE);
      db.execSQL(ADD_TAGLINE_FLAG);
      db.execSQL(ADD_NEW_COMMENT_ID);
      db.execSQL(COPY_COMMENT_IDS);
      db.execSQL(ADD_DOTCOM_USERNAME);
      db.execSQL(ADD_DOTCOM_PASSWORD);
      db.execSQL(ADD_API_KEY);
      db.execSQL(ADD_API_BLOGID);
      db.execSQL(ADD_DOTCOM_FLAG);
      db.execSQL(ADD_WP_VERSION);
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 3) {
      db.execSQL(ADD_LOCATION_FLAG);
      db.execSQL(ADD_TAGLINE);
      db.execSQL(ADD_TAGLINE_FLAG);
      db.execSQL(ADD_NEW_COMMENT_ID);
      db.execSQL(COPY_COMMENT_IDS);
      db.execSQL(ADD_DOTCOM_USERNAME);
      db.execSQL(ADD_DOTCOM_PASSWORD);
      db.execSQL(ADD_API_KEY);
      db.execSQL(ADD_API_BLOGID);
      db.execSQL(ADD_DOTCOM_FLAG);
      db.execSQL(ADD_WP_VERSION);
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 4) {
      db.execSQL(ADD_LOCATION_FLAG);
      db.execSQL(ADD_TAGLINE);
      db.execSQL(ADD_TAGLINE_FLAG);
      db.execSQL(ADD_NEW_COMMENT_ID);
      db.execSQL(COPY_COMMENT_IDS);
      db.execSQL(ADD_DOTCOM_USERNAME);
      db.execSQL(ADD_DOTCOM_PASSWORD);
      db.execSQL(ADD_API_KEY);
      db.execSQL(ADD_API_BLOGID);
      db.execSQL(ADD_DOTCOM_FLAG);
      db.execSQL(ADD_WP_VERSION);
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 5) {
      db.execSQL(ADD_TAGLINE);
      db.execSQL(ADD_TAGLINE_FLAG);
      db.execSQL(ADD_NEW_COMMENT_ID);
      db.execSQL(COPY_COMMENT_IDS);
      db.execSQL(ADD_DOTCOM_USERNAME);
      db.execSQL(ADD_DOTCOM_PASSWORD);
      db.execSQL(ADD_API_KEY);
      db.execSQL(ADD_API_BLOGID);
      db.execSQL(ADD_DOTCOM_FLAG);
      db.execSQL(ADD_WP_VERSION);
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 6) {
      db.execSQL(ADD_NEW_COMMENT_ID);
      db.execSQL(COPY_COMMENT_IDS);
      db.execSQL(ADD_DOTCOM_USERNAME);
      db.execSQL(ADD_DOTCOM_PASSWORD);
      db.execSQL(ADD_API_KEY);
      db.execSQL(ADD_API_BLOGID);
      db.execSQL(ADD_DOTCOM_FLAG);
      db.execSQL(ADD_WP_VERSION);
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 7) {
      db.execSQL(ADD_UNIQUE_ID);
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 8) {
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 9) {
      db.execSQL(ADD_HTTPUSER);
      db.execSQL(ADD_HTTPPASSWORD);
      migratePasswords(ctx);
      db.setVersion(DATABASE_VERSION);
    }
 else     if (db.getVersion() == 10) {
      db.delete(POSTS_TABLE,null,null);
      db.execSQL(CREATE_TABLE_POSTS);
      try {
        db=ctx.openOrCreateDatabase(DATABASE_NAME,0,null);
        Cursor c=db.query("localdrafts",new String[]{"blogID","title","content","picturePaths","date","categories","tags","status","password","latitude","longitude"},null,null,null,null,"id desc");
        int numRows=c.getCount();
        c.moveToFirst();
        for (int i=0; i < numRows; ++i) {
          if (c.getString(0) != null) {
            Post post=new Post(c.getString(0),c.getString(1),c.getString(2),c.getString(3),c.getLong(4),c.getString(5),c.getString(6),c.getString(7),c.getString(8),c.getDouble(9),c.getDouble(10),ctx);
            post.setLocalDraft(true);
            post.save();
          }
          c.moveToNext();
        }
        c.close();
        db.delete("localdrafts",null,null);
        db=ctx.openOrCreateDatabase(DATABASE_NAME,0,null);
        c=db.query("localpagedrafts",new String[]{"blogID","title","content","picturePaths","date","status","password"},null,null,null,null,"id desc");
        numRows=c.getCount();
        c.moveToFirst();
        for (int i=0; i < numRows; ++i) {
          if (c.getString(0) != null) {
            Post post=new Post(c.getString(0),c.getString(1),c.getString(2),c.getString(3),c.getLong(4),c.getString(5),c.getString(6),null,null,0,0,ctx);
            post.setLocalDraft(true);
            post.setPage(true);
            post.save();
          }
          c.moveToNext();
        }
        c.close();
        db.delete("localpagedrafts",null,null);
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
      db.setVersion(DATABASE_VERSION);
    }
  }
 catch (  SQLException e) {
    e.printStackTrace();
  }
  db.close();
}
