{
  super.onCreate(icicle);
  getWindow().setFormat(PixelFormat.RGBA_8888);
  getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
  requestWindowFeature(Window.FEATURE_PROGRESS);
  setContentView(R.layout.viewpost);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    id=WordPress.currentBlog.getId();
    postID=extras.getString("postID");
    accountName=extras.getString("accountName");
    isPage=extras.getBoolean("isPage");
    loadReader=extras.getBoolean("loadReader");
  }
  if (loadReader) {
    this.setTitle(getResources().getText(R.string.reader));
    wv=(WebView)findViewById(R.id.webView);
    wv.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    backButton=(ImageButton)findViewById(R.id.browserBack);
    backButton.setVisibility(View.VISIBLE);
    backButton.setOnClickListener(new Button.OnClickListener(){
      public void onClick(      View v){
        wv.goBack();
      }
    }
);
    forwardButton=(ImageButton)findViewById(R.id.browserForward);
    forwardButton.setVisibility(View.VISIBLE);
    forwardButton.setOnClickListener(new Button.OnClickListener(){
      public void onClick(      View v){
        wv.goForward();
      }
    }
);
    refreshButton=(ImageButton)findViewById(R.id.browserRefresh);
    refreshButton.setVisibility(View.VISIBLE);
    refreshButton.setOnClickListener(new Button.OnClickListener(){
      public void onClick(      View v){
        wv.reload();
        new Thread(new Runnable(){
          public void run(){
            try {
              HttpClient httpclient=new DefaultHttpClient();
              HttpProtocolParams.setUserAgent(httpclient.getParams(),"wp-android");
              HttpResponse response=httpclient.execute(new HttpGet("http://wordpress.com/reader/mobile/?template=stats&stats_name=home_page_refresh"));
              InputStream content=response.getEntity().getContent();
            }
 catch (            Exception e) {
            }
          }
        }
).start();
      }
    }
);
    new loadReaderTask().execute(null,null,null,null);
  }
 else {
    RelativeLayout navBar=(RelativeLayout)findViewById(R.id.navBar);
    navBar.setVisibility(View.GONE);
    if (isPage) {
      this.setTitle(EscapeUtils.unescapeHtml(accountName) + " - " + getResources().getText(R.string.preview_page));
    }
 else {
      this.setTitle(EscapeUtils.unescapeHtml(accountName) + " - " + getResources().getText(R.string.preview_post));
    }
    Thread t=new Thread(){
      public void run(){
        loadPostFromPermalink();
      }
    }
;
    t.start();
  }
}
