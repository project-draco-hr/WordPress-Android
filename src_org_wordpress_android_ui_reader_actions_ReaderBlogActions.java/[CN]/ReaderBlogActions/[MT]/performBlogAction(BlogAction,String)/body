{
  if (TextUtils.isEmpty(blogUrl))   return false;
  final boolean isCurrentlyFollowing=ReaderBlogTable.isFollowedBlogUrl(blogUrl);
  final boolean isAskingToFollow=(action == BlogAction.FOLLOW ? true : false);
  if (isCurrentlyFollowing == isAskingToFollow)   return true;
  final String path;
switch (action) {
case FOLLOW:
    ReaderBlogTable.setIsFollowedBlogUrl(blogUrl,true);
  path="/read/following/mine/new?url=" + UrlUtils.urlEncode(blogUrl);
break;
case UNFOLLOW:
ReaderBlogTable.setIsFollowedBlogUrl(blogUrl,false);
path="/read/following/mine/delete?url=" + UrlUtils.urlEncode(blogUrl);
break;
default :
return false;
}
com.wordpress.rest.RestRequest.Listener listener=new RestRequest.Listener(){
@Override public void onResponse(JSONObject jsonObject){
AppLog.d("blog action " + action.name() + " succeeded");
}
}
;
RestRequest.ErrorListener errorListener=new RestRequest.ErrorListener(){
@Override public void onErrorResponse(VolleyError volleyError){
AppLog.w("blog action " + action.name() + " failed");
AppLog.e(volleyError);
ReaderBlogTable.setIsFollowedBlogUrl(blogUrl,isCurrentlyFollowing);
}
}
;
WordPress.restClient.post(path,listener,errorListener);
return true;
}
