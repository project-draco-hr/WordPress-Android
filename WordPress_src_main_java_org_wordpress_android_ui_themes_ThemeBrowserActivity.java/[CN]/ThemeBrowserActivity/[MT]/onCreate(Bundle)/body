{
  super.onCreate(savedInstanceState);
  if (WordPress.wpDB == null) {
    Toast.makeText(this,R.string.fatal_db_error,Toast.LENGTH_LONG).show();
    finish();
    return;
  }
  if (savedInstanceState == null) {
    AnalyticsTracker.track(AnalyticsTracker.Stat.THEMES_ACCESSED_THEMES_BROWSER);
  }
  setContentView(R.layout.theme_browser_activity);
  Toolbar toolbar=(Toolbar)findViewById(R.id.toolbar);
  setSupportActionBar(toolbar);
  ActionBar actionBar=getSupportActionBar();
  actionBar.setElevation(0.0f);
  actionBar.setDisplayShowTitleEnabled(true);
  actionBar.setDisplayHomeAsUpEnabled(true);
  actionBar.setTitle(getString(R.string.themes));
  mThemePagerAdapter=new ThemePagerAdapter(getFragmentManager());
  mViewPager=(WPViewPager)findViewById(R.id.theme_browser_pager);
  mViewPager.setAdapter(mThemePagerAdapter);
  mTabLayout=(SlidingTabLayout)findViewById(R.id.sliding_tabs);
  mTabLayout.setCustomTabView(R.layout.tab_text,R.id.text_tab);
  mTabLayout.setSelectedIndicatorColors(getResources().getColor(R.color.tab_indicator));
  mTabLayout.setDistributeEvenly(true);
  mTabLayout.setViewPager(mViewPager);
  FragmentManager fm=getFragmentManager();
  fm.addOnBackStackChangedListener(mOnBackStackChangedListener);
  setupBaseLayout();
  mPreviewFragment=(ThemePreviewFragment)fm.findFragmentByTag(ThemePreviewFragment.TAG);
  mDetailsFragment=(ThemeDetailsFragment)fm.findFragmentByTag(ThemeDetailsFragment.TAG);
  mSearchFragment=(ThemeSearchFragment)fm.findFragmentByTag(ThemeSearchFragment.TAG);
}
