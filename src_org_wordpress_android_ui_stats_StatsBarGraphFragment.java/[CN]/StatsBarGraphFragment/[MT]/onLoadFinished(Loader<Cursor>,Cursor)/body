{
  if (getActivity() == null)   return;
  if (!cursor.moveToFirst()) {
    Context context=mGraphContainer.getContext();
    if (context != null) {
      LayoutInflater inflater=LayoutInflater.from(context);
      View emptyBarGraphView=inflater.inflate(R.layout.stats_bar_graph_empty,mGraphContainer,false);
      if (emptyBarGraphView != null)       mGraphContainer.addView(emptyBarGraphView);
    }
    return;
  }
  final Handler handler=new Handler();
  new Thread(){
    @Override public void run(){
      final int numPoints=Math.min(getNumOfPoints(),cursor.getCount());
      final String[] horLabels=new String[numPoints];
      GraphView.GraphViewData[] views=new GraphView.GraphViewData[numPoints];
      GraphView.GraphViewData[] visitors=new GraphView.GraphViewData[numPoints];
      StatsBarChartUnit unit=getBarChartUnit();
      for (int i=numPoints - 1; i >= 0; i--) {
        views[i]=new GraphView.GraphViewData(i,getViews(cursor));
        visitors[i]=new GraphView.GraphViewData(i,getVisitors(cursor));
        horLabels[i]=getDateLabel(cursor,unit);
        cursor.moveToNext();
      }
      final GraphViewSeries viewsSeries=new GraphViewSeries(views);
      final GraphViewSeries visitorsSeries=new GraphViewSeries(visitors);
      viewsSeries.getStyle().color=getResources().getColor(R.color.stats_bar_graph_views);
      viewsSeries.getStyle().padding=Utils.dpToPx(1);
      visitorsSeries.getStyle().color=getResources().getColor(R.color.stats_bar_graph_visitors);
      visitorsSeries.getStyle().padding=Utils.dpToPx(3);
      handler.post(new Runnable(){
        public void run(){
          if (getActivity() == null)           return;
          GraphView graphView;
          if (mGraphContainer.getChildCount() >= 1 && mGraphContainer.getChildAt(0) instanceof GraphView) {
            graphView=(GraphView)mGraphContainer.getChildAt(0);
          }
 else {
            mGraphContainer.removeAllViews();
            graphView=new StatsBarGraph(getActivity(),"");
            mGraphContainer.addView(graphView);
          }
          if (graphView != null) {
            graphView.removeAllSeries();
            graphView.addSeries(viewsSeries);
            graphView.addSeries(visitorsSeries);
            graphView.getGraphViewStyle().setNumHorizontalLabels(getNumOfHorizontalLabels(numPoints));
            graphView.setHorizontalLabels(horLabels);
          }
        }
      }
);
    }
  }
.start();
}
