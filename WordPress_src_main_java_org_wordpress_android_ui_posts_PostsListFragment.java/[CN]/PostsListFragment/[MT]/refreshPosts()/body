{
  if (!isAdded())   return;
  Blog currentBlog=WordPress.getCurrentBlog();
  if (currentBlog == null) {
    ToastUtils.showToast(getActivity(),mIsPage ? R.string.error_refresh_pages : R.string.error_refresh_posts,Duration.LONG);
    return;
  }
  boolean hasLocalChanges=WordPress.wpDB.findLocalChanges(currentBlog.getLocalTableBlogId(),mIsPage);
  if (hasLocalChanges) {
    AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(getActivity());
    dialogBuilder.setTitle(getResources().getText(R.string.local_changes));
    dialogBuilder.setMessage(getResources().getText(R.string.overwrite_local_changes));
    dialogBuilder.setPositiveButton(getResources().getText(R.string.yes),new DialogInterface.OnClickListener(){
      public void onClick(      DialogInterface dialog,      int whichButton){
        mSwipeToRefreshHelper.setRefreshing(true);
        requestPosts(false);
      }
    }
);
    dialogBuilder.setNegativeButton(getResources().getText(R.string.no),new DialogInterface.OnClickListener(){
      public void onClick(      DialogInterface dialog,      int whichButton){
        mSwipeToRefreshHelper.setRefreshing(false);
      }
    }
);
    dialogBuilder.setCancelable(true);
    dialogBuilder.create().show();
  }
 else {
    mSwipeToRefreshHelper.setRefreshing(true);
    requestPosts(false);
  }
}
