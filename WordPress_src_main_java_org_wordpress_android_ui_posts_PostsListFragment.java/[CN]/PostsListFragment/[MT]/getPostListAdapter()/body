{
  if (mPostsListAdapter == null) {
    PostsListAdapter.OnLoadMoreListener loadMoreListener=new PostsListAdapter.OnLoadMoreListener(){
      @Override public void onLoadMore(){
        if (mCanLoadMorePosts && !mIsFetchingPosts)         requestPosts(true);
      }
    }
;
    PostsListAdapter.OnPostsLoadedListener postsLoadedListener=new PostsListAdapter.OnPostsLoadedListener(){
      @Override public void onPostsLoaded(      int postCount){
        if (!isAdded()) {
          return;
        }
        if (postCount == 0) {
          mEmptyView.setVisibility(View.VISIBLE);
        }
 else {
          mEmptyView.setVisibility(View.GONE);
        }
        if (!isRefreshing() || mKeepSwipeRefreshLayoutVisible) {
          updateEmptyView(EmptyViewMessageType.NO_CONTENT);
        }
        if (postCount == 0 && mCanLoadMorePosts) {
          if (isAdded() && NetworkUtils.isNetworkAvailable(getActivity())) {
            setRefreshing(true);
            requestPosts(false);
          }
 else {
            updateEmptyView(EmptyViewMessageType.NETWORK_ERROR);
          }
        }
 else         if (mShouldSelectFirstPost) {
          mShouldSelectFirstPost=false;
          if (mPostsListAdapter.getItemCount() > 0) {
            PostsListPost postsListPost=mPostsListAdapter.getItem(0);
            if (postsListPost != null) {
              showPost(postsListPost.getPostId());
            }
          }
        }
      }
    }
;
    PostsListAdapter.OnPostSelectedListener postSelectedListener=new PostsListAdapter.OnPostSelectedListener(){
      @Override public void onPostSelected(      PostsListPost post){
        if (!isAdded())         return;
        if (mIsFetchingPosts) {
          ToastUtils.showToast(getActivity(),mIsPage ? R.string.pages_fetching : R.string.posts_fetching);
        }
 else {
          showPost(post.getPostId());
        }
      }
    }
;
    mPostsListAdapter=new PostsListAdapter(getActivity(),mIsPage);
    mPostsListAdapter.setOnLoadMoreListener(loadMoreListener);
    mPostsListAdapter.setOnPostsLoadedListener(postsLoadedListener);
    mPostsListAdapter.setOnPostSelectedListener(postSelectedListener);
  }
  return mPostsListAdapter;
}
