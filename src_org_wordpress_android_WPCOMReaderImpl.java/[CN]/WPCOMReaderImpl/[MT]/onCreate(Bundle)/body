{
  super.onCreate(icicle);
  getWindow().setFormat(PixelFormat.RGBA_8888);
  getWindow().addFlags(WindowManager.LayoutParams.FLAG_DITHER);
  setContentView(R.layout.reader_wpcom);
  if (WordPress.wpDB == null)   WordPress.wpDB=new WordPressDB(this);
  if (WordPress.currentBlog == null) {
    try {
      WordPress.currentBlog=new Blog(WordPress.wpDB.getLastBlogID(this),this);
    }
 catch (    Exception e) {
      Toast.makeText(this,getResources().getText(R.string.blog_not_found),Toast.LENGTH_SHORT).show();
      finish();
    }
  }
  RelativeLayout rl=(RelativeLayout)findViewById(R.id.topicSelector);
  rl.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      Intent i=new Intent(getBaseContext(),WPCOMReaderTopicsSelector.class);
      i.putExtra("currentTopic",WPCOMReaderImpl.this.topicsID);
      if (WPCOMReaderImpl.this.cachedTopicsPage != null)       i.putExtra("cachedTopicsPage",WPCOMReaderImpl.this.cachedTopicsPage);
      startActivityForResult(i,WPCOMReaderTopicsSelector.activityRequestCode);
    }
  }
);
  Button refreshButton=(Button)findViewById(R.id.action_refresh);
  refreshButton.setOnClickListener(new ImageButton.OnClickListener(){
    public void onClick(    View v){
      wv.reload();
      new Thread(new Runnable(){
        public void run(){
          try {
            HttpClient httpclient=new DefaultHttpClient();
            HttpProtocolParams.setUserAgent(httpclient.getParams(),"wp-android");
            String readerURL=Constants.readerURL + "/?template=stats&stats_name=home_page_refresh";
            if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == 4) {
              readerURL+="&per_page=20";
            }
            httpclient.execute(new HttpGet(readerURL));
          }
 catch (          Exception e) {
          }
        }
      }
).start();
    }
  }
);
  wv=(WebView)findViewById(R.id.webView);
  wv.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
  wv.addJavascriptInterface(new JavaScriptInterface(this),interfaceNameForJS);
  this.setDefaultWebViewSettings(wv);
  new loadReaderTask().execute(null,null,null,null);
}
