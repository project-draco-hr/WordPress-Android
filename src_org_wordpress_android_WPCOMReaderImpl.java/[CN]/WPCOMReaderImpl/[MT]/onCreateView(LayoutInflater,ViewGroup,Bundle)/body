{
  CookieSyncManager.createInstance(this.getActivity().getApplicationContext());
  View v=inflater.inflate(R.layout.reader_wpcom,container,false);
  if (WordPress.wpDB == null)   WordPress.wpDB=new WordPressDB(getActivity().getApplicationContext());
  if (WordPress.currentBlog == null) {
    try {
      WordPress.currentBlog=new Blog(WordPress.wpDB.getLastBlogID(getActivity().getApplicationContext()),getActivity().getApplicationContext());
    }
 catch (    Exception e) {
      Toast.makeText(getActivity().getApplicationContext(),getResources().getText(R.string.blog_not_found),Toast.LENGTH_SHORT).show();
      getActivity().finish();
    }
  }
  topicTV=(TextView)v.findViewById(R.id.topic_title);
  refreshIcon=(ImageView)v.findViewById(R.id.refresh_icon);
  wv=(WebView)v.findViewById(R.id.webView);
  wv.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
  wv.addJavascriptInterface(new JavaScriptInterface(getActivity().getApplicationContext()),interfaceNameForJS);
  wv.setWebViewClient(new WebViewClient(){
    @Override public void onPageStarted(    WebView view,    String url,    Bitmap favicon){
      if (url.equalsIgnoreCase(Constants.readerDetailURL)) {
        view.stopLoading();
        wv.loadUrl("javascript:Reader2.get_loaded_items();");
        wv.loadUrl("javascript:Reader2.get_last_selected_item();");
        onPostSelectedListener.onPostSelected(url);
      }
 else {
        startRotatingRefreshIcon();
      }
    }
    @Override public void onPageFinished(    WebView view,    String url){
      stopRotatingRefreshIcon();
      if (url.contains("chrome=no")) {
        loadDetailListener.onLoadDetail();
      }
    }
    @Override public boolean shouldOverrideUrlLoading(    WebView view,    String url){
      return false;
    }
  }
);
  this.setDefaultWebViewSettings(wv);
  new loadReaderTask().execute(null,null,null,null);
  RelativeLayout rl=(RelativeLayout)v.findViewById(R.id.topicSelector);
  rl.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      showTopicsListener.showTopics();
    }
  }
);
  Button refreshButton=(Button)v.findViewById(R.id.action_refresh);
  refreshButton.setOnClickListener(new ImageButton.OnClickListener(){
    public void onClick(    View v){
      startRotatingRefreshIcon();
      wv.reload();
      new Thread(new Runnable(){
        public void run(){
          try {
            HttpClient httpclient=new DefaultHttpClient();
            HttpProtocolParams.setUserAgent(httpclient.getParams(),"wp-android-native");
            String readerURL=Constants.readerURL + "/?template=stats&stats_name=home_page_refresh";
            if ((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == 4) {
              readerURL+="&per_page=20";
            }
            httpclient.execute(new HttpGet(readerURL));
          }
 catch (          Exception e) {
          }
        }
      }
).start();
    }
  }
);
  return v;
}
