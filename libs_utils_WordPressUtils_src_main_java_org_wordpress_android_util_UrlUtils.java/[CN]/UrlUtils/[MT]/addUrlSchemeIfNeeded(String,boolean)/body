{
  if (url == null) {
    return null;
  }
  url=removeLeadingDoubleSlash(url,(isHTTPS ? "https" : "http") + "://");
  if (!URLUtil.isValidUrl(url)) {
    if (!(url.toLowerCase().startsWith("http://")) && !(url.toLowerCase().startsWith("https://"))) {
      url=(isHTTPS ? "https" : "http") + "://" + url;
    }
  }
  return url;
}
