{
  AlertDialog.Builder alert=new AlertDialog.Builder(getActivity());
  alert.setTitle(getString(R.string.ssl_certificate_error));
  alert.setMessage(getString(R.string.ssl_certificate_ask_trust));
  alert.setPositiveButton(R.string.ssl_certificate_trust,new DialogInterface.OnClickListener(){
    public void onClick(    DialogInterface dialog,    int which){
      SetupBlogTask setupBlogTask=new SetupBlogTask();
      try {
        SelfSignedSSLCertsManager selfSignedSSLCertsManager=SelfSignedSSLCertsManager.getInstance(getActivity());
        selfSignedSSLCertsManager.addCertificates(selfSignedSSLCertsManager.getLastFailureChain());
      }
 catch (      IOException e) {
        AppLog.e(T.NUX,e);
      }
catch (      GeneralSecurityException e) {
        AppLog.e(T.NUX,e);
      }
      setupBlogTask.execute();
    }
  }
);
  alert.setNeutralButton(R.string.ssl_certificate_details,new DialogInterface.OnClickListener(){
    public void onClick(    DialogInterface dialog,    int which){
      Intent intent=new Intent(getActivity(),SSLCertsViewActivity.class);
      try {
        SelfSignedSSLCertsManager selfSignedSSLCertsManager=SelfSignedSSLCertsManager.getInstance(getActivity());
        String lastFailureChainDesc="URL: " + EditTextUtils.getText(mUrlEditText).trim() + "<br/><br/>"+ selfSignedSSLCertsManager.getLastFailureChainDescription().replaceAll("\n","<br/>");
        intent.putExtra(SSLCertsViewActivity.CERT_DETAILS_KEYS,lastFailureChainDesc);
        getActivity().startActivityForResult(intent,WelcomeActivity.SHOW_CERT_DETAILS);
      }
 catch (      GeneralSecurityException e) {
        AppLog.e(T.NUX,e);
      }
catch (      IOException e) {
        AppLog.e(T.NUX,e);
      }
    }
  }
);
  alert.setNegativeButton(R.string.ssl_certificate_do_not_trust,new DialogInterface.OnClickListener(){
    public void onClick(    DialogInterface dialog,    int which){
    }
  }
);
  alert.show();
  endProgress();
}
