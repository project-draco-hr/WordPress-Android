{
  PreferenceCategory blogsCategory=(PreferenceCategory)findPreference("wp_pref_category_blogs");
  blogsCategory.removeAll();
  Vector<HashMap<String,Object>> accounts=WordPress.wpDB.getAccounts(this);
  for (  HashMap<String,Object> account : accounts) {
    String blogName=account.get("blogName").toString();
    int accountId=(Integer)account.get("id");
    Preference blogSettingsPreference=new Preference(this);
    blogSettingsPreference.setTitle(blogName);
    try {
      URL blogUrl=new URL(account.get("url").toString());
      if (!blogName.equals(blogUrl.getHost())) {
        blogSettingsPreference.setSummary(blogUrl.getHost());
      }
    }
 catch (    MalformedURLException e) {
    }
    Intent intent=new Intent(this,Settings.class);
    intent.putExtra("id",accountId);
    blogSettingsPreference.setIntent(intent);
    blogSettingsPreference.setOrder(0);
    blogsCategory.addPreference(blogSettingsPreference);
  }
  Preference addBlogPreference=new Preference(this);
  addBlogPreference.setTitle(R.string.add_account);
  Intent intent=new Intent(this,NewAccount.class);
  addBlogPreference.setIntent(intent);
  addBlogPreference.setOrder(1);
  blogsCategory.addPreference(addBlogPreference);
}
