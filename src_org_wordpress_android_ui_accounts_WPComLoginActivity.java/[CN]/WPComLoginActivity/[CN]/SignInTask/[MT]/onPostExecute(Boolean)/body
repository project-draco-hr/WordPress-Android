{
  if (isSignedIn && !isFinishing()) {
    if (!mIsJetpackAuthRequest) {
      WordPress.getRestClientUtils().get("me",new RestRequest.Listener(){
        @Override public void onResponse(        JSONObject jsonObject){
          WPComLoginActivity.this.setResult(RESULT_OK);
          WordPress.registerForCloudMessaging(WPComLoginActivity.this);
          ReaderUserActions.setCurrentUser(jsonObject);
          finish();
        }
      }
,null);
    }
 else {
      WPComLoginActivity.this.setResult(RESULT_OK);
      finish();
    }
  }
 else {
    if (mIsInvalidUsernameOrPassword) {
      mUsernameEditText.setError(getString(R.string.username_or_password_incorrect));
      mPasswordEditText.setError(getString(R.string.username_or_password_incorrect));
    }
 else {
      String errorMessage=mIsWpcomAccountWith2FA ? getString(R.string.account_two_step_auth_enabled) : getString(R.string.nux_cannot_log_in);
      Toast.makeText(getBaseContext(),errorMessage,Toast.LENGTH_LONG).show();
    }
    setEditTextAndButtonEnabled(true);
    mSignInButton.setText(R.string.sign_in);
  }
}
