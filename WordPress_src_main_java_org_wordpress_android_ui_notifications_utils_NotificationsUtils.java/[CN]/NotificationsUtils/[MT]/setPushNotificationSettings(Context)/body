{
  if (context == null || !AccountHelper.isSignedInWordPressDotCom()) {
    return;
  }
  SharedPreferences settings=PreferenceManager.getDefaultSharedPreferences(context);
  String deviceID=settings.getString(WPCOM_PUSH_DEVICE_SERVER_ID,null);
  if (TextUtils.isEmpty(deviceID)) {
    AppLog.e(T.NOTIFS,"device_ID is null in preferences. Set device settings skipped.");
    return;
  }
  String settingsJson=settings.getString(WPCOM_PUSH_DEVICE_NOTIFICATION_SETTINGS,null);
  if (settingsJson == null) {
    AppLog.e(T.NOTIFS,"Notifications settings JSON not found in app preferences.");
    return;
  }
  Gson gson=new Gson();
  HashMap notificationSettings=gson.fromJson(settingsJson,HashMap.class);
  Map<String,Object> updatedSettings=new HashMap<>();
  ArrayList mutedBlogsList=new ArrayList<>();
  if (notificationSettings == null || !(notificationSettings.get("muted_blogs") instanceof StringMap) || !(notificationSettings.get("muted_blogs") instanceof StringMap)) {
    return;
  }
  StringMap<?> mutedBlogsMap=(StringMap)notificationSettings.get("muted_blogs");
  StringMap<?> muteUntilMap=(StringMap)notificationSettings.get("mute_until");
  notificationSettings.remove("muted_blogs");
  notificationSettings.remove("mute_until");
  for (  Object entry : notificationSettings.entrySet()) {
    if (entry instanceof Map.Entry) {
      Map.Entry hashMapEntry=(Map.Entry)entry;
      if (hashMapEntry.getValue() instanceof StringMap && hashMapEntry.getKey() instanceof String) {
        StringMap setting=(StringMap)hashMapEntry.getValue();
        updatedSettings.put((String)hashMapEntry.getKey(),setting.get("value"));
      }
    }
  }
  if (muteUntilMap != null && muteUntilMap.get("value") != null) {
    updatedSettings.put("mute_until",muteUntilMap.get("value"));
  }
  if (mutedBlogsMap.get("value") instanceof ArrayList) {
    ArrayList blogsList=(ArrayList)mutedBlogsMap.get("value");
    for (    Object userBlog : blogsList) {
      if (userBlog instanceof StringMap) {
        StringMap userBlogMap=(StringMap)userBlog;
        if (MapUtils.getMapBool(userBlogMap,"value")) {
          mutedBlogsList.add(userBlogMap);
        }
      }
    }
  }
  if (updatedSettings.size() == 0 && mutedBlogsList.size() == 0) {
    return;
  }
  updatedSettings.put("muted_blogs",mutedBlogsList);
  Map<String,String> contentStruct=new HashMap<>();
  contentStruct.put("settings",gson.toJson(updatedSettings));
  WordPress.getRestClientUtils().post("/device/" + deviceID,contentStruct,null,null,null);
}
