{
  Resources resources=parentView.getContext().getResources();
  String message=(status == CommentStatus.TRASH ? resources.getString(R.string.comment_trashed) : resources.getString(R.string.comment_spammed));
  View.OnClickListener undoListener=new View.OnClickListener(){
    @Override public void onClick(    View v){
      mSnackbarDidUndoOrDismiss=true;
      EventBus.getDefault().postSticky(new NoteVisibilityChanged(note.getId(),false));
    }
  }
;
  mSnackbarDidUndoOrDismiss=false;
  Snackbar snackbar=Snackbar.make(parentView,message,Snackbar.LENGTH_LONG).setAction(R.string.undo,undoListener);
  snackbar.setCallback(new Snackbar.Callback(){
    @Override public void onDismissed(    Snackbar snackbar,    int event){
      super.onDismissed(snackbar,event);
      if (mSnackbarDidUndoOrDismiss) {
        return;
      }
      mSnackbarDidUndoOrDismiss=true;
      CommentActions.moderateCommentForNote(note,status,new CommentActions.CommentActionListener(){
        @Override public void onActionResult(        boolean succeeded){
          if (!succeeded) {
            EventBus.getDefault().postSticky(new NoteVisibilityChanged(note.getId(),false));
            EventBus.getDefault().postSticky(new NoteModerationFailed());
          }
        }
      }
);
    }
  }
);
  snackbar.show();
}
