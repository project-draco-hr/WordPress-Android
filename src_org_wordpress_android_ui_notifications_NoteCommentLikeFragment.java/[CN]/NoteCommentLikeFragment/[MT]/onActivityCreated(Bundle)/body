{
  super.onActivityCreated(bundle);
  ListView list=getListView();
  list.setDivider(getResources().getDrawable(R.drawable.list_divider));
  list.setDividerHeight(1);
  list.setHeaderDividersEnabled(false);
  if (getNote() == null)   return;
  JSONArray bodyItems=getNote().queryJSON("body.items",new JSONArray());
  JSONObject bodyObject=getNote().queryJSON("body",new JSONObject());
  final String headerSubject=getHeaderText(bodyItems);
  final String headerSnippet=getCommentSnippet(bodyItems);
  final String headerLink=(bodyObject != null ? JSONUtil.getString(bodyObject,"header_link") : "");
  LayoutInflater inflater=getActivity().getLayoutInflater();
  DetailHeader noteHeader=(DetailHeader)inflater.inflate(R.layout.notifications_detail_header,null);
  if (TextUtils.isEmpty(headerSnippet)) {
    noteHeader.setText(headerSubject);
  }
 else {
    noteHeader.setText(Html.fromHtml(headerSubject + "<br><small>&quot;" + headerSnippet+ "&quot;</small>"));
  }
  noteHeader.setBackgroundColor(getResources().getColor(R.color.light_gray));
  noteHeader.getTextView().setGravity(Gravity.CENTER_HORIZONTAL);
  noteHeader.setNote(getNote(),headerLink);
  if (getActivity() instanceof OnPostClickListener) {
    noteHeader.setOnPostClickListener(((OnPostClickListener)getActivity()));
  }
  if (getActivity() instanceof OnCommentClickListener) {
    noteHeader.setOnCommentClickListener(((OnCommentClickListener)getActivity()));
  }
  list.addHeaderView(noteHeader);
  setListAdapter(new NoteAdapter());
}
