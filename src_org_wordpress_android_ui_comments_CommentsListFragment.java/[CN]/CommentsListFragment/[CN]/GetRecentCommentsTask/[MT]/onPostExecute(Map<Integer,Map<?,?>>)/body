{
  mIsRetrievingComments=false;
  if (!hasActivity())   return;
  mOnAnimateRefreshButton.onAnimateRefreshButton(false);
  showOrHideModerationBar();
  hideLoadingProgress();
  if (isCancelled())   return;
  mCanLoadMoreComments=(commentsResult != null && commentsResult.size() > 0);
  if (commentsResult == null) {
    if (model != null && model.size() == 1) {
      WordPress.wpDB.clearComments(WordPress.currentBlog.getLocalTableBlogId());
      model.clear();
      allComments.clear();
      getListView().invalidateViews();
      WordPress.currentComment=null;
      loadComments(false);
    }
    if (isError && !getActivity().isFinishing()) {
      ToastUtils.showToast(getActivity(),R.string.error_refresh_comments,ToastUtils.Duration.LONG);
    }
    return;
  }
  boolean didLoadMore=(commentsResult.size() > 0);
  if (commentsResult.size() > 0) {
    allComments.putAll(commentsResult);
    loadComments(didLoadMore);
  }
}
