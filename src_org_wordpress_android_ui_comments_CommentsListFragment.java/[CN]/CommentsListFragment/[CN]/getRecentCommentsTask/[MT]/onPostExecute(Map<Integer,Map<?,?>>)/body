{
  if (isCancelled())   return;
  if (commentsResult == null) {
    onAnimateRefreshButton.onAnimateRefreshButton(false);
    if (!moderateErrorMsg.equals("") && !getActivity().isFinishing()) {
      FragmentTransaction ft=getFragmentManager().beginTransaction();
      WPAlertDialogFragment alert=WPAlertDialogFragment.newInstance(String.format(getResources().getString(R.string.error_refresh),getResources().getText(R.string.tab_comments)),moderateErrorMsg);
      alert.show(ft,"alert");
      moderateErrorMsg="";
    }
 else {
      if (model != null && model.size() == 1) {
        WordPress.wpDB.clearComments(WordPress.currentBlog.getId());
        model.clear();
      }
      allComments.clear();
      Log.v("FIXME","list adapter=" + getListAdapter());
      getListView().invalidateViews();
      onCommentStatusChangeListener.onCommentStatusChanged("clear");
      WordPress.currentComment=null;
      loadComments(false,false);
    }
    return;
  }
  if (commentsResult.size() == 0) {
    if (progressDialog.isShowing()) {
      progressDialog.dismiss();
    }
  }
 else {
    allComments.putAll(commentsResult);
    if (!doInBackground) {
      loadComments(refreshOnly,loadMore);
    }
  }
  onAnimateRefreshButton.onAnimateRefreshButton(false);
  if (loadMore) {
    switcher.showPrevious();
  }
  if (!doInBackground) {
    showOrHideModerationBar();
  }
}
