{
  DefaultHttpClient client=null;
  if (uri.getHost().endsWith("wordpress.com") || (uri.getScheme() == null || uri.getScheme().equals("http"))) {
    client=new DefaultHttpClient();
  }
 else {
    int port=uri.getPort();
    if (port == -1) {
      port=443;
    }
    try {
      HttpParams params=new BasicHttpParams();
      HttpConnectionParams.setConnectionTimeout(params,30000);
      SchemeRegistry schemeRegistry=new SchemeRegistry();
      schemeRegistry.register(new Scheme("http",PlainSocketFactory.getSocketFactory(),80));
      TrustAllSSLSocketFactory tasslf=new TrustAllSSLSocketFactory();
      schemeRegistry.register(new Scheme("https",tasslf,port));
      ClientConnectionManager cm=new ThreadSafeClientConnManager(params,schemeRegistry);
      client=new DefaultHttpClient(cm,params);
    }
 catch (    NoSuchAlgorithmException e) {
      AppLog.e(T.API,"Cannot create the DefaultHttpClient object with our TrustAllSSLSocketFactory",e);
      client=null;
    }
catch (    KeyStoreException e) {
      AppLog.e(T.API,"Cannot create the DefaultHttpClient object with our TrustAllSSLSocketFactory",e);
      client=null;
    }
catch (    UnrecoverableKeyException e) {
      AppLog.e(T.API,"Cannot create the DefaultHttpClient object with our TrustAllSSLSocketFactory",e);
      client=null;
    }
catch (    GeneralSecurityException e) {
      AppLog.e(T.API,"Cannot create the DefaultHttpClient object with our TrustAllSSLSocketFactory",e);
      client=null;
    }
    if (client == null) {
      client=new DefaultHttpClient();
    }
  }
  HttpConnectionParams.setConnectionTimeout(client.getParams(),30000);
  BasicCredentialsProvider cP=new BasicCredentialsProvider();
  cP.setCredentials(AuthScope.ANY,credentials);
  client.setCredentialsProvider(cP);
  return client;
}
