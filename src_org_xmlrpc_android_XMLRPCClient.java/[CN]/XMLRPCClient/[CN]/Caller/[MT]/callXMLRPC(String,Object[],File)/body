{
  try {
    preparePostMethod(method,params,tempFile);
    HttpResponse response=client.execute(postMethod);
    int statusCode=response.getStatusLine().getStatusCode();
    deleteTempFile(method,tempFile);
    if (statusCode != HttpStatus.SC_OK) {
      throw new XMLRPCException("HTTP status code: " + statusCode + " was returned. "+ response.getStatusLine().getReasonPhrase());
    }
    HttpEntity entity=response.getEntity();
    return XMLRPCClient.parseXMLRPCResponse(entity.getContent(),entity);
  }
 catch (  XMLRPCException e) {
    deleteTempFile(method,tempFile);
    throw e;
  }
catch (  Exception e) {
    deleteTempFile(method,tempFile);
    throw new XMLRPCException(e);
  }
}
