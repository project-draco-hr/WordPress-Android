{
  try {
    preparePostMethod(method,params,tempFile);
    HttpResponse response=mClient.execute(mPostMethod);
    int statusCode=response.getStatusLine().getStatusCode();
    deleteTempFile(method,tempFile);
    if (statusCode != HttpStatus.SC_OK) {
      if (statusCode == HttpStatus.SC_INTERNAL_SERVER_ERROR) {
        HttpEntity entity=response.getEntity();
        if (entity != null) {
          try {
            String responseString=EntityUtils.toString(entity,"UTF-8");
            if (!TextUtils.isEmpty(responseString) && responseString.contains("php fatal error") && responseString.contains("bytes exhausted")) {
              String newErrorMsg=null;
              if (method.equals("wp.uploadFile")) {
                newErrorMsg="The server doesn't have enough memory to upload this file. You may need to increase the PHP memory limit on your site.";
              }
 else {
                newErrorMsg="The server doesn't have enough memory to fulfill the request. You may need to increase the PHP memory limit on your site.";
              }
              throw new XMLRPCException(response.getStatusLine().getReasonPhrase() + ".\n\n" + newErrorMsg);
            }
          }
 catch (          Exception e) {
          }
        }
      }
      throw new XMLRPCException("HTTP status code: " + statusCode + " was returned. "+ response.getStatusLine().getReasonPhrase());
    }
    HttpEntity entity=response.getEntity();
    return XMLRPCClient.parseXMLRPCResponse(entity.getContent(),entity);
  }
 catch (  Exception e) {
    deleteTempFile(method,tempFile);
    throw e;
  }
}
