{
  PlansRestRequestAbstractListener listener=new PlansRestRequestAbstractListener(){
    @Override void parseResponse(    JSONObject response) throws JSONException {
      List<Plan> plans=new ArrayList<>();
      JSONArray plansArray=response.getJSONArray("originalResponse");
      for (int i=0; i < plansArray.length(); i++) {
        JSONObject currentPlanJSON=plansArray.getJSONObject(i);
        Plan currentPlan=new Plan(currentPlanJSON);
        plans.add(currentPlan);
      }
      assertEquals(6,plans.size());
      Plan currentPlan=plans.get(0);
      assertEquals(currentPlan.getDescription(),"Spam Protection");
      assertEquals(currentPlan.getShortdesc(),"Jetpack (free) speeds up your site's images, secures it, and enables traffic and customization tools.");
      assertEquals(currentPlan.getProductID(),2002L);
      assertEquals(currentPlan.getProductName(),"Free");
      assertEquals(currentPlan.getProductNameEnglish(),"Free");
      assertEquals(currentPlan.getBillPeriod(),-1);
      assertEquals(currentPlan.getRawPrice(),0);
      assertEquals(currentPlan.getCost(),0);
      assertEquals(currentPlan.isAvailable(),true);
      currentPlan=plans.get(5);
      assertEquals(currentPlan.getShortdesc(),"Everything included with Premium, as well as live chat support, and unlimited access to our premium themes.");
      assertEquals(currentPlan.getDescription(),"All you need to build a great website:<ul><li>Chat live with a WordPress.com specialist, Monday to Friday between 7am and 7pm Eastern time.</li>" + "<li>Try any premium theme and change as often as you like, no extra charge.</li>" + "<li>Upload all the video and audio files you want with unlimited storage.</li>"+ "</ul>Including all the features of WordPress.com Premium:<ul>"+ "<li>A domain of your choice to replace your site\u2019s default address</li>"+ "<li>Custom Design to customize your site\u2019s appearance and choose unique fonts and colors</li>"+ "<li>VideoPress to embed beautiful HD video straight from your dashboard or from your mobile device</li>"+ "<li>Hides all ads on your site</li></ul>");
      assertEquals(currentPlan.getProductID(),1008L);
      assertEquals(currentPlan.getProductName(),"WordPress.com Business");
      assertEquals(currentPlan.getProductNameEnglish(),"WordPress.com Business");
      assertEquals(currentPlan.getBillPeriod(),365);
      assertEquals(currentPlan.getRawPrice(),250);
      assertEquals(currentPlan.getCost(),250);
      assertEquals(currentPlan.isAvailable(),true);
    }
  }
;
  mRestClient.makeRequest(Request.Method.POST,"https://public-api.wordpress.com/rest/v1/plans",null,listener,errListener);
}
