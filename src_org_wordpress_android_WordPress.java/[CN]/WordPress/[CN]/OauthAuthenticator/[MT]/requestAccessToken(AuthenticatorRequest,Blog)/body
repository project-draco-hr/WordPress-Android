{
  Oauth oauth=new Oauth(Config.OAUTH_APP_ID,Config.OAUTH_APP_SECRET,Config.OAUTH_REDIRECT_URI);
  String username=null, password=null;
  final SharedPreferences settings=PreferenceManager.getDefaultSharedPreferences(WordPress.this);
  if (blog == null) {
    username=settings.getString(WPCOM_USERNAME_PREFERENCE,null);
    password=WordPressDB.decryptPassword(settings.getString(WPCOM_PASSWORD_PREFERENCE,null));
  }
 else {
    if (blog.isDotcomFlag()) {
      username=blog.getUsername();
      password=blog.getPassword();
    }
 else {
      username=blog.getDotcom_username();
      password=blog.getDotcom_password();
    }
  }
  Request oauthRequest=oauth.makeRequest(username,password,new Oauth.Listener(){
    @Override public void onResponse(    Oauth.Token token){
      if (blog == null) {
        settings.edit().putString(ACCESS_TOKEN_PREFERENCE,token.toString()).commit();
      }
 else {
        blog.setApi_key(token.toString());
        WordPress.wpDB.saveBlog(blog);
      }
      request.sendWithAccessToken(token);
    }
  }
,new Oauth.ErrorListener(){
    @Override public void onErrorResponse(    VolleyError error){
      request.abort(error);
    }
  }
);
  requestQueue.add(oauthRequest);
}
