{
  setContentView(R.layout.home);
  setTitle(getResources().getText(R.string.app_name) + " - " + getResources().getText(R.string.blogs));
  settingsDB settingsDB=new settingsDB(this);
  accounts=settingsDB.getAccounts(this);
  checkStats(accounts.size());
  ListView listView=(ListView)findViewById(android.R.id.list);
  ImageView iv=new ImageView(this);
  iv.setBackgroundDrawable(getResources().getDrawable(R.drawable.list_divider));
  listView.addFooterView(iv);
  listView.setVerticalFadingEdgeEnabled(false);
  listView.setVerticalScrollBarEnabled(false);
  listView.setOnItemClickListener(new OnItemClickListener(){
    public void onNothingSelected(    AdapterView<?> arg0){
    }
    public void onItemClick(    AdapterView<?> arg0,    View row,    int position,    long id){
      Bundle bundle=new Bundle();
      bundle.putString("accountName",blogNames[position]);
      bundle.putString("id",String.valueOf(row.getId()));
      Intent viewPostsIntent=new Intent(wpAndroid.this,tabView.class);
      viewPostsIntent.putExtras(bundle);
      startActivityForResult(viewPostsIntent,1);
    }
  }
);
  listView.setOnCreateContextMenuListener(new OnCreateContextMenuListener(){
    public void onCreateContextMenu(    ContextMenu menu,    View v,    ContextMenuInfo menuInfo){
      AdapterView.AdapterContextMenuInfo info=(AdapterView.AdapterContextMenuInfo)menuInfo;
      View row=info.targetView;
      selectedID=String.valueOf(row.getId());
      menu.add(0,0,0,getResources().getText(R.string.remove_account));
    }
  }
);
  if (accounts.size() > 0) {
    ScrollView sv=new ScrollView(this);
    sv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    sv.setBackgroundColor(Color.parseColor("#e8e8e8"));
    LinearLayout layout=new LinearLayout(this);
    layout.setPadding(10,10,10,0);
    layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    layout.setOrientation(LinearLayout.VERTICAL);
    blogNames=new String[accounts.size()];
    accountIDs=new String[accounts.size()];
    accountUsers=new String[accounts.size()];
    blavatars=new String[accounts.size()];
    for (int i=0; i < accounts.size(); i++) {
      HashMap curHash=(HashMap)accounts.get(i);
      blogNames[i]=curHash.get("blogName").toString();
      accountUsers[i]=curHash.get("username").toString();
      accountIDs[i]=curHash.get("id").toString();
      String url=curHash.get("url").toString();
      url=url.replace("http://","");
      url=url.replace("https://","");
      String[] urlSplit=url.split("/");
      url=urlSplit[0];
      url="http://gravatar.com/blavatar/" + moderateCommentsTab.getMd5Hash(url.trim()) + "?s=60&d=404";
      blavatars[i]=url;
      accountNames.add(i,blogNames[i]);
    }
    ThumbnailBus bus=new ThumbnailBus();
    thumbs=new ThumbnailAdapter(this,new HomeListAdapter(this),new SimpleWebImageCache<ThumbnailBus,ThumbnailMessage>(null,null,101,bus),IMAGE_IDS);
    setListAdapter(thumbs);
  }
 else {
    Intent i=new Intent(wpAndroid.this,newAccount.class);
    startActivityForResult(i,0);
  }
}
