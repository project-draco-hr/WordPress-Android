{
  if (url == null || !url.startsWith("http")) {
    return null;
  }
 else   if (url.contains("/imgpress")) {
    return getImageUrlFromImagepressUrl(url);
  }
 else   if (PhotonUtils.isMshotsUrl(url)) {
    return UrlUtils.removeQuery(url).replaceFirst("https","http");
  }
 else {
    return url;
  }
}
