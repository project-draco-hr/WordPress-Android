{
  Intent intent=new Intent(getActivity(),PostsActivity.class);
  intent.addFlags(NotificationsActivity.FLAG_FROM_NOTE);
  intent.putExtra(NotificationsActivity.FROM_NOTIFICATION_EXTRA,true);
  intent.putExtra(NotificationsActivity.NOTE_ID_EXTRA,getNote().getId());
  RemoteViews content=new RemoteViews(getActivity().getPackageName(),R.layout.notification_replying);
  mNotification=new NotificationCompat.Builder(getActivity()).setContentTitle("Replying").setContentText("Publishing your reply").setWhen(0).setTicker("Publishing your reply").setSmallIcon(R.drawable.notification_icon).setOngoing(true).setContent(content).setContentIntent(PendingIntent.getActivity(getActivity(),0x0,intent,0x0)).build();
  Intent failureIntent=new Intent(getActivity(),PostsActivity.class);
  failureIntent.addFlags(NotificationsActivity.FLAG_FROM_NOTE);
  failureIntent.putExtra(NotificationsActivity.NOTE_ID_EXTRA,getNote().getId());
  failureIntent.putExtra(NotificationsActivity.NOTE_REPLY_EXTRA,mReply.getContent());
  failureIntent.putExtra(NotificationsActivity.FROM_NOTIFICATION_EXTRA,true);
  mFailureNotification=new NotificationCompat.Builder(getActivity()).setContentTitle("Reply failed").setContentText("Tap to try again").setTicker("Reply failed").setWhen(0).setSmallIcon(R.drawable.notification_icon).setContentIntent(PendingIntent.getActivity(getActivity(),0x0,failureIntent,0x0)).build();
  mToast=Toast.makeText(getActivity(),R.string.note_reply_successful,Toast.LENGTH_SHORT);
}
