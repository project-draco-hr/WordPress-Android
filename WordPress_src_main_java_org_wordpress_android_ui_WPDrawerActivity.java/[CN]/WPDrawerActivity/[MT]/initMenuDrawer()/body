{
  mDrawerLayout=(DrawerLayout)findViewById(R.id.drawer_layout);
  if (mDrawerLayout != null) {
    int drawerWidth=isStaticMenuDrawer() ? getResources().getDimensionPixelSize(R.dimen.drawer_width_static) : WPActivityUtils.getOptimalDrawerWidth(this);
    ViewGroup leftDrawer=(ViewGroup)mDrawerLayout.findViewById(R.id.capture_insets_frame_layout);
    leftDrawer.getLayoutParams().width=drawerWidth;
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
      mDrawerLayout.setStatusBarBackgroundColor(getResources().getColor(R.color.color_primary_dark));
    }
    mDrawerLayout.setDrawerShadow(R.drawable.drawer_shadow,GravityCompat.START);
    mDrawerToggle=new ActionBarDrawerToggle(this,mDrawerLayout,mToolbar,R.string.open_drawer,R.string.close_drawer){
      public void onDrawerClosed(      View view){
        invalidateOptionsMenu();
      }
      public void onDrawerOpened(      View drawerView){
        invalidateOptionsMenu();
      }
    }
;
    mDrawerToggle.setHomeAsUpIndicator(R.drawable.ic_arrow_back_white_24dp);
    mDrawerLayout.setDrawerListener(mDrawerToggle);
  }
  mDrawerListView=(ListView)findViewById(R.id.drawer_list);
  if (mDrawerListView.getHeaderViewsCount() == 0) {
    View view=getLayoutInflater().inflate(R.layout.drawer_header,mDrawerListView,false);
    mDrawerListView.addHeaderView(view,null,false);
  }
  mScrollPositionManager=new ListScrollPositionManager(mDrawerListView,false);
  View settingsRow=findViewById(R.id.settings_row);
  settingsRow.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      showSettings();
    }
  }
);
  mDrawerAdapter=new DrawerAdapter(this);
  mDrawerListView.setAdapter(mDrawerAdapter);
  mDrawerListView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
      int menuPosition=position - mDrawerListView.getHeaderViewsCount();
      DrawerItem item=(DrawerItem)mDrawerAdapter.getItem(menuPosition);
      drawerItemSelected(item);
    }
  }
);
  initBlogSpinner();
  updateMenuDrawer();
}
