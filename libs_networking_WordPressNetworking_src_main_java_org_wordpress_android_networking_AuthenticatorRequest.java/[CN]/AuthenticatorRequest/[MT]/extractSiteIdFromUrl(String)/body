{
  if (url == null) {
    return null;
  }
  final String restEndpointURL=mRestClient.getEndpointURL();
  final String sitePrefix=restEndpointURL.endsWith("/") ? restEndpointURL + "sites/" : restEndpointURL + "/sites/";
  final String batchCallPrefix=restEndpointURL.endsWith("/") ? restEndpointURL + "batch/?urls%5B%5D=%2Fsites%2F" : restEndpointURL + "/batch/?urls%5B%5D=%2Fsites%2F";
  if (url.startsWith(sitePrefix) && !sitePrefix.equals(url)) {
    int marker=sitePrefix.length();
    if (url.indexOf("/",marker) < marker) {
      return null;
    }
    return url.substring(marker,url.indexOf("/",marker));
  }
 else   if (url.startsWith(batchCallPrefix) && !batchCallPrefix.equals(url)) {
    int marker=batchCallPrefix.length();
    if (url.indexOf("%2F",marker) < marker) {
      return null;
    }
    return url.substring(marker,url.indexOf("%2F",marker));
  }
  return null;
}
