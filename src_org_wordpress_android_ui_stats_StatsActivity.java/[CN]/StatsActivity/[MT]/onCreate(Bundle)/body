{
  super.onCreate(savedInstanceState);
  if (WordPress.wpDB == null) {
    Toast.makeText(this,R.string.fatal_db_error,Toast.LENGTH_LONG).show();
    finish();
    return;
  }
  setTitle("");
  createMenuDrawer(R.layout.stats_activity);
  final ActionBar actionBar=getSupportActionBar();
  actionBar.setDisplayShowCustomEnabled(true);
  actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
  restoreState(savedInstanceState);
  mActionbarNav=getLayoutInflater().inflate(R.layout.stats_ab_navigation,null,false);
  actionBar.setCustomView(mActionbarNav);
  mActionbarNavText=(TextView)mActionbarNav.findViewById(R.id.stats_ab_nav_text);
  mActionbarNavText.setText(StatsViewType.values()[mNavPosition].getLabel());
  mActionbarNavText.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      if (!isFinishing())       showViews();
    }
  }
);
  FragmentManager fm=getSupportFragmentManager();
  mStatsViewFragment=(StatsAbsViewFragment)fm.findFragmentByTag(StatsAbsViewFragment.TAG);
  if (mStatsViewFragment == null) {
    mStatsViewFragment=StatsAbsViewFragment.newInstance(StatsViewType.values()[0]);
    fm.beginTransaction().add(R.id.stats_container,mStatsViewFragment,StatsAbsViewFragment.TAG).commit();
  }
  mNavFragment=(DialogFragment)fm.findFragmentByTag(StatsNavDialogFragment.TAG);
  mStatsHeader=findViewById(R.id.stats_header);
  hideHeaderIfLandscape();
  mViewsTotalText=(TextView)findViewById(R.id.stats_header_views_total);
  mCommentsTotalText=(TextView)findViewById(R.id.stats_header_comments_total);
  mFavsTotalText=(TextView)findViewById(R.id.stats_header_favs_total);
  mReblogTotalText=(TextView)findViewById(R.id.stats_header_reblog_total);
  refreshStats();
}
