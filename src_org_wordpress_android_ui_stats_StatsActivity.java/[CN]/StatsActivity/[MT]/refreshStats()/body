{
  if (WordPress.getCurrentBlog() == null)   return;
  String blogId;
  if (WordPress.getCurrentBlog().isDotcomFlag() && dotComCredentialsMatch())   blogId=String.valueOf(WordPress.getCurrentBlog().getBlogId());
 else {
    blogId=getBlogId();
    if (blogId == null) {
      new ApiHelper.RefreshBlogContentTask(this,WordPress.getCurrentBlog(),new VerifyJetpackSettingsCallback(StatsActivity.this)).execute(false);
      return;
    }
  }
  StatsRestHelper.getStatsSummary(blogId,new StatsRestHelper.StatsSummaryInterface(){
    @Override public void onSuccess(){
    }
    @Override public void onFailure(    VolleyError error){
      if (mSignInDialog != null && mSignInDialog.isShowing()) {
        return;
      }
      if (!isFinishing() && error.networkResponse != null && error.networkResponse.statusCode == 403) {
        AlertDialog.Builder builder=new AlertDialog.Builder(StatsActivity.this);
        builder.setTitle(getString(R.string.jetpack_stats_unauthorized)).setMessage(getString(R.string.jetpack_stats_switch_user));
        builder.setPositiveButton(R.string.yes,new DialogInterface.OnClickListener(){
          public void onClick(          DialogInterface dialog,          int id){
            startWPComLoginActivity();
          }
        }
);
        builder.setNegativeButton(R.string.no,new DialogInterface.OnClickListener(){
          public void onClick(          DialogInterface dialog,          int id){
          }
        }
);
        mSignInDialog=builder.create();
        mSignInDialog.show();
        return;
      }
      if (!isFinishing()) {
        ToastUtils.showToast(getBaseContext(),R.string.error_refresh_stats,ToastUtils.Duration.LONG);
      }
    }
  }
);
  StatsRestHelper.getStats(StatsViewType.CLICKS,blogId);
  StatsRestHelper.getStats(StatsViewType.REFERRERS,blogId);
  StatsRestHelper.getStats(StatsViewType.SEARCH_ENGINE_TERMS,blogId);
  StatsRestHelper.getStats(StatsViewType.TOP_POSTS_AND_PAGES,blogId);
  StatsRestHelper.getStats(StatsViewType.VIEWS_BY_COUNTRY,blogId);
  StatsRestHelper.getStats(StatsViewType.VISITORS_AND_VIEWS,blogId);
}
