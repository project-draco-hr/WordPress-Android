{
  if (!hasActivity() || !hasComment() || mIsModeratingComment)   return;
  if (!NetworkUtils.checkConnection(getActivity()))   return;
  final int dlgId;
switch (newStatus) {
case APPROVED:
    dlgId=CommentDialogs.ID_COMMENT_DLG_APPROVING;
  break;
case UNAPPROVED:
dlgId=CommentDialogs.ID_COMMENT_DLG_UNAPPROVING;
break;
case SPAM:
dlgId=CommentDialogs.ID_COMMENT_DLG_SPAMMING;
break;
case TRASH:
dlgId=CommentDialogs.ID_COMMENT_DLG_TRASHING;
break;
default :
return;
}
getActivity().showDialog(dlgId);
mLayoutButtons.setEnabled(false);
mLayoutButtons.clearAnimation();
AniUtils.flyOut(mLayoutButtons);
if (mTxtStatus.getVisibility() == View.VISIBLE) {
mTxtStatus.clearAnimation();
AniUtils.startAnimation(mTxtStatus,R.anim.fade_out);
mTxtStatus.setVisibility(View.INVISIBLE);
}
CommentActions.CommentActionListener actionListener=new CommentActions.CommentActionListener(){
@Override public void onActionResult(boolean succeeded){
mIsModeratingComment=false;
if (hasActivity()) {
dismissDialog(dlgId);
mLayoutButtons.setEnabled(true);
if (succeeded) {
mComment.setStatus(CommentStatus.toString(newStatus));
}
 else {
ToastUtils.showToast(getActivity(),R.string.error_moderate_comment,ToastUtils.Duration.LONG);
}
if (newStatus == CommentStatus.TRASH) {
clearComment();
}
 else {
updateStatusViews();
}
}
if (succeeded && mOnCommentChangeListener != null) {
ChangeType changeType=(newStatus == CommentStatus.TRASH ? ChangeType.TRASHED : ChangeType.STATUS);
mOnCommentChangeListener.onCommentChanged(ChangedFrom.COMMENT_DETAIL,changeType);
}
}
}
;
mIsModeratingComment=true;
CommentActions.moderateComment(mLocalBlogId,mComment,newStatus,actionListener);
}
