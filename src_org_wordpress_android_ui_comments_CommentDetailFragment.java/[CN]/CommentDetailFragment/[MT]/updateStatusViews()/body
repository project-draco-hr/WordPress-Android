{
  if (!hasActivity() || !hasComment())   return;
  final int moderationDrawResId;
  final CommentStatus newStatus;
  final int statusTextResId;
  final int statusColor;
  final boolean enableMarkAsSpam;
switch (mComment.getStatusEnum()) {
case APPROVED:
    moderationDrawResId=R.drawable.ic_cab_unapprove;
  newStatus=CommentStatus.UNAPPROVED;
enableMarkAsSpam=true;
statusTextResId=R.string.comment_status_approved;
statusColor=getActivity().getResources().getColor(R.color.comment_status_approved);
break;
case UNAPPROVED:
moderationDrawResId=R.drawable.ic_cab_approve;
newStatus=CommentStatus.APPROVED;
enableMarkAsSpam=true;
statusTextResId=R.string.comment_status_unapproved;
statusColor=getActivity().getResources().getColor(R.color.comment_status_unapproved);
break;
case SPAM:
moderationDrawResId=R.drawable.ic_cab_approve;
newStatus=CommentStatus.APPROVED;
enableMarkAsSpam=false;
statusTextResId=R.string.comment_status_spam;
statusColor=getActivity().getResources().getColor(R.color.comment_status_spam);
break;
case TRASH:
moderationDrawResId=R.drawable.ic_cab_approve;
newStatus=CommentStatus.APPROVED;
enableMarkAsSpam=false;
statusTextResId=R.string.comment_status_trash;
statusColor=getActivity().getResources().getColor(R.color.comment_status_spam);
break;
default :
return;
}
if (mIsUsersBlog && mComment.getStatusEnum() != CommentStatus.APPROVED) {
mTxtStatus.setText(getString(statusTextResId).toUpperCase());
mTxtStatus.setTextColor(statusColor);
if (mTxtStatus.getVisibility() != View.VISIBLE) {
mTxtStatus.clearAnimation();
AniUtils.fadeIn(mTxtStatus);
}
}
 else {
mTxtStatus.setVisibility(View.GONE);
}
if (canModerate()) {
setImageDrawable(mImgModerateComment,moderationDrawResId,true);
mImgModerateComment.setOnClickListener(new View.OnClickListener(){
@Override public void onClick(View v){
moderateComment(newStatus);
}
}
);
mImgModerateComment.setVisibility(View.VISIBLE);
}
 else {
mImgModerateComment.setVisibility(View.GONE);
}
if (canMarkAsSpam()) {
mImgSpamComment.setVisibility(View.VISIBLE);
mImgSpamComment.setEnabled(enableMarkAsSpam);
setImageDrawable(mImgSpamComment,R.drawable.ic_cab_spam,enableMarkAsSpam);
}
 else {
mImgSpamComment.setVisibility(View.GONE);
}
mImgTrashComment.setVisibility(canTrash() ? View.VISIBLE : View.GONE);
mImgEditComment.setVisibility(canEdit() ? View.VISIBLE : View.GONE);
if (mLayoutButtons.getVisibility() != View.VISIBLE && (canMarkAsSpam() || canModerate())) {
mLayoutButtons.clearAnimation();
AniUtils.flyIn(mLayoutButtons);
}
}
