{
  super.onFinishInflate();
  final WordPressDB settingsDB=new WordPressDB(context);
  accounts=settingsDB.getAccounts(context);
  dashboard=(RelativeLayout)findViewById(R.id.dashboard);
  blogNames=new CharSequence[accounts.size()];
  blogIDs=new int[accounts.size()];
  for (int i=0; i < accounts.size(); i++) {
    HashMap<?,?> defHash=(HashMap<?,?>)accounts.get(i);
    String curBlogName=EscapeUtils.unescapeHtml(defHash.get("blogName").toString());
    blogNames[i]=curBlogName;
    blogIDs[i]=Integer.valueOf(defHash.get("id").toString());
    blogTitle=(TextView)findViewById(R.id.blog_title);
  }
  int lastBlogID=settingsDB.getLastBlogID(context);
  if (lastBlogID != -1) {
    try {
      boolean matchedID=false;
      for (int i=0; i < blogIDs.length; i++) {
        if (blogIDs[i] == lastBlogID) {
          matchedID=true;
          WordPress.currentBlog=new Blog(blogIDs[i],context);
        }
      }
      if (!matchedID) {
        WordPress.currentBlog=new Blog(blogIDs[0],context);
      }
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
 else {
    if (blogIDs.length > 0)     WordPress.currentBlog=new Blog(blogIDs[0],context);
  }
  if (WordPress.currentBlog != null) {
    updateBlavatarImage();
    refreshButton=(Button)findViewById(R.id.action_refresh);
    blogTitle.setText(EscapeUtils.unescapeHtml(WordPress.currentBlog.getBlogName()));
    rl=(RelativeLayout)findViewById(R.id.blogSelector);
    rl.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        dialogBuilder=new AlertDialog.Builder(context);
        dialogBuilder.setTitle(getResources().getText(R.string.choose_blog));
        dialogBuilder.setItems(blogNames,new DialogInterface.OnClickListener(){
          public void onClick(          DialogInterface dialog,          int pos){
            blogTitle.setText(blogNames[pos]);
            WordPress.currentBlog=new Blog(blogIDs[pos],context);
            settingsDB.updateLastBlogID(context,blogIDs[pos]);
            updateBlavatarImage();
            if (onBlogChangedListener != null) {
              onBlogChangedListener.OnBlogChanged();
            }
          }
        }
);
        dialogBuilder.show();
      }
    }
);
    ImageButton showDashboard=(ImageButton)findViewById(R.id.home_small);
    showDashboard.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        if (dashboard.getVisibility() == View.GONE) {
          showDashboardOverlay();
        }
 else {
          Animation fadeOutAnimation=AnimationUtils.loadAnimation(context,R.anim.shrink_from_bottomleft_to_topright);
          dashboard.startAnimation(fadeOutAnimation);
          dashboard.setVisibility(View.GONE);
        }
      }
    }
);
    Button writeButton=(Button)findViewById(R.id.dashboard_write_btn);
    writeButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,EditPost.class);
        i.putExtra("id",WordPress.currentBlog.getId());
        i.putExtra("isNew",true);
        i.putExtra("option","");
        context.startActivity(i);
      }
    }
);
    Button postsButton=(Button)findViewById(R.id.dashboard_posts_btn);
    postsButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,ViewPosts.class);
        context.startActivity(i);
      }
    }
);
    Button pagesButton=(Button)findViewById(R.id.dashboard_pages_btn);
    pagesButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,ViewPosts.class);
        i.putExtra("id",WordPress.currentBlog.getId());
        i.putExtra("isNew",true);
        i.putExtra("viewPages",true);
        context.startActivity(i);
      }
    }
);
    Button commentsButton=(Button)findViewById(R.id.dashboard_comments_btn);
    commentsButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,ViewComments.class);
        i.putExtra("id",WordPress.currentBlog.getId());
        i.putExtra("isNew",true);
        context.startActivity(i);
      }
    }
);
    Button statsButton=(Button)findViewById(R.id.dashboard_stats_btn);
    statsButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,ViewStats.class);
        i.putExtra("id",WordPress.currentBlog.getId());
        i.putExtra("isNew",true);
        context.startActivity(i);
      }
    }
);
    Button settingsButton=(Button)findViewById(R.id.dashboard_settings_btn);
    settingsButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,Settings.class);
        i.putExtra("id",WordPress.currentBlog.getId());
        i.putExtra("isNew",true);
        context.startActivity(i);
      }
    }
);
    Button subsButton=(Button)findViewById(R.id.dashboard_subs_btn);
    subsButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,About.class);
        i.putExtra("id",WordPress.currentBlog.getId());
        i.putExtra("loadReader",true);
        context.startActivity(i);
      }
    }
);
    Button picButton=(Button)findViewById(R.id.dashboard_picture_btn);
    picButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,EditPost.class);
        i.putExtra("option","newphoto");
        i.putExtra("isNew",true);
        context.startActivity(i);
      }
    }
);
    Button videoButton=(Button)findViewById(R.id.dashboard_video_btn);
    videoButton.setOnClickListener(new View.OnClickListener(){
      public void onClick(      View v){
        Intent i=new Intent(context,EditPost.class);
        i.putExtra("option","newvideo");
        i.putExtra("isNew",true);
        context.startActivity(i);
      }
    }
);
  }
}
