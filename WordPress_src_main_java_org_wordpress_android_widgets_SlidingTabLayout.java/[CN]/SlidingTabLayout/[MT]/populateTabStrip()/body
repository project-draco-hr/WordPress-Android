{
  final PagerAdapter adapter=mViewPager.getAdapter();
  final View.OnClickListener tabClickListener=new TabClickListener();
  boolean showIcons=(mIcons != null && mIcons.length == adapter.getCount() && mTabViewIconViewId != 0);
  for (int i=0; i < adapter.getCount(); i++) {
    View tabView=null;
    if (showIcons) {
      tabView=LayoutInflater.from(getContext()).inflate(mTabViewLayoutId,mTabStrip,false);
      ImageView imgIcon=(ImageView)tabView.findViewById(mTabViewIconViewId);
      imgIcon.setImageDrawable(getContext().getResources().getDrawable(mIcons[i]));
    }
 else {
      TextView tabTitleView=null;
      if (mTabViewLayoutId != 0) {
        tabView=LayoutInflater.from(getContext()).inflate(mTabViewLayoutId,mTabStrip,false);
        tabTitleView=(TextView)tabView.findViewById(mTabViewTextViewId);
      }
 else {
        tabView=createDefaultTabView(getContext());
        tabTitleView=(TextView)tabView;
      }
      if (tabTitleView != null) {
        tabTitleView.setText(adapter.getPageTitle(i));
      }
    }
    if (mDistributeEvenly) {
      LinearLayout.LayoutParams lp=(LinearLayout.LayoutParams)tabView.getLayoutParams();
      lp.width=0;
      lp.weight=1;
    }
    tabView.setOnClickListener(tabClickListener);
    String desc=mContentDescriptions.get(i,null);
    if (desc != null) {
      tabView.setContentDescription(desc);
    }
    mTabStrip.addView(tabView);
    if (i == mViewPager.getCurrentItem()) {
      tabView.setSelected(true);
    }
  }
}
