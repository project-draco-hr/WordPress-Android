{
  if (!context.isAdded() || dialog == null) {
    return;
  }
  Toolbar toolbar;
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
    if (dialog.findViewById(android.R.id.list) == null) {
      return;
    }
    LinearLayout root=(LinearLayout)dialog.findViewById(android.R.id.list).getParent();
    toolbar=(Toolbar)LayoutInflater.from(context.getActivity()).inflate(org.wordpress.android.R.layout.toolbar,root,false);
    root.addView(toolbar,0);
  }
 else {
    if (dialog.findViewById(android.R.id.content) == null) {
      return;
    }
    ViewGroup root=(ViewGroup)dialog.findViewById(android.R.id.content);
    if (!(root.getChildAt(0) instanceof ListView)) {
      return;
    }
    ListView content=(ListView)root.getChildAt(0);
    root.removeAllViews();
    toolbar=(Toolbar)LayoutInflater.from(context.getActivity()).inflate(org.wordpress.android.R.layout.toolbar,root,false);
    int height;
    TypedValue tv=new TypedValue();
    if (context.getActivity().getTheme().resolveAttribute(org.wordpress.android.R.attr.actionBarSize,tv,true)) {
      height=TypedValue.complexToDimensionPixelSize(tv.data,context.getResources().getDisplayMetrics());
    }
 else {
      height=toolbar.getHeight();
    }
    content.setPadding(0,height,0,0);
    root.addView(content);
    root.addView(toolbar);
  }
  dialog.getWindow().setWindowAnimations(R.style.DialogAnimations);
  toolbar.setTitle(title);
  toolbar.setNavigationIcon(org.wordpress.android.R.drawable.ic_arrow_back_white_24dp);
  toolbar.setNavigationOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      dialog.dismiss();
    }
  }
);
}
