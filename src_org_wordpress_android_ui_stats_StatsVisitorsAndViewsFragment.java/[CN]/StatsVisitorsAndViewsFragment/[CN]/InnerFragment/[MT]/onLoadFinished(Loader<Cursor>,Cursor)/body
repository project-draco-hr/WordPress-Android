{
  if (getActivity() == null)   return;
  if (!cursor.moveToFirst() || cursor.getCount() == 0) {
    Context context=mBarGraphLayout.getContext();
    LayoutInflater inflater=LayoutInflater.from(context);
    mBarGraphLayout.addView(inflater.inflate(R.layout.stats_bar_graph_empty,mBarGraphLayout,false));
    return;
  }
  int numPoints=Math.min(getNumOfPoints(),cursor.getCount());
  GraphViewData[] views=new GraphViewData[numPoints];
  GraphViewData[] visitors=new GraphViewData[numPoints];
  String[] horLabels=new String[numPoints];
  for (int i=numPoints - 1; i >= 0; i--) {
    views[i]=new GraphViewData(i,getViews(cursor));
    visitors[i]=new GraphViewData(i,getVisitors(cursor));
    horLabels[i]=getDate(cursor);
    cursor.moveToNext();
  }
  GraphViewSeries viewsSeries=new GraphViewSeries(views);
  GraphViewSeries visitorsSeries=new GraphViewSeries(visitors);
  viewsSeries.getStyle().color=getResources().getColor(R.color.stats_bar_graph_views);
  viewsSeries.getStyle().padding=Utils.dpToPx(1);
  visitorsSeries.getStyle().color=getResources().getColor(R.color.stats_bar_graph_visitors);
  visitorsSeries.getStyle().padding=Utils.dpToPx(3);
  GraphView graphView=new StatsBarGraph(getActivity(),"");
  graphView.addSeries(viewsSeries);
  graphView.addSeries(visitorsSeries);
  graphView.getGraphViewStyle().setNumHorizontalLabels(getNumOfHorizontalLabels(numPoints));
  graphView.setHorizontalLabels(horLabels);
  mBarGraphLayout.removeAllViews();
  mBarGraphLayout.addView(graphView);
  mLegend.setVisibility(View.VISIBLE);
}
