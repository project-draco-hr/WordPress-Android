{
  super.onCreate(savedInstanceState);
  if (WordPress.wpDB == null) {
    Toast.makeText(this,R.string.fatal_db_error,Toast.LENGTH_LONG).show();
    Log.e("WordPress","MediaBrowserActivity DB is null - finishing MediaBrowser");
    finish();
    return;
  }
  setTitle(R.string.media);
  createMenuDrawer(R.layout.media_browser_activity);
  ActionBar actionBar=getSupportActionBar();
  actionBar.setDisplayShowTitleEnabled(true);
  FragmentManager fm=getSupportFragmentManager();
  fm.addOnBackStackChangedListener(mOnBackStackChangedListener);
  mMediaItemListFragment=(MediaItemListFragment)fm.findFragmentById(R.id.mediaItemListFragment);
  mMediaItemListFragment.setListShown(true);
  mMediaItemFragment=(MediaItemFragment)fm.findFragmentById(R.id.mediaItemFragment);
  String[] filters=new String[]{getResources().getString(R.string.all),getResources().getString(R.string.images),getResources().getString(R.string.unattached)};
  mSpinner=(Spinner)findViewById(R.id.filterSpinner);
  if (mSpinner != null) {
    ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,filters);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    mSpinner.setAdapter(adapter);
  }
}
