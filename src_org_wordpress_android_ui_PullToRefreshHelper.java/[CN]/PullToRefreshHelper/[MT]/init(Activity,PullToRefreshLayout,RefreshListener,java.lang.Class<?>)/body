{
  mContext=activity;
  mRefreshListener=listener;
  mPullToRefreshLayout=pullToRefreshLayout;
  mHeaderTransformer=new PullToRefreshHeaderTransformer();
  SetupWizard setupWizard=ActionBarPullToRefresh.from(activity).options(Options.create().headerTransformer(mHeaderTransformer).build()).allChildrenArePullable().listener(this);
  if (viewClass != null) {
    setupWizard.useViewDelegate(viewClass,new ViewDelegate(){
      @Override public boolean isReadyForPull(      View view,      float v,      float v2){
        return true;
      }
    }
);
  }
  setupWizard.setup(mPullToRefreshLayout);
  mHeaderTransformer.setOnTopScrollChangedListener(new OnTopScrollChangedListener(){
    @Override public void onTopScrollChanged(    boolean scrolledOnTop){
      mIsScrolledOnTop=scrolledOnTop;
      if (scrolledOnTop) {
        showTip(true);
      }
 else {
        hideTipTemporarily(true);
      }
    }
  }
);
  createTipView(activity);
}
