{
  WordPressDB db=new WordPressDB(this);
  for (int i=0; i < checkedComments.size(); i++) {
    if (checkedComments.get(i).toString().equals("true")) {
      client=new XMLRPCClient(blog.getUrl(),blog.getHttpuser(),blog.getHttppassword());
      CommentEntry listRow=(CommentEntry)getListView().getItemAtPosition(i);
      String curCommentID=listRow.commentID;
      HashMap contentHash, postHash=new HashMap();
      contentHash=(HashMap)allComments.get(curCommentID);
      postHash.put("status",newStatus);
      postHash.put("content",contentHash.get("comment"));
      postHash.put("author",contentHash.get("author"));
      postHash.put("author_url",contentHash.get("url"));
      postHash.put("author_email",contentHash.get("email"));
      Object[] params={blog.getBlogId(),blog.getUsername(),blog.getPassword(),curCommentID,postHash};
      Object result=null;
      try {
        result=(Object)client.call("wp.editComment",params);
        boolean bResult=Boolean.parseBoolean(result.toString());
        if (bResult) {
          checkedComments.set(i,"false");
          listRow.status=newStatus;
          model.set(i,listRow);
          db.updateCommentStatus(ViewComments.this,id,listRow.commentID,newStatus);
        }
      }
 catch (      XMLRPCException e) {
        moderateErrorMsg=e.getLocalizedMessage();
      }
    }
  }
  dismissDialog(ID_DIALOG_MODERATING);
  Thread action=new Thread(){
    public void run(){
      if (moderateErrorMsg == "") {
        Toast.makeText(ViewComments.this,getResources().getText(R.string.comments_moderated),Toast.LENGTH_SHORT).show();
      }
 else {
        AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(ViewComments.this);
        dialogBuilder.setTitle(getResources().getText(R.string.connection_error));
        dialogBuilder.setMessage(moderateErrorMsg);
        dialogBuilder.setPositiveButton("OK",new DialogInterface.OnClickListener(){
          public void onClick(          DialogInterface dialog,          int whichButton){
          }
        }
);
        dialogBuilder.setCancelable(true);
        if (!isFinishing()) {
          dialogBuilder.create().show();
        }
      }
    }
  }
;
  this.runOnUiThread(action);
  if (moderateErrorMsg == "") {
    checkedCommentTotal=0;
    Thread action2=new Thread(){
      public void run(){
        pd=new ProgressDialog(ViewComments.this);
        showOrHideBulkCheckBoxes();
        hideModerationBar();
        thumbs.notifyDataSetChanged();
      }
    }
;
    this.runOnUiThread(action2);
  }
}
