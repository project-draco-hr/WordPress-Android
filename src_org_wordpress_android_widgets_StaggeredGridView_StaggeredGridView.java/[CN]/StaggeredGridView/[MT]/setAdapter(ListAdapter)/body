{
  if (mAdapter != null) {
    mAdapter.unregisterDataSetObserver(mObserver);
  }
  clearAllState();
  mAdapter=new HeaderFooterListAdapter(mHeaderView,mFooterView,adapter);
  mDataChanged=true;
  if (mAdapter != null) {
    mAdapter.registerDataSetObserver(mObserver);
    mRecycler.setViewTypeCount(mAdapter.getViewTypeCount());
    mHasStableIds=mAdapter.hasStableIds();
  }
 else {
    mHasStableIds=false;
  }
  populate(mAdapter != null);
}
