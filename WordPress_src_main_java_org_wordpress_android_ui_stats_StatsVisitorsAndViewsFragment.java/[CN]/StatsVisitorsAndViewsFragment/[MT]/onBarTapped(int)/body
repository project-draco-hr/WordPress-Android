{
  AppLog.e(AppLog.T.STATS," Tapped bar date " + mStatsDate[tappedBar]);
  updateOverviewAreaBelowTheGraph(tappedBar);
  if (!NetworkUtils.isNetworkAvailable(getActivity())) {
    return;
  }
  String date=mStatsDate[tappedBar];
  if (date == null) {
    AppLog.w(AppLog.T.STATS,"A call to update stats is made but a null date is received!!");
    return;
  }
  String calculatedDate=null;
  try {
    SimpleDateFormat sdf;
    Calendar c;
    final Date parsedDate;
switch (getTimeframe()) {
case DAY:
      calculatedDate=date;
    break;
case WEEK:
  sdf=new SimpleDateFormat("yyyy'W'MM'W'dd");
parsedDate=sdf.parse(date);
c=Calendar.getInstance();
c.setTime(parsedDate);
c.set(Calendar.DAY_OF_WEEK,c.getFirstDayOfWeek());
c.add(Calendar.DAY_OF_WEEK,+7);
calculatedDate=StatsUtils.msToString(c.getTimeInMillis(),"yyyy-MM-dd");
break;
case MONTH:
sdf=new SimpleDateFormat("yyyy-MM");
parsedDate=sdf.parse(date);
c=Calendar.getInstance();
c.setTime(parsedDate);
c.set(Calendar.DAY_OF_MONTH,c.getActualMaximum(Calendar.DAY_OF_MONTH));
calculatedDate=StatsUtils.msToString(c.getTimeInMillis(),"yyyy-MM-dd");
break;
case YEAR:
sdf=new SimpleDateFormat("yyyy-MM-dd");
parsedDate=sdf.parse(date);
c=Calendar.getInstance();
c.setTime(parsedDate);
c.set(Calendar.MONTH,Calendar.DECEMBER);
c.set(Calendar.DAY_OF_MONTH,31);
calculatedDate=StatsUtils.msToString(c.getTimeInMillis(),"yyyy-MM-dd");
break;
}
}
 catch (ParseException e) {
AppLog.e(AppLog.T.UTILS,e);
}
if (calculatedDate == null) {
AppLog.w(AppLog.T.STATS,"A call to request new stats stats is made but date received cannot be parsed!! " + date);
return;
}
final String blogId=StatsUtils.getBlogId(getLocalTableBlogID());
Intent intent=new Intent(getActivity(),StatsService.class);
intent.putExtra(StatsService.ARG_BLOG_ID,blogId);
intent.putExtra(StatsService.ARG_PERIOD,getTimeframe());
intent.putExtra(StatsService.ARG_DATE,calculatedDate);
intent.putExtra(StatsService.ARG_UPDATE_GRAPH,false);
getActivity().startService(intent);
}
