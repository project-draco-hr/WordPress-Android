{
  super.onCreate(savedInstanceState);
  setRetainInstance(true);
  addPreferencesFromResource(R.xml.settings);
  mPreferenceScreen=(PreferenceScreen)findPreference(getActivity().getString(R.string.pref_key_settings_root));
  mUsernamePreference=findPreference(getString(R.string.pref_key_username));
  mEmailPreference=(EditTextPreference)findPreference(getString(R.string.pref_key_email));
  mPrimarySitePreference=(DetailListPreference)findPreference(getString(R.string.pref_key_primary_site));
  mWebAddressPreference=(EditTextPreference)findPreference(getString(R.string.pref_key_web_address));
  mLanguagePreference=(DetailListPreference)findPreference(getString(R.string.pref_key_language));
  mEmailPreference.setOnPreferenceChangeListener(this);
  mPrimarySitePreference.setOnPreferenceChangeListener(this);
  mWebAddressPreference.setOnPreferenceChangeListener(this);
  mLanguagePreference.setOnPreferenceChangeListener(this);
  findPreference(getString(R.string.pref_key_language)).setOnPreferenceClickListener(this);
  findPreference(getString(R.string.pref_key_app_about)).setOnPreferenceClickListener(this);
  findPreference(getString(R.string.pref_key_oss_licenses)).setOnPreferenceClickListener(this);
  mSettings=PreferenceManager.getDefaultSharedPreferences(getActivity());
  checkWordPressComOnlyFields();
}
