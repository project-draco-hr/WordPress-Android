{
  super.onCreate(savedInstanceState);
  if (savedInstanceState == null) {
    AnalyticsTracker.track(AnalyticsTracker.Stat.OPENED_SETTINGS);
  }
  addPreferencesFromResource(R.xml.preferences);
  mNotificationsGroup=(PreferenceGroup)findPreference("wp_pref_notifications_category");
  OnPreferenceChangeListener preferenceChangeListener=new OnPreferenceChangeListener(){
    @Override public boolean onPreferenceChange(    Preference preference,    Object newValue){
      if (newValue != null) {
        preference.setSummary(newValue.toString());
      }
      ActivityUtils.hideKeyboard(getActivity());
      return true;
    }
  }
;
  mTaglineTextPreference=(WPEditTextPreference)findPreference("wp_pref_post_signature");
  if (mTaglineTextPreference != null) {
    mTaglineTextPreference.setOnPreferenceChangeListener(preferenceChangeListener);
  }
  Preference signOutPreference=findPreference("wp_pref_sign_out");
  signOutPreference.setOnPreferenceClickListener(signOutPreferenceClickListener);
  Preference resetAutoShare=findPreference("wp_reset_share_pref");
  resetAutoShare.setOnPreferenceClickListener(resetAUtoSharePreferenceClickListener);
  mSettings=PreferenceManager.getDefaultSharedPreferences(getActivity());
  initNotifications();
  if (AppLockManager.getInstance().isAppLockFeatureEnabled()) {
    final CheckBoxPreference passcodeEnabledCheckBoxPreference=(CheckBoxPreference)findPreference("wp_pref_passlock_enabled");
    passcodeEnabledCheckBoxPreference.setOnPreferenceClickListener(new OnPreferenceClickListener(){
      @Override public boolean onPreferenceClick(      Preference preference){
        passcodeEnabledCheckBoxPreference.setChecked(AppLockManager.getInstance().getCurrentAppLock().isPasswordLocked());
        return false;
      }
    }
);
  }
 else {
    PreferenceScreen rootScreen=(PreferenceScreen)findPreference("wp_pref_root");
    PreferenceGroup passcodeGroup=(PreferenceGroup)findPreference("wp_passcode_lock_category");
    rootScreen.removePreference(passcodeGroup);
  }
  displayPreferences();
}
