{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.settings);
  mPreferenceScreen=(PreferenceScreen)findPreference(getActivity().getString(R.string.pref_key_settings_root));
  mUsernamePreference=findPreference(getString(R.string.pref_key_username));
  mEmailPreference=(EditTextPreference)findPreference(getString(R.string.pref_key_email));
  mEmailPreference.setOnPreferenceChangeListener(this);
  findPreference(getString(R.string.pref_key_language)).setOnPreferenceClickListener(this);
  findPreference(getString(R.string.pref_key_app_about)).setOnPreferenceClickListener(this);
  findPreference(getString(R.string.pref_key_oss_licenses)).setOnPreferenceClickListener(this);
  mLanguagePreference=(DetailListPreference)findPreference(getString(R.string.pref_key_language));
  CharSequence[] languageCodes=mLanguagePreference.getEntryValues();
  mLanguagePreference.setEntries(WPPrefUtils.createLanguageDisplayStrings(languageCodes));
  mLanguagePreference.setDetails(WPPrefUtils.createLanguageDetailDisplayStrings(languageCodes,mSettings.getString(LANGUAGE_PREF_KEY,"")));
  mLanguagePreference.refreshAdapter();
  mSettings=PreferenceManager.getDefaultSharedPreferences(getActivity());
  checkWordPressComOnlyFields();
}
