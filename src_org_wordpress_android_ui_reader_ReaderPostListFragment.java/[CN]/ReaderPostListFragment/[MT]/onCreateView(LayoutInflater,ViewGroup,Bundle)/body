{
  final View view=inflater.inflate(R.layout.reader_fragment_post_list,container,false);
  mListView=(ListView)view.findViewById(android.R.id.list);
  mNewPostsBar=(TextView)view.findViewById(R.id.text_new_posts);
  mNewPostsBar.setVisibility(View.GONE);
  mNewPostsBar.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View view){
      reloadPosts(true);
      hideNewPostsBar();
    }
  }
);
  if (isFullScreenSupported()) {
    Context context=container.getContext();
    ReaderFullScreenUtils.addListViewHeader(context,mListView);
    final int actionbarHeight=DisplayUtils.getActionBarHeight(context);
    RelativeLayout.LayoutParams params=(RelativeLayout.LayoutParams)mNewPostsBar.getLayoutParams();
    params.topMargin=actionbarHeight;
  }
  mEmptyView=view.findViewById(R.id.empty_view);
  mListView.setOnScrollListener(this);
  mListView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> adapterView,    View view,    int position,    long id){
      position-=mListView.getHeaderViewsCount();
      ReaderPost post=(ReaderPost)getPostAdapter().getItem(position);
      if (post != null && mPostSelectedListener != null)       mPostSelectedListener.onPostSelected(post.blogId,post.postId);
    }
  }
);
  mPullToRefreshLayout=(PullToRefreshLayout)view.findViewById(R.id.ptr_layout);
  ActionBarPullToRefresh.from(getActivity()).allChildrenArePullable().listener(this).setup(mPullToRefreshLayout);
  mListView.setAdapter(getPostAdapter());
  return view;
}
