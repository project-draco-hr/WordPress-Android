{
  int itemId=item.getItemId();
  if (itemId == R.id.menu_refresh) {
    if (WordPress.getCurrentBlog() == null)     return true;
    final RefreshBlogContentTask refreshBlogContentTask=new ApiHelper.RefreshBlogContentTask(this,WordPress.getCurrentBlog(),new ApiHelper.VerifyCredentialsCallback(this,WordPress.getCurrentBlog().isDotcomFlag()));
    boolean hasLocalChanges=WordPress.wpDB.findLocalChanges(WordPress.getCurrentBlog().getLocalTableBlogId(),mIsPage);
    if (hasLocalChanges) {
      AlertDialog.Builder dialogBuilder=new AlertDialog.Builder(PostsActivity.this);
      dialogBuilder.setTitle(getResources().getText(R.string.local_changes));
      dialogBuilder.setMessage(getResources().getText(R.string.remote_changes));
      dialogBuilder.setPositiveButton(getResources().getText(R.string.yes),new DialogInterface.OnClickListener(){
        public void onClick(        DialogInterface dialog,        int whichButton){
          PostsActivity.this.onRefresh(true);
          refreshBlogContentTask.execute(false);
        }
      }
);
      dialogBuilder.setNegativeButton(getResources().getText(R.string.no),new DialogInterface.OnClickListener(){
        public void onClick(        DialogInterface dialog,        int whichButton){
        }
      }
);
      dialogBuilder.setCancelable(true);
      if (!isFinishing()) {
        dialogBuilder.create().show();
      }
    }
 else {
      onRefresh(true);
      refreshBlogContentTask.execute(false);
    }
    return true;
  }
 else   if (itemId == R.id.menu_new_post) {
    newPost();
    return true;
  }
 else   if (itemId == android.R.id.home) {
    FragmentManager fm=getSupportFragmentManager();
    if (fm.getBackStackEntryCount() > 0) {
      popPostDetail();
      return true;
    }
  }
  return super.onOptionsItemSelected(item);
}
