{
  super.onCreate(icicle);
  setTitle(getResources().getText(R.string.settings));
  ActionBar ab=getSupportActionBar();
  ab.setDisplayHomeAsUpEnabled(true);
  if (WordPress.currentBlog == null) {
    try {
      WordPress.currentBlog=new Blog(WordPress.wpDB.getLastBlogId());
    }
 catch (    Exception e) {
      Toast.makeText(this,getResources().getText(R.string.blog_not_found),Toast.LENGTH_SHORT).show();
      finish();
    }
  }
  addPreferencesFromResource(R.xml.preferences);
  mNotificationsGroup=(PreferenceGroup)findPreference("wp_pref_notifications_category");
  preferenceChangeListener=new OnPreferenceChangeListener(){
    @Override public boolean onPreferenceChange(    Preference preference,    Object newValue){
      preference.setSummary(newValue.toString());
      return true;
    }
  }
;
  taglineTextPreference=(EditTextPreference)findPreference("wp_pref_post_signature");
  taglineTextPreference.setOnPreferenceChangeListener(preferenceChangeListener);
  mSettings=PreferenceManager.getDefaultSharedPreferences(this);
  if (WordPress.hasValidWPComCredentials(PreferencesActivity.this)) {
    String settingsJson=mSettings.getString("wp_pref_notification_settings",null);
    if (settingsJson == null) {
      new WPComXMLRPCApi().getNotificationSettings(new XMLRPCCallback(){
        public void onSuccess(        long id,        Object result){
          refreshWPComAuthCategory();
        }
        public void onFailure(        long id,        XMLRPCException error){
        }
      }
,this);
    }
  }
  displayPreferences();
}
