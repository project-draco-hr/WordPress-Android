{
  super.onCreate(savedInstanceState);
  createMenuDrawer(R.layout.notifications);
  ActionBar actionBar=getSupportActionBar();
  actionBar.setDisplayShowTitleEnabled(true);
  setTitle(getString(R.string.notifications));
  Blog blog=getCurrentBlog();
  FragmentManager fm=getSupportFragmentManager();
  mNotesList=(NotificationsListFragment)fm.findFragmentById(R.id.notes_list);
  mNotesList.setNoteProvider(new NoteProvider());
  mNotesList.setOnNoteClickListener(new NoteClickListener());
  restClient.requestAccessToken(blog.getUsername(),blog.getPassword(),new OauthTokenResponseHandler(){
    @Override public void onStart(){
      startAnimatingRefreshButton(mRefreshMenuItem);
      shouldAnimateRefreshButton=true;
    }
    @Override public void onSuccess(    OauthToken token){
      launchWithNoteId();
      refreshNotes();
    }
    @Override public void onFailure(    Throwable e,    JSONObject response){
      Log.e(TAG,String.format("Failed: %s",response),e);
    }
    @Override public void onFinish(){
    }
  }
);
  fragmentDetectors.add(new FragmentDetector(){
    @Override public Fragment getFragment(    Note note){
      if (note.isCommentType()) {
        Fragment fragment=new NoteCommentFragment();
        return fragment;
      }
      return null;
    }
  }
);
  fragmentDetectors.add(new FragmentDetector(){
    @Override public Fragment getFragment(    Note note){
      if (note.isSingleLineListTemplate()) {
        Fragment fragment=new SingleLineListFragment();
        return fragment;
      }
      return null;
    }
  }
);
  fragmentDetectors.add(new FragmentDetector(){
    @Override public Fragment getFragment(    Note note){
      Log.d(TAG,String.format("Is it a big badge template? %b",note.isBigBadgeTemplate()));
      if (note.isBigBadgeTemplate()) {
        Fragment fragment=new BigBadgeFragment();
        return fragment;
      }
      return null;
    }
  }
);
  GCMIntentService.activeNotificationsMap.clear();
}
