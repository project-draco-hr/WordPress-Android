{
  if (!isAdded() || !hasPost())   return;
  if (event.getSourcePost().postId != mPostId || event.getSourcePost().blogId != mBlogId) {
    return;
  }
  ViewGroup container=(ViewGroup)getView().findViewById(R.id.container_related_posts);
  container.removeAllViews();
  LayoutInflater inflater=LayoutInflater.from(getActivity());
  int imageSize=DisplayUtils.dpToPx(getActivity(),getResources().getDimensionPixelSize(R.dimen.reader_related_post_image_size));
  for (  final ReaderPost post : event.getRelatedPosts()) {
    View postView=inflater.inflate(R.layout.reader_related_post,container,false);
    TextView txtTitle=(TextView)postView.findViewById(R.id.text_related_post_title);
    txtTitle.setText(post.getTitle());
    String subTitle;
    if (post.hasAuthorName() && post.hasBlogName()) {
      subTitle=post.getAuthorName() + ", " + post.getBlogName();
    }
 else     if (post.hasAuthorName()) {
      subTitle=post.getAuthorName();
    }
 else     if (post.hasBlogName()) {
      subTitle=post.getBlogName();
    }
 else {
      subTitle="";
    }
    TextView txtSubtitle=(TextView)postView.findViewById(R.id.text_related_post_subtitle);
    txtSubtitle.setText(subTitle);
    WPNetworkImageView imgFeatured=(WPNetworkImageView)postView.findViewById(R.id.image_related_post);
    if (post.hasFeaturedImage()) {
      String imageUrl=post.getFeaturedImageForDisplay(imageSize,imageSize);
      imgFeatured.setImageUrl(imageUrl,WPNetworkImageView.ImageType.PHOTO);
      imgFeatured.setVisibility(View.VISIBLE);
    }
 else {
      imgFeatured.setVisibility(View.GONE);
    }
    postView.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View view){
        ReaderActivityLauncher.showReaderPostDetail(view.getContext(),post.blogId,post.postId);
      }
    }
);
    container.addView(postView);
  }
  View label=getView().findViewById(R.id.text_related_posts_label);
  label.setVisibility(View.VISIBLE);
  container.setVisibility(View.VISIBLE);
}
