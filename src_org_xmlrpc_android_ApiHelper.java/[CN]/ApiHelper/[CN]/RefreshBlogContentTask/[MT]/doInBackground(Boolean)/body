{
  boolean commentsOnly=params[0];
  XMLRPCClient client=new XMLRPCClient(mBlog.getUrl(),mBlog.getHttpuser(),mBlog.getHttppassword());
  if (!commentsOnly) {
    Map<String,String> hPost=new HashMap<String,String>();
    hPost.put("software_version","software_version");
    hPost.put("post_thumbnail","post_thumbnail");
    hPost.put("jetpack_client_id","jetpack_client_id");
    hPost.put("blog_public","blog_public");
    hPost.put("home_url","home_url");
    hPost.put("admin_url","admin_url");
    hPost.put("login_url","login_url");
    Object[] vParams={mBlog.getBlogId(),mBlog.getUsername(),mBlog.getPassword(),hPost};
    Object versionResult=new Object();
    try {
      versionResult=(Object)client.call("wp.getOptions",vParams);
    }
 catch (    XMLRPCException e) {
      return false;
    }
    if (versionResult != null) {
      try {
        Map<?,?> blogOptions=(HashMap<?,?>)versionResult;
        Gson gson=new Gson();
        String blogOptionsJson=gson.toJson(blogOptions);
        if (blogOptionsJson != null)         mBlog.setBlogOptions(blogOptionsJson);
        if (!mBlog.isDotcomFlag()) {
          Map<?,?> sv=(HashMap<?,?>)blogOptions.get("software_version");
          String wpVersion=sv.get("value").toString();
          if (wpVersion.length() > 0) {
            mBlog.setWpVersion(wpVersion);
          }
        }
        Map<?,?> featuredImageHash=(HashMap<?,?>)blogOptions.get("post_thumbnail");
        if (featuredImageHash != null) {
          boolean featuredImageCapable=Boolean.parseBoolean(featuredImageHash.get("value").toString());
          mBlog.setFeaturedImageCapable(featuredImageCapable);
        }
 else {
          mBlog.setFeaturedImageCapable(false);
        }
        if (WordPress.getCurrentBlog() != null && WordPress.getCurrentBlog().isActive())         mBlog.save("");
      }
 catch (      Exception e) {
      }
    }
    List<Object> args=new Vector<Object>();
    args.add(mBlog);
    args.add(mContext);
    new ApiHelper.getPostFormatsTask().execute(args);
  }
  Object[] userParams={mBlog.getBlogId(),mBlog.getUsername(),mBlog.getPassword()};
  try {
    Map<String,Object> userInfo=(HashMap<String,Object>)client.call("wp.getProfile",userParams);
    if (userInfo.containsKey("roles")) {
      Object[] userRoles=(Object[])userInfo.get("roles");
      mBlog.setAdmin(false);
      for (int i=0; i < userRoles.length; i++) {
        if (userRoles[i].toString().equals("administrator")) {
          mBlog.setAdmin(true);
          break;
        }
      }
      mBlog.save("");
    }
  }
 catch (  XMLRPCException e) {
    return false;
  }
  Map<String,Object> hPost=new HashMap<String,Object>();
  hPost.put("number",30);
  Object[] commentParams={mBlog.getBlogId(),mBlog.getUsername(),mBlog.getPassword(),hPost};
  try {
    ApiHelper.refreshComments(mContext,commentParams);
  }
 catch (  XMLRPCException e) {
    return false;
  }
  return true;
}
