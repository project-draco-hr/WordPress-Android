{
  boolean commentsOnly=params[0];
  XMLRPCClient client=new XMLRPCClient(blog.getUrl(),blog.getHttpuser(),blog.getHttppassword());
  if (!commentsOnly) {
    Map<String,String> hPost=new HashMap<String,String>();
    hPost.put("software_version","software_version");
    hPost.put("post_thumbnail","post_thumbnail");
    hPost.put("jetpack_client_id","jetpack_client_id");
    hPost.put("blog_public","blog_public");
    hPost.put("home_url","home_url");
    Object[] vParams={blog.getBlogId(),blog.getUsername(),blog.getPassword(),hPost};
    Object versionResult=new Object();
    try {
      versionResult=(Object)client.call("wp.getOptions",vParams);
    }
 catch (    XMLRPCException e) {
      return false;
    }
    if (versionResult != null) {
      try {
        Map<?,?> blogOptions=(HashMap<?,?>)versionResult;
        Gson gson=new Gson();
        String blogOptionsJson=gson.toJson(blogOptions);
        if (blogOptionsJson != null)         blog.setBlogOptions(blogOptionsJson);
        if (!blog.isDotcomFlag()) {
          Map<?,?> sv=(HashMap<?,?>)blogOptions.get("software_version");
          String wpVersion=sv.get("value").toString();
          if (wpVersion.length() > 0) {
            blog.setWpVersion(wpVersion);
          }
        }
        Map<?,?> featuredImageHash=(HashMap<?,?>)blogOptions.get("post_thumbnail");
        if (featuredImageHash != null) {
          boolean featuredImageCapable=Boolean.parseBoolean(featuredImageHash.get("value").toString());
          blog.setFeaturedImageCapable(featuredImageCapable);
        }
 else {
          blog.setFeaturedImageCapable(false);
        }
        blog.save("");
      }
 catch (      Exception e) {
      }
    }
    List<Object> args=new Vector<Object>();
    args.add(blog);
    args.add(context);
    new ApiHelper.getPostFormatsTask().execute(args);
  }
  Map<String,Object> hPost=new HashMap<String,Object>();
  hPost.put("number",30);
  Object[] commentParams={blog.getBlogId(),blog.getUsername(),blog.getPassword(),hPost};
  try {
    ApiHelper.refreshComments(context,commentParams);
  }
 catch (  XMLRPCException e) {
    return false;
  }
  return true;
}
