{
  List<?> arguments=params[0];
  WordPress.currentBlog=(Blog)arguments.get(0);
  if (WordPress.currentBlog == null) {
    Log.e("WordPress","ApiHelper - current blog is null");
    return false;
  }
  client=new XMLRPCClient(WordPress.currentBlog.getUrl(),WordPress.currentBlog.getHttpuser(),WordPress.currentBlog.getHttppassword());
  Map<String,Object> filter=new HashMap<String,Object>();
  filter.put("number",50);
  filter.put("offset",mOffset);
  if (mFilter == Filter.IMAGES)   filter.put("mime_type","images/*");
 else   if (mFilter == Filter.UNATTACHED)   filter.put("parent_id",0);
  Object[] apiParams={WordPress.currentBlog.getBlogId(),WordPress.currentBlog.getUsername(),WordPress.currentBlog.getPassword(),filter};
  Object[] results=null;
  try {
    results=(Object[])client.call("wp.getMediaLibrary",apiParams);
  }
 catch (  XMLRPCException e) {
    Log.e("WordPress",e.getMessage());
  }
  if (results != null) {
    String blogId=String.valueOf(WordPress.currentBlog.getBlogId());
    Map<?,?> resultMap;
    for (    Object result : results) {
      resultMap=(Map<?,?>)result;
      WordPress.wpDB.saveMediaFile(new MediaFile(blogId,resultMap));
    }
    return true;
  }
 else {
    return false;
  }
}
