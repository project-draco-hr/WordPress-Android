{
  accounts=WordPress.wpDB.getAccounts(this);
  ListView listView=(ListView)findViewById(android.R.id.list);
  ImageView iv=new ImageView(this);
  iv.setBackgroundDrawable(getResources().getDrawable(R.drawable.list_divider));
  listView.addFooterView(iv);
  listView.setVerticalFadingEdgeEnabled(false);
  listView.setVerticalScrollBarEnabled(true);
  if (accounts.size() > 0) {
    ScrollView sv=new ScrollView(this);
    sv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    LinearLayout layout=new LinearLayout(this);
    layout.setPadding(10,10,10,0);
    layout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    layout.setOrientation(LinearLayout.VERTICAL);
    blogNames=new String[accounts.size()];
    accountIDs=new int[accounts.size()];
    accountUsers=new String[accounts.size()];
    blavatars=new String[accounts.size()];
    int validBlogCtr=0;
    for (int i=0; i < accounts.size(); i++) {
      HashMap<?,?> curHash=(HashMap<?,?>)accounts.get(i);
      blogNames[validBlogCtr]=curHash.get("blogName").toString();
      accountUsers[validBlogCtr]=curHash.get("username").toString();
      accountIDs[validBlogCtr]=(Integer)curHash.get("id");
      String url=curHash.get("url").toString();
      url=url.replace("http://","");
      url=url.replace("https://","");
      String[] urlSplit=url.split("/");
      url=urlSplit[0];
      url="http://gravatar.com/blavatar/" + ViewComments.getMd5Hash(url.trim()) + "?s=60&d=404";
      blavatars[validBlogCtr]=url;
      accountNames.add(validBlogCtr,blogNames[i]);
      validBlogCtr++;
    }
    if (validBlogCtr < accounts.size()) {
      accounts=WordPress.wpDB.getAccounts(this);
    }
    ThumbnailBus bus=new ThumbnailBus();
    thumbs=new ThumbnailAdapter(this,new HomeListAdapter(this),new SimpleWebImageCache<ThumbnailBus,ThumbnailMessage>(null,null,101,bus),IMAGE_IDS);
    setListAdapter(thumbs);
    listView.setOnItemClickListener(new OnItemClickListener(){
      public void onItemClick(      AdapterView<?> arg0,      View row,      int position,      long id){
        AddQuickPressShortcut.this.buildDialog(position);
      }
    }
);
    if (accounts.size() == 1) {
      AddQuickPressShortcut.this.buildDialog(0);
    }
  }
 else {
    Intent i=new Intent(AddQuickPressShortcut.this,NewAccount.class);
    startActivityForResult(i,0);
  }
}
